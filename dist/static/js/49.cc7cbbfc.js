(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{636:function(e,a,t){},637:function(e,a,t){},836:function(e,a,t){"use strict";var s=t(636);t.n(s).a},837:function(e,a,t){"use strict";var s=t(637);t.n(s).a},862:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"data-box search-box"},[t("div",{staticClass:"search-total"},[t("button",{staticClass:"default-button export-btn fl",on:{click:e.exportData}},[e._v("导出")]),e._v(" "),t("div",{staticClass:"search-item fr"},[t("com-input",{staticClass:"search-com",staticStyle:{width:"220px"},attrs:{type:"search",value:e.searchParams.keyword,maxLength:30,placeholder:"输入姓名/手机号/邮箱"},on:{"update:value":function(a){e.$set(e.searchParams,"keyword",a)}},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.searchEnter(a):null}}}),e._v(" "),t("span",{staticClass:"data-link",staticStyle:{"font-size":"14px","margin-left":"6px"},on:{click:function(a){e.isHigh=!e.isHigh}}},[e._v("高级筛选\n      "),t("i",{class:{iconfont:!0,"icon-Up":!0,"icon-down":!e.isHigh}})])],1)]),e._v(" "),e.isHigh?t("div",{staticClass:"data-pad"},[t("div",{staticClass:"search-item"},[t("span",{staticClass:"search-title"},[e._v("关键词搜索")]),e._v(" "),t("com-input",{staticClass:"search-com",staticStyle:{width:"220px"},attrs:{type:"search",value:e.searchParams.keyword,maxLength:30,placeholder:"输入姓名/手机号/邮箱"},on:{"update:value":function(a){e.$set(e.searchParams,"keyword",a)}},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.searchEnter(a):null}}})],1),e._v(" "),t("br"),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("用户级别")]),e._v(" "),t("el-select",{model:{value:e.searchParams.user_level,callback:function(a){e.$set(e.searchParams,"user_level",a)},expression:"searchParams.user_level"}},e._l(e.watcherTypeList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("本次得分")]),e._v(" "),t("el-select",{attrs:{placeholder:"本次得分"},model:{value:e.searchParams.score,callback:function(a){e.$set(e.searchParams,"score",a)},expression:"searchParams.score"}},e._l(e.scoreTypeList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("新老用户")]),e._v(" "),t("el-select",{model:{value:e.searchParams.is_new,callback:function(a){e.$set(e.searchParams,"is_new",a)},expression:"searchParams.is_new"}},e._l(e.userTypeList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("用户性别")]),e._v(" "),t("el-select",{attrs:{placeholder:"用户性别"},model:{value:e.searchParams.sex,callback:function(a){e.$set(e.searchParams,"sex",a)},expression:"searchParams.sex"}},e._l(e.genderList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("所属行业")]),e._v(" "),t("el-select",{attrs:{placeholder:"所属行业"},model:{value:e.searchParams.industry,callback:function(a){e.$set(e.searchParams,"industry",a)},expression:"searchParams.industry"}},e._l(e.tradeList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("观看设备")]),e._v(" "),t("el-select",{attrs:{placeholder:"观看设备"},model:{value:e.searchParams.device,callback:function(a){e.$set(e.searchParams,"device",a)},expression:"searchParams.device"}},e._l(e.deviceList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("所属地域")]),e._v(" "),t("el-select",{staticStyle:{width:"100px"},model:{value:e.searchParams.province,callback:function(a){e.$set(e.searchParams,"province",a)},expression:"searchParams.province"}},e._l(e.provinceList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),t("el-select",{staticStyle:{width:"112px"},model:{value:e.searchParams.city,callback:function(a){e.$set(e.searchParams,"city",a)},expression:"searchParams.city"}},e._l(e.cityList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("观众出入时段")]),e._v(" "),t("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",type:"datetimerange","range-separator":"至","start-placeholder":"输入进入时间","end-placeholder":"输入离开时间"},model:{value:e.enterOutTime,callback:function(a){e.enterOutTime=a},expression:"enterOutTime"}})],1),e._v(" "),t("div",{staticClass:"search-btns"},[t("button",{staticClass:"primary-button",on:{click:e.searchEnter}},[e._v("查询")]),e._v(" "),t("button",{staticClass:"default-button",on:{click:e.cancelClick}},[e._v("取消")])])]):e._e(),e._v(" "),t("div",{staticClass:"table-list-box data-pad"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.viewerList,"default-sort":{prop:"score",order:"descending"}}},[t("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.nickname)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"score",sortable:"",label:"本次得分"}}),e._v(" "),t("el-table-column",{attrs:{prop:"end_user_level",label:"会后级别"}}),e._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),t("el-table-column",{attrs:{label:"参会时间（第一次）"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(a.row.first_join_at&&a.row.first_join_at.substring(0,16))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"观看时长"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("fmtTime")(a.row.watch_time))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"source",label:"渠道来源"}}),e._v(" "),t("el-table-column",{attrs:{label:"详情"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"data-link",on:{click:function(t){e.goPageDetail(a.row.consumer_uid)}}},[e._v("详情")])]}}])})],1),e._v(" "),e.total>e.searchParams.pageSize?t("div",{staticClass:"page-pagination"},[t("ve-pagination",{attrs:{total:e.total,pageSize:e.searchParams.pageSize},on:{changePage:e.changePage}})],1):e._e()],1)])};s._withStripped=!0;var l=t(30),r=t.n(l),i=t(472),c=t(476),n=t(95),o=t(15),u={name:"viewerList",components:{VePagination:i.a},data:function(){return{isHigh:!1,enterOutTime:[],total:0,viewerList:[],searchParams:{activityId:"",keyword:"",sex:"",user_level:"",is_new:"",province:"",city:"",industry:"",first_join_at:"",last_leave_at:"",device:"",score:"",page:1,pageSize:10},genderList:[{value:"",label:"全部"},{value:"M",label:"男"},{value:"W",label:"女"}],watcherTypeList:[{value:"",label:"全部用户"},{value:1,label:"优质用户"},{value:2,label:"潜在用户"},{value:3,label:"一般用户"},{value:4,label:"高价值用户"},{value:5,label:"流失用户"}],provinceList:[{value:"",label:"省"},{value:1,label:"北京"},{value:2,label:"河南省"},{value:3,label:"河北省"},{value:4,label:"黑龙江"},{value:5,label:"湖北"}],cityList:[{value:"",label:"市"},{value:1,label:"北京市"},{value:2,label:"郑州市"},{value:3,label:"天津市"}],tradeList:[{value:"",label:"全部"},{value:1,label:"导入"},{value:2,label:"微信注册"},{value:3,label:"PC注册"}],deviceList:[{value:"",label:"全部"},{value:"pc",label:"电脑"},{value:"phone",label:"手机"}],scoreTypeList:[{value:"",label:"全部"},{value:1,label:"100>得分>90"},{value:2,label:"90>得分>80"},{value:3,label:"80>得分>60"},{value:4,label:"60>得分"}],userTypeList:[{value:"",label:"全部"},{value:0,label:"老用户"},{value:1,label:"新用户"}]}},filters:{fmtTime:function(e){return((e/3600>>0)+"").padStart(2,0)+":"+((e/60%60>>0)+"").padStart(2,0)+":"+((e%60>>0)+"").padStart(2,0)}},watch:{enterOutTime:function(e){if(!e)return this.searchParams.first_join_at="",void(this.searchParams.last_leave_at="");this.searchParams.first_join_at=e[0],this.searchParams.last_leave_at=e[1]}},created:function(){this.storeSelectMenu(!1),this.searchParams.activityId=this.$route.params.id,this.dealSearchParam(),this.queryList()},methods:r()({},Object(n.b)("dataCenter",{storeSelectMenu:o.c}),{dealSearchParam:function(){var e=this.$route.query.type;console.log(e),"old"===e?this.searchParams.is_new=0:"new"===e?this.searchParams.is_new=1:"high"===e?this.searchParams.user_level=1:"vip"===e?this.searchParams.user_level=4:"ord"===e?this.searchParams.user_level=3:"potent"===e?this.searchParams.user_level=2:"loss"===e&&(this.searchParams.user_level=5)},goPageDetail:function(e){this.$router.push("/userManage/info/"+e)},changePage:function(e){this.searchParams.page=e,this.queryList()},exportData:function(){var e="?";for(var a in this.searchParams)e+=a+"="+this.searchParams[a]+"&";e=e.substring(0,e.length-1);var t="/api"+c.a.GET_VIEWER_LIST_EXPORT+e;window.open(encodeURI(encodeURI(t)))},queryList:function(){var e=this;return this.$get(c.a.GET_VIEWER_LIST,r()({},this.searchParams)).then(function(a){200===a.code&&(e.viewerList=a.data.list,e.total=a.data.total)})},searchEnter:function(){this.queryList()},cancelClick:function(){this.searchParams={activityId:"",keyword:"",sex:"",user_level:"",is_new:"",province:"",city:"",industry:"",first_join_at:"",last_leave_at:"",device:"",score:"",page:1,pageSize:10}}})},v=(t(836),t(837),t(2)),h=Object(v.a)(u,s,[],!1,null,"5d1403fe",null);h.options.__file="src/pages/data/viewerList.vue";a.default=h.exports}}]);
//# sourceMappingURL=49.cc7cbbfc.js.map