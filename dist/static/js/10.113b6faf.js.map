{"version":3,"sources":["webpack:///./src/pages/live-mager/css/live.scss?1ec6","webpack:///./src/pages/live-mager/warm-field.vue?2371","webpack:///./src/pages/live-mager/warm-field.vue?277d","webpack:///./src/pages/live-mager/warm-field.vue?0645","webpack:///src/pages/live-mager/warm-field.vue","webpack:///./src/pages/live-mager/warm-field.vue"],"names":["_node_modules_mini_css_extract_plugin_0_4_3_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_live_scss_vue_type_style_index_0_id_b73c8c64_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_node_modules_mini_css_extract_plugin_0_4_3_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_warm_field_vue_vue_type_style_index_1_id_b73c8c64_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","inactive-color","active-color","on","change","openSwitch","model","value","isSwitch","callback","$$v","expression","_m","title","accept","fileSize","errorMsg","uploadVideoErrorMsg","sdk","sdkParam","error","errorUploadVideo","handleClick","handleVideoClick","success","uploadVideoSuccess","label","warm","playMode","$set","defaultImg","uploadImgErrorMsg","uploadError","uploadImgSuccess","class","primary-button","disabled","isDisabled","click","saveWarm","_withStripped","live_mager_warm_fieldvue_type_script_lang_js_","name","components","VeUploadImage","ve_upload_image","VeUploadVideo","ve_upload_video","data","enabled","playCover","recordId","activityId","filename","sign","signed_at","app_id","fileName","transcode_status","sdkPlayParam","accountId","token","linkVideo","loading","percentVideo","percentImg","uploadErrorMsg","playMsg","canPass","computed","$imgHost","beforeRouteLeave","to","from","next","$messageBox","header","width","content","cancelText","confirmText","e","action","watch","newVal","warm.playMode","created","$route","params","id","initPage","goBack","methods","$router","go","prePlayVideo","$playVideo","extends_default","_this","$get","activity_service","GET_WRAM_INFO","then","res","playType","imgUrl","record","storage","list","length","GET_PAAS_SDK_INFO","$nextTick","signedAt","appId","uploadVideo","document","getElementById","checkoutParams","$toast","autoClose","position","_this2","$post","POST_SAVE_WRAM_INFO","catch","_this3","type","msg","file","_this4","submodule","$config","handlers","POST_DETAIL_SWITCH","console","log","code","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/10.113b6faf.js","sourcesContent":["import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=b73c8c64&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=b73c8c64&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./warm-field.vue?vue&type=style&index=1&id=b73c8c64&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./warm-field.vue?vue&type=style&index=1&id=b73c8c64&lang=scss&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"live-mager\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"live-title\" },\n      [\n        _c(\"span\", { staticClass: \"title\" }, [_vm._v(\"暖场设置\")]),\n        _vm._v(\" \"),\n        _c(\"el-switch\", {\n          attrs: { \"inactive-color\": \"#DEE1FF\", \"active-color\": \"#4B5AFE\" },\n          on: { change: _vm.openSwitch },\n          model: {\n            value: _vm.isSwitch,\n            callback: function($$v) {\n              _vm.isSwitch = $$v\n            },\n            expression: \"isSwitch\"\n          }\n        }),\n        _vm._v(\" \"),\n        _c(\"span\", { staticClass: \"msg-tip\" }, [\n          _vm._v(\"关闭后，直播观看页将不显示开场内容\")\n        ])\n      ],\n      1\n    ),\n    _vm._v(\" \"),\n    _c(\"div\", { staticClass: \"mager-box border-box\" }, [\n      _c(\"div\", { staticClass: \"from-box\" }, [\n        _c(\"div\", { staticClass: \"from-row\" }, [\n          _vm._m(0),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"from-content\" },\n            [\n              _c(\"ve-upload-video\", {\n                attrs: {\n                  title: \"视频仅支持mp4格式，文件大小不超过200M\",\n                  accept: \"mp4\",\n                  fileSize: 204800,\n                  errorMsg: _vm.uploadVideoErrorMsg,\n                  sdk: _vm.sdkParam\n                },\n                on: {\n                  error: _vm.errorUploadVideo,\n                  handleClick: _vm.handleVideoClick,\n                  success: _vm.uploadVideoSuccess\n                }\n              })\n            ],\n            1\n          )\n        ]),\n        _vm._v(\" \"),\n        _c(\"div\", { staticClass: \"from-row\" }, [\n          _vm._m(1),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"from-content\" },\n            [\n              _c(\n                \"el-radio\",\n                {\n                  attrs: { label: \"AUTO\" },\n                  model: {\n                    value: _vm.warm.playMode,\n                    callback: function($$v) {\n                      _vm.$set(_vm.warm, \"playMode\", $$v)\n                    },\n                    expression: \"warm.playMode\"\n                  }\n                },\n                [_vm._v(\"自动循环\\n          \")]\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"el-radio\",\n                {\n                  attrs: { label: \"ONCE\" },\n                  model: {\n                    value: _vm.warm.playMode,\n                    callback: function($$v) {\n                      _vm.$set(_vm.warm, \"playMode\", $$v)\n                    },\n                    expression: \"warm.playMode\"\n                  }\n                },\n                [_vm._v(\"单次播放\\n          \")]\n              )\n            ],\n            1\n          )\n        ]),\n        _vm._v(\" \"),\n        _c(\"div\", { staticClass: \"from-row\" }, [\n          _c(\"div\", { staticClass: \"from-title\" }, [_vm._v(\"视频封面：\")]),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"from-content\" }, [\n            _c(\n              \"div\",\n              { staticClass: \"from-content\" },\n              [\n                _c(\"ve-upload-image\", {\n                  attrs: {\n                    title:\n                      \"图片支持jpg、png、bmp格式，建议比例16:9，大小不超过2M\",\n                    accept: \"png|jpg|jpeg|bmp\",\n                    defaultImg: _vm.defaultImg,\n                    fileSize: 2048,\n                    errorMsg: _vm.uploadImgErrorMsg\n                  },\n                  on: { error: _vm.uploadError, success: _vm.uploadImgSuccess }\n                })\n              ],\n              1\n            )\n          ])\n        ])\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"bottom-btn\" }, [\n        _c(\n          \"button\",\n          {\n            class: { \"primary-button\": true, disabled: _vm.isDisabled },\n            on: { click: _vm.saveWarm }\n          },\n          [_vm._v(\"保存\\n      \")]\n        )\n      ])\n    ])\n  ])\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"暖场视频：\")\n    ])\n  },\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"播放模式：\")\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./warm-field.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./warm-field.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"live-mager\">\n    <div class=\"live-title\">\n      <span class=\"title\">暖场设置</span>\n      <el-switch v-model=\"isSwitch\"\n                 inactive-color=\"#DEE1FF\"\n                 active-color=\"#4B5AFE\" @change='openSwitch'>\n      </el-switch>\n      <span class=\"msg-tip\">关闭后，直播观看页将不显示开场内容</span>\n      <!--<button class=\"primary-button fr\" @click=\"goBack\">返回</button>-->\n    </div>\n    <div class=\"mager-box border-box\">\n      <div class=\"from-box\">\n        <div class=\"from-row\">\n          <div class=\"from-title\"><i class=\"star\">*</i>暖场视频：</div>\n          <div class=\"from-content\">\n            <ve-upload-video title=\"视频仅支持mp4格式，文件大小不超过200M\"\n                             accept=\"mp4\"\n                             :fileSize=\"204800\"\n                             :errorMsg=\"uploadVideoErrorMsg\"\n                             :sdk=\"sdkParam\"\n                             @error=\"errorUploadVideo\"\n                             @handleClick=\"handleVideoClick\"\n                             @success=\"uploadVideoSuccess\"></ve-upload-video>\n          </div>\n        </div>\n        <div class=\"from-row\">\n          <div class=\"from-title\"><i class=\"star\">*</i>播放模式：</div>\n          <div class=\"from-content\">\n            <el-radio v-model=\"warm.playMode\"\n                      label=\"AUTO\">自动循环\n            </el-radio>\n            <el-radio v-model=\"warm.playMode\"\n                      label=\"ONCE\">单次播放\n            </el-radio>\n          </div>\n        </div>\n        <div class=\"from-row\">\n          <div class=\"from-title\">视频封面：</div>\n          <div class=\"from-content\">\n            <div class=\"from-content\">\n              <ve-upload-image title=\"图片支持jpg、png、bmp格式，建议比例16:9，大小不超过2M\"\n                               accept=\"png|jpg|jpeg|bmp\"\n                               :defaultImg=\"defaultImg\"\n                               :fileSize=\"2048\"\n                               :errorMsg=\"uploadImgErrorMsg\"\n                               @error=\"uploadError\"\n                               @success=\"uploadImgSuccess\"></ve-upload-image>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"bottom-btn\">\n        <button :class=\"{'primary-button':true,disabled:isDisabled}\"\n                @click=\"saveWarm\">保存\n        </button>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\n  import VeUploadImage from 'src/components/ve-upload-image'\n  import VeUploadVideo from 'src/components/ve-upload-video'\n  import activityService from 'src/api/activity-service'\n\n  export default {\n    name: 'warm-field',\n    components: {VeUploadImage, VeUploadVideo},\n    data () {\n      return {\n        warm: {\n          enabled: 'N',\n          playMode: 'AUTO',\n          playCover: '',\n          recordId: '',\n          activityId: '',\n          filename: ''\n        },\n        sdkParam: { // sdk上传插件初始化参数\n          sign: '',\n          signed_at: '',\n          app_id: '',\n          fileName: '',\n          fileSize: '',\n          transcode_status: 0\n        },\n        sdkPlayParam: { // sdk播放器初始化参数\n          app_id: '',\n          accountId: '',\n          token: '',\n          recordId: '', // 回放视频id\n          linkVideo: '' // 外链视频\n        },\n        isSwitch: false,\n        loading: false,\n        isDisabled: false,\n        percentVideo: 0, // 上传进度\n        percentImg: 0, // 图片上传进度\n        uploadErrorMsg: '', // 上传错误信息\n        uploadImgErrorMsg: '', // 图片上传错误信息\n        uploadVideoErrorMsg: '', // 视频上传错误信息\n        playMsg: '',\n        canPass: true\n      }\n    },\n    computed: {\n      defaultImg () {\n        return this.warm.playCover ? `${this.$imgHost}/${this.warm.playCover}` : ''\n      }\n    },\n    /* 路由守卫，离开当前页面之前被调用 */\n    beforeRouteLeave (to, from, next) {\n      if (this.canPass) {\n        next(true)\n        return\n      }\n      this.$messageBox({\n        header: '提示',\n        width: '400px',\n        content: '是否放弃当前编辑？',\n        cancelText: '否',\n        confirmText: '是',\n        handleClick: (e) => {\n          if (e.action === 'confirm') {\n            next(true)\n          } else {\n            next(false)\n          }\n        }\n      })\n    },\n    watch: {\n      isSwitch (newVal) {\n        this.warm.enabled = newVal ? 'Y' : 'N'\n      },\n      'warm.playMode' () {\n        this.canPass = false\n      }\n    },\n    created () {\n      const activityId = this.$route.params.id\n      if (!activityId) {\n        this.goBack()\n        return\n      }\n      this.warm.activityId = activityId\n      this.initPage()\n    },\n    methods: {\n      goBack () {\n        this.$router.go(-1)\n      },\n      /* 播放器进行播放,预览 */\n      prePlayVideo () {\n        this.$playVideo({\n          ...this.sdkPlayParam\n        })\n      },\n      initPage () {\n        this.$get(activityService.GET_WRAM_INFO, {\n          activityId: this.$route.params.id\n        }).then((res) => {\n          /* 查询详情 */\n          if (res.data) {\n            this.warm = {\n              activityId: this.$route.params.id,\n              enabled: res.data.enabled,\n              playMode: res.data.playType || this.warm.playMode,\n              playCover: res.data.imgUrl,\n              recordId: res.data.recordId,\n              filename: res.data.filename\n            }\n            this.isSwitch = res.data.enabled === 'Y'\n            /* sdk参数赋值 */\n            this.sdkPlayParam.recordId = res.data.recordId\n            this.sdkParam.fileName = res.data.filename\n            this.sdkParam.fileSize = res.data.record ? res.data.record.storage : 0\n            this.sdkParam.transcode_status = (res.data.record && res.data.record.list.length > 0) ? res.data.record.list[0].transcode_status : 0\n          }\n        }).then(() => {\n          this.$get(activityService.GET_PAAS_SDK_INFO).then((res) => {\n            /* $nextTick保证dom被渲染之后进行paas插件初始化 */\n            this.$nextTick(() => {\n              // 初始化pass上传插件\n              this.sdkParam.sign = res.data.sign\n              this.sdkParam.signed_at = res.data.signedAt\n              this.sdkParam.app_id = res.data.appId\n              // 初始化pass播放参数\n              this.sdkPlayParam.app_id = res.data.appId\n              this.sdkPlayParam.accountId = res.data.accountId\n              this.sdkPlayParam.token = res.data.token\n            })\n          })\n        })\n        // LiveHttp.queryWarmInfoById(this.$route.params.id).then((res) => {\n        //   /* 查询详情 */\n        //   if (res.code === 200 && res.data) {\n        //     this.warm = {\n        //       activityId: this.$route.params.id,\n        //       enabled: res.data.enabled,\n        //       playMode: res.data.playType || this.warm.playMode,\n        //       playCover: res.data.imgUrl,\n        //       recordId: res.data.recordId,\n        //       filename: res.data.filename\n        //     }\n        //     this.isSwitch = res.data.enabled === 'Y'\n        //     /* sdk参数赋值 */\n        //     this.sdkPlayParam.recordId = res.data.recordId\n        //     this.sdkParam.fileName = res.data.filename\n        //     this.sdkParam.fileSize = res.data.record ? res.data.record.storage : 0\n        //     this.sdkParam.transcode_status = res.data.record.list[0].transcode_status\n        //   }\n        //   this.isSwitch = res.data.enabled === 'Y'\n        //   /* sdk参数赋值 */\n        //   this.sdkPlayParam.recordId = res.data.recordId\n        //   this.sdkParam.fileName = res.data.filename\n        //   this.sdkParam.fileSize = res.data.record ? res.data.record.storage : 0\n        //   this.sdkParam.transcode_status = res.data.record.list[0].transcode_status\n        // }).then(() => {\n        //   this.$get(activityService.GET_PAAS_SDK_INFO).then((res) => {\n        //     /* $nextTick保证dom被渲染之后进行paas插件初始化 */\n        //     this.$nextTick(() => {\n        //       // 初始化pass上传插件\n        //       this.sdkParam.sign = res.data.sign\n        //       this.sdkParam.signed_at = res.data.signedAt\n        //       this.sdkParam.app_id = res.data.appId\n        //       // 初始化pass播放参数\n        //       this.sdkPlayParam.app_id = res.data.appId\n        //       this.sdkPlayParam.accountId = res.data.accountId\n        //       this.sdkPlayParam.token = res.data.token\n        //     })\n        //   })\n        // })\n      },\n      uploadVideo () {\n        document.getElementById('upload').click()\n      },\n      checkoutParams () {\n        if (!this.warm.recordId) {\n          this.$toast({\n            header: `提示`,\n            content: '请上传暖场视频',\n            autoClose: 2000,\n            position: 'right-top'\n          })\n          return false\n        }\n        return true\n      },\n      /* 保存暖场信息 */\n      saveWarm () {\n        if (!this.checkoutParams()) return\n        this.isDisabled = true\n        this.$post(activityService.POST_SAVE_WRAM_INFO, {\n          activityId: this.warm.activityId,\n          recordId: this.warm.recordId,\n          playType: this.warm.playMode,\n          imgUrl: this.warm.playCover,\n          enabled: this.warm.enabled,\n          filename: this.warm.filename\n        }).then((res) => {\n          this.canPass = true\n          this.isDisabled = false\n          this.$toast({\n            header: `提示`,\n            content: '保存成功',\n            autoClose: 2000,\n            position: 'right-top'\n          })\n        }).catch(() => {\n          this.isDisabled = false\n        })\n        // LiveHttp.saveAndEditWarmInfo({\n        //   activityId: this.warm.activityId,\n        //   recordId: this.warm.recordId,\n        //   playType: this.warm.playMode,\n        //   imgUrl: this.warm.playCover,\n        //   enabled: this.warm.enabled,\n        //   filename: this.warm.filename\n        // }).then((res) => {\n        //   if (res.code === 200) {\n        //     this.$toast({\n        //       header: `提示`,\n        //       content: '保存成功',\n        //       autoClose: 2000,\n        //       position: 'right-top'\n        //     })\n        //   }\n        // })\n      },\n      /* 上传图片成功 */\n      uploadImgSuccess (data) {\n        this.canPass = false\n        this.warm.playCover = data.name\n      },\n      /* 上传视频成功 */\n      uploadVideoSuccess (recordId, fileName, fileSize) {\n        this.canPass = false\n        this.warm.recordId = recordId\n        this.warm.filename = fileName\n        this.sdkParam.fileName = fileName\n        this.sdkParam.fileSize = fileSize\n        this.sdkPlayParam.recordId = recordId\n      },\n      /* 预览，删除触发 */\n      handleVideoClick (e) {\n        if (e.type === 'pre-view') { // 预览\n          this.prePlayVideo()\n        } else if (e.type === 'delete') { // 删除\n          this.$messageBox({\n            header: '删除此视频',\n            width: '400px',\n            content: '您是否确定要删除此视频？',\n            cancelText: '取消',\n            confirmText: '删除',\n            type: 'error',\n            handleClick: (e) => {\n              if (e.action === 'confirm') {\n                this.canPass = false\n                this.uploadVideoErrorMsg = ''\n                this.warm.recordId = ''\n                this.warm.filename = ''\n                this.sdkPlayParam.recordId = ''\n                this.sdkParam.fileName = ''\n                this.sdkParam.fileSize = ''\n                this.sdkParam.transcode_status = 0\n              }\n            }\n          })\n        }\n      },\n      errorUploadVideo (msg, file) {\n        this.sdkParam.fileName = file.name\n        this.uploadVideoErrorMsg = msg\n      },\n      uploadError (data) {\n        this.uploadImgErrorMsg = data.msg\n        this.warm.playCover = ''\n      },\n      openSwitch (type) {\n        const data = {\n          activityId: this.$route.params.id,\n          submodule: 'WARMUP',\n          enabled: type ? 'Y' : 'N'\n        }\n        this.$config({handlers: true}).$post(activityService.POST_DETAIL_SWITCH, data).then((res) => {\n          this.$toast({\n            content: '设置成功'\n          })\n        }).catch((res) => {\n          console.log(res)\n          if (res.code === 60706) {\n            this.isSwitch = !type\n            this.$messageBox({\n              header: '提示',\n              content: res.msg,\n              autoClose: 10,\n              confirmText: '知道了'\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped src=\"./css/live.scss\">\n</style>\n<style lang=\"scss\" scoped>\n.bottom-btn {\n  text-align: center;\n  button {\n    width: 200px;\n    margin: 60px auto 50px auto;\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./warm-field.vue?vue&type=template&id=b73c8c64&scoped=true&\"\nimport script from \"./warm-field.vue?vue&type=script&lang=js&\"\nexport * from \"./warm-field.vue?vue&type=script&lang=js&\"\nimport style0 from \"./css/live.scss?vue&type=style&index=0&id=b73c8c64&lang=scss&scoped=true&\"\nimport style1 from \"./warm-field.vue?vue&type=style&index=1&id=b73c8c64&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b73c8c64\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/x.g/Documents/work/fe_management/node_modules/_vue-hot-reload-api@2.3.1@vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('b73c8c64', component.options)\n    } else {\n      api.reload('b73c8c64', component.options)\n    }\n    module.hot.accept(\"./warm-field.vue?vue&type=template&id=b73c8c64&scoped=true&\", function () {\n      api.rerender('b73c8c64', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/live-mager/warm-field.vue\"\nexport default component.exports"],"sourceRoot":""}