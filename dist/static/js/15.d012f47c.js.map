{"version":3,"sources":["webpack:///./src/pages/live-mager/email/index.vue?0f80","webpack:///src/pages/live-mager/email/index.vue","webpack:///./src/pages/live-mager/email/index.vue?42a3","webpack:///./src/pages/live-mager/email/index.vue","webpack:///./src/pages/live-mager/css/live.scss?abee","webpack:///./src/pages/live-mager/email/index.vue?5119"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","url","activeId","emailList","length","on","click","addEmail","_s","countTotal","countBalance","_e","directives","name","rawName","value","loading","expression","staticStyle","padding-top","width","data","prop","label","scopedSlots","_u","key","fn","scope","row","status","statusName","$event","stopPropagation","clickEmail","$index","handleType","info","delete","pageSize","total","changePage","_withStripped","send","edit","statusType","DRAFT","SEND","AWAIT","FAIL","live_mager_emailvue_type_script_lang_js_","components","VePagination","ve_pagination","currentPage","sendShow","currentEmailIdx","activityId","emailInviteId","title","content","desc","planTime","sendTime","senderName","sendCount","computed","currentEmail","created","queryId","$route","params","id","$router","go","eventBus","$emit","getLimit","queryEmailListById","methods","extends_default","Object","vuex_esm","storeEmailInfo","mutation_types","_this","$get","activity_service","GET_EMAIL_LIST","page","then","res","list","map","dataItem","parseInt","idx","type","_this2","queryInfoEmail","editEmail","$messageBox","header","cancelText","confirmText","handleClick","e","action","delEmail","email","push","sendEmail","$post","POST_SEND_EMAIL_INFO","console","log","handleClickSendEmail","_this3","emaiId","POST_DEL_EMAIL","_this4","GET_SEND_LIMIT","balance","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_live_scss_vue_type_style_index_0_id_6533cfb3_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_1_id_6533cfb3_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/15.d012f47c.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"live-mager email-box\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"live-title\" },\n      [\n        _c(\"span\", { staticClass: \"title\" }, [_vm._v(\"邮件邀约\")]),\n        _vm._v(\" \"),\n        _c(\"com-back\", {\n          attrs: { url: \"/liveMager/detail/\" + this.activeId }\n        }),\n        _vm._v(\" \"),\n        _vm.emailList.length\n          ? [\n              _c(\n                \"button\",\n                {\n                  staticClass: \"default-button fr create-button\",\n                  on: { click: _vm.addEmail }\n                },\n                [_vm._v(\"新建邮件\")]\n              ),\n              _vm._v(\" \"),\n              _c(\"span\", { staticClass: \"send-box fr\" }, [\n                _vm._v(\n                  \"发送限额：\" +\n                    _vm._s(_vm.countTotal - _vm.countBalance) +\n                    \"/\" +\n                    _vm._s(_vm.countTotal)\n                )\n              ])\n            ]\n          : _vm._e()\n      ],\n      2\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      {\n        directives: [\n          {\n            name: \"ComLoading\",\n            rawName: \"v-ComLoading\",\n            value: _vm.loading,\n            expression: \"loading\"\n          }\n        ],\n        staticClass: \"email-table-box\"\n      },\n      [\n        _c(\"div\", { staticClass: \"tip-box\" }, [\n          _vm._v(\n            \"\\n      通过邮件邀约，定制邀约邮件，邀请特定客户群参加直播活动\\n    \"\n          )\n        ]),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          {\n            staticClass: \"table-list-box\",\n            staticStyle: { \"padding-top\": \"30px\" }\n          },\n          [\n            _vm.emailList.length\n              ? [\n                  _c(\n                    \"el-table\",\n                    {\n                      staticStyle: { width: \"100%\" },\n                      attrs: { data: _vm.emailList }\n                    },\n                    [\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"title\", label: \"邮件标题\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"sendTime\", label: \"发送时间\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"sendCount\", label: \"发送数量\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"statusName\", label: \"状态\" },\n                        scopedSlots: _vm._u([\n                          {\n                            key: \"default\",\n                            fn: function(scope) {\n                              return [\n                                scope.row.status == \"DRAFT\"\n                                  ? _c(\"span\", { staticClass: \"cg-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"SEND\"\n                                  ? _c(\"span\", { staticClass: \"fs-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"AWAIT\"\n                                  ? _c(\"span\", { staticClass: \"dd-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"FAIL\"\n                                  ? _c(\"span\", { staticClass: \"del-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e()\n                              ]\n                            }\n                          }\n                        ])\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { label: \"操作\" },\n                        scopedSlots: _vm._u([\n                          {\n                            key: \"default\",\n                            fn: function(scope) {\n                              return [\n                                _c(\"div\", { staticClass: \"table-handler\" }, [\n                                  _c(\n                                    \"span\",\n                                    {\n                                      on: {\n                                        click: function($event) {\n                                          $event.stopPropagation()\n                                          _vm.clickEmail(\n                                            scope.$index,\n                                            _vm.handleType.info\n                                          )\n                                        }\n                                      }\n                                    },\n                                    [_vm._v(\"查看\")]\n                                  ),\n                                  _vm._v(\" \"),\n                                  _vm.emailList[scope.$index].status !== \"SEND\"\n                                    ? _c(\n                                        \"span\",\n                                        {\n                                          on: {\n                                            click: function($event) {\n                                              $event.stopPropagation()\n                                              _vm.clickEmail(\n                                                scope.$index,\n                                                _vm.handleType.delete\n                                              )\n                                            }\n                                          }\n                                        },\n                                        [_vm._v(\"删除\")]\n                                      )\n                                    : _vm._e()\n                                ])\n                              ]\n                            }\n                          }\n                        ])\n                      })\n                    ],\n                    1\n                  )\n                ]\n              : [\n                  _c(\n                    \"div\",\n                    { staticClass: \"empty\" },\n                    [\n                      _c(\"div\", { staticClass: \"img\" }),\n                      _vm._v(\" \"),\n                      _c(\"div\", { staticClass: \"txt\" }, [\n                        _vm._v(\"您还没有添加邮件邀约，快去添加吧\")\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\n                        \"el-button\",\n                        {\n                          staticClass: \"primary-button\",\n                          on: { click: _vm.addEmail }\n                        },\n                        [_vm._v(\"新建邮件\")]\n                      )\n                    ],\n                    1\n                  )\n                ]\n          ],\n          2\n        ),\n        _vm._v(\" \"),\n        _vm.emailList.length > _vm.pageSize\n          ? _c(\"div\", { staticClass: \"pagination-box\" }, [\n              _c(\n                \"div\",\n                { staticClass: \"page-pagination\" },\n                [\n                  _c(\"ve-pagination\", {\n                    attrs: { total: _vm.total, pageSize: _vm.pageSize },\n                    on: { changePage: _vm.changePage }\n                  })\n                ],\n                1\n              )\n            ])\n          : _vm._e()\n      ]\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"live-mager email-box\">\n    <div class=\"live-title\">\n      <span class=\"title\">邮件邀约</span>\n      <com-back  :url=\"`/liveMager/detail/${this.activeId}`\"></com-back>\n      <template v-if='emailList.length'>\n        <button class=\"default-button fr create-button\"\n                @click=\"addEmail\">新建邮件</button>\n        <span class=\"send-box fr\">发送限额：{{countTotal - countBalance}}/{{countTotal}}</span>\n      </template>\n    </div>\n    <div class=\"email-table-box\"\n         v-ComLoading=\"loading\">\n      <div class=\"tip-box\">\n        通过邮件邀约，定制邀约邮件，邀请特定客户群参加直播活动\n      </div>\n      <div class=\"table-list-box\"\n           style=\"padding-top: 30px;\">\n           <template v-if='emailList.length'>\n            <el-table :data=\"emailList\"\n                      style=\"width: 100%\">\n              <el-table-column prop=\"title\"\n                              label=\"邮件标题\">\n              </el-table-column>\n              <el-table-column prop=\"sendTime\"\n                              label=\"发送时间\">\n              </el-table-column>\n              <el-table-column prop=\"sendCount\"\n                              label=\"发送数量\">\n              </el-table-column>\n              <el-table-column prop=\"statusName\"\n                              label=\"状态\">\n                <template slot-scope=\"scope\">\n                  <span v-if=\"scope.row.status=='DRAFT'\"\n                        class=\"cg-status\">{{scope.row.statusName}}</span>\n                  <span v-if=\"scope.row.status=='SEND'\"\n                        class=\"fs-status\">{{scope.row.statusName}}</span>\n                  <span v-if=\"scope.row.status=='AWAIT'\"\n                        class=\"dd-status\">{{scope.row.statusName}}</span>\n                  <span v-if=\"scope.row.status=='FAIL'\"\n                        class=\"del-status\">{{scope.row.statusName}}</span>\n                  <!--DRAFT: '草稿',-->\n                  <!--SEND: '已发送',-->\n                  <!--AWAIT: '等待发送'-->\n                  <!--v-if=\"scope.row.status=='DRAFT'\"-->\n                </template>\n              </el-table-column>\n              <el-table-column label=\"操作\">\n                <template slot-scope=\"scope\">\n                  <!--<el-button-->\n                  <!--type=\"text\" size=\"small\"-->\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.info)\">查看</el-button>-->\n                  <!--<el-button-->\n                  <!--type=\"text\" size=\"small\"-->\n                  <!--v-if=\"emailList[scope.$index].status==='DRAFT'\"-->\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.send)\" disabled>立刻发送</el-button>-->\n                  <!--<el-button-->\n                  <!--type=\"text\" size=\"small\"-->\n                  <!--v-else-if=\"emailList[scope.$index].status!=='SEND'\"-->\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.send)\">立刻发送</el-button>-->\n                  <!--<el-button-->\n                  <!--type=\"text\" size=\"small\"-->\n                  <!--v-if=\"emailList[scope.$index].status!=='SEND'\"-->\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.edit)\">编辑</el-button>-->\n                  <!--<el-button-->\n                  <!--type=\"text\" size=\"small\"-->\n                  <!--v-if=\"emailList[scope.$index].status!=='SEND'\"-->\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.delete)\">删除</el-button>-->\n                  <div class=\"table-handler\">\n                    <span @click.stop=\"clickEmail(scope.$index,handleType.info)\">查看</span>\n                    <span v-if=\"emailList[scope.$index].status!=='SEND'\"\n                          @click.stop=\"clickEmail(scope.$index,handleType.delete)\">删除</span>\n                  </div>\n                </template>\n              </el-table-column>\n            </el-table>\n           </template>\n           <template v-else>\n            <div class=\"empty\">\n              <div class=\"img\"></div>\n              <div class=\"txt\">您还没有添加邮件邀约，快去添加吧</div>\n              <el-button class='primary-button' @click=\"addEmail\">新建邮件</el-button>\n            </div>\n           </template>\n      </div>\n      <div class=\"pagination-box\" v-if='emailList.length > pageSize'>\n        <div class=\"page-pagination\">\n          <ve-pagination :total=\"total\"\n                         :pageSize=\"pageSize\"\n                         @changePage=\"changePage\" />\n        </div>\n      </div>\n    </div>\n    <!--<message-box-->\n    <!--v-if=\"sendShow\"-->\n    <!--width=\"500px\"-->\n    <!--header=\"邮件推送确认\"-->\n    <!--confirmText='确认发送'-->\n    <!--@handleClick=\"handleClickSendEmail\">-->\n    <!--<div class=\"email-info\">-->\n    <!--<div class=\"email-info-row\">-->\n    <!--<span>邮件标题：</span>-->\n    <!--<span>{{currentEmail.title}}</span>-->\n    <!--</div>-->\n    <!--<div class=\"email-info-row\">-->\n    <!--<span>发件人：</span>-->\n    <!--<span>*****</span>-->\n    <!--</div>-->\n    <!--<div class=\"email-info-row\">-->\n    <!--<span>收件人：</span>-->\n    <!--<span>666</span>-->\n    <!--</div>-->\n    <!--<div class=\"email-info-row\">-->\n    <!--<span>邮件摘要：</span>-->\n    <!--<span>***********************************************************</span>-->\n    <!--</div>-->\n    <!--</div>-->\n    <!--</message-box>-->\n  </div>\n</template>\n\n<script>\nimport activityService from 'src/api/activity-service'\nimport VePagination from 'src/components/ve-pagination'\nimport { mapMutations } from 'vuex'\nimport * as types from '../../../store/mutation-types'\nimport EventBus from 'src/utils/eventBus'\n\nconst handleType = {\n  info: 'queryInfoEmail',\n  send: 'sendEmail',\n  edit: 'editEmail',\n  delete: 'deleteEmail'\n}\nconst statusType = {\n  DRAFT: '草稿',\n  SEND: '已发送',\n  AWAIT: '等待发送',\n  FAIL: '发送失败'\n}\nexport default {\n  name: 'index',\n  components: { VePagination },\n  data () {\n    return {\n      pageSize: 10,\n      total: 0,\n      currentPage: 1,\n      activeId: '', // 活动id\n      sendShow: false,\n      currentEmailIdx: '',\n      handleType: handleType,\n      loading: false,\n      emailList: [\n        {\n          activityId: 0,\n          emailInviteId: 0,\n          title: '',\n          content: '',\n          desc: '',\n          planTime: '',\n          sendTime: '',\n          senderName: '',\n          sendCount: 0,\n          status: '',\n          statusName: ''\n        }\n      ],\n      countTotal: 0,\n      countBalance: 0\n    }\n  },\n  computed: {\n    currentEmail () {\n      return this.emailList[this.currentEmailIdx]\n    }\n  },\n  created () {\n    const queryId = this.$route.params.id\n    if (!queryId) {\n      this.$router.go(-1)\n    }\n    this.activeId = queryId\n    EventBus.$emit('breads', [{\n      title: '活动管理'\n    }, {\n      title: '活动列表',\n      url: '/liveMager/list'\n    }, {\n      title: '活动详情',\n      url: `/liveMager/detail/${this.activeId}`\n    }, {\n      title: '邮件邀约'\n    }])\n    this.getLimit()\n    this.queryEmailListById()\n  },\n  methods: {\n    ...mapMutations('liveMager', {\n      storeEmailInfo: types.EMAIL_INFO\n    }),\n    changePage (currentPage) {\n      this.currentPage = currentPage\n      this.queryEmailListById()\n    },\n    queryEmailListById () {\n      // this.loading = true\n      this.$get(activityService.GET_EMAIL_LIST, {\n        activityId: this.activeId,\n        pageSize: this.pageSize,\n        page: this.currentPage\n      }).then((res) => {\n        res.data.list.map((dataItem) => {\n          dataItem.statusName = statusType[dataItem.status]\n          if (dataItem.status === 'SEND' && parseInt(dataItem.sendCount) === 0) {\n            dataItem.statusName = '发送中...'\n          }\n          dataItem.sendTime = dataItem.sendTime || '--'\n          dataItem.title = dataItem.title || '--'\n          return dataItem\n        })\n        this.total = res.data.total\n        this.emailList = res.data.list\n      })\n    },\n    clickEmail (idx, type) {\n      this.currentEmailIdx = idx\n      if (type === this.handleType.info) { // 查看\n        this.queryInfoEmail()\n      } else if (type === this.handleType.edit) { // 编辑\n        this.editEmail()\n      } else if (type === this.handleType.send) { // 立即发送\n        this.sendShow = true\n      } else if (type === this.handleType.delete) { // 删除\n        this.$messageBox({\n          header: '',\n          content: '删除邮件后，邮件内容将无法找回，确认删除？',\n          cancelText: '取消',\n          confirmText: '删除',\n          width: '400px',\n          handleClick: (e) => {\n            if (e.action === 'confirm') {\n              this.delEmail()\n            }\n          }\n        })\n      }\n    },\n    queryInfoEmail () {\n      const email = this.emailList[this.currentEmailIdx]\n      // this.storeEmailInfo(email)\n      this.$router.push(`/liveMager/emailInfo/${this.activeId}?email=${email.emailInviteId}`)\n    },\n    sendEmail () {\n      this.$post(activityService.POST_SEND_EMAIL_INFO, {\n        emailInviteId: this.emailList[this.currentEmailIdx].emailInviteId\n      }).then((res) => {\n        console.log('邮件发送成功')\n        console.log(res)\n      })\n      // LiveHttp.sendEmailInfo({\n      //   emailInviteId: this.emailList[this.currentEmailIdx].emailInviteId\n      // }).then((res) => {\n      //   console.log('邮件发送成功')\n      //   console.log(res)\n      // }).catch((e) => {\n      //   console.log('邮件发送失败')\n      //   console.log(e)\n      // })\n    },\n    handleClickSendEmail (e) {\n      this.sendShow = false\n      if (e.action === 'confirm') {\n        this.sendEmail()\n      }\n    },\n    delEmail () {\n      const emaiId = this.emailList[this.currentEmailIdx].emailInviteId\n      this.$post(activityService.POST_DEL_EMAIL, {\n        emailInviteId: emaiId\n      }).then((res) => {\n        this.queryEmailListById()\n      })\n      // LiveHttp.deleteEmailById(emaiId).then((res) => {\n      //   if (res.code === 200) {\n      //     this.queryEmailListById()\n      //   }\n      // }).catch((e) => {\n      //   console.log('删除邮件失败')\n      //   console.log(e)\n      // })\n    },\n    editEmail () {\n      const email = this.emailList[this.currentEmailIdx]\n      this.storeEmailInfo(email)\n      this.$router.push(`/liveMager/emailEdit/${this.activeId}?email=${email.emailInviteId}`)\n    },\n    addEmail () {\n      this.$router.push(`/liveMager/emailEditOne/${this.activeId}`)\n    },\n    getLimit () {\n      this.$get(activityService.GET_SEND_LIMIT, {\n        activityId: this.activeId,\n        type: 'EMAIL'\n      }).then((res) => {\n        console.log(res)\n        this.countBalance = res.data.balance\n        this.countTotal = res.data.total\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped src=\"../css/live.scss\"></style>\n<style lang=\"scss\" scoped>\n@import '~assets/css/mixin.scss';\n.email-table-box {\n  font-size: 14px;\n}\n.live-title {\n  position: relative;\n  .create-button {\n    height: 30px;\n    line-height: 29px;\n    margin-right: 80px;\n    margin-top: 17px;\n    padding: 0 20px;\n    /*<!--position: relative;-->*/\n    /*<!--top: 50%;-->*/\n    /*<!--right: 110px;-->*/\n    /*<!--transform: translateY(-50%);-->*/\n  }\n}\n.send-box {\n  display: inline-block;\n  color: #888;\n  font-size: 14px;\n  line-height: 67px;\n  margin-right: 10px;\n}\n\n.cg-status {\n  color: #1bcab7;\n}\n\n.fs-status {\n  color: #4b5afe;\n}\n\n.dd-status {\n  color: #ff8b0e;\n}\n\n.del-status {\n  color: #fc5659;\n}\n\n.email-box {\n  // margin-top: 20px;\n}\n.table-list-box {\n  .empty {\n    text-align: center;\n    margin: 100px 0 0;\n    .txt {\n      padding-top: 40px;\n      font-size: 14px;\n      color: $color-font-sub;\n    }\n    .img {\n      width: 150px;\n      height: 150px;\n      margin: 0 auto;\n      background: url('~assets/image/email_empty.png') no-repeat center;\n      background-size: contain;\n    }\n    .el-button {\n      padding: 0;\n      width: 220px;\n      height: 40px;\n      text-align: center;\n      line-height: 40px;\n      margin-top: 30px;\n    }\n  }\n}\n</style>\n\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6533cfb3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"../css/live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6533cfb3\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/chenqi/Desktop/Wswork/fe_management/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6533cfb3', component.options)\n    } else {\n      api.reload('6533cfb3', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=6533cfb3&scoped=true&\", function () {\n      api.rerender('6533cfb3', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/live-mager/email/index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\""],"sourceRoot":""}