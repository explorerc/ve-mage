{"version":3,"sources":["webpack:///./src/pages/live-mager/warm-field.vue?ef72","webpack:///./src/pages/live-mager/warm-field.vue?1b45","webpack:///src/pages/live-mager/warm-field.vue","webpack:///./src/pages/live-mager/warm-field.vue","webpack:///./src/pages/live-mager/css/live.scss?4a2a","webpack:///./src/pages/live-mager/warm-field.vue?d5e4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","inactive-color","width","active-color","on","change","openSwitch","model","value","isSwitch","callback","$$v","expression","_m","title","accept","fileSize","errorMsg","uploadVideoErrorMsg","sdk","sdkParam","error","errorUploadVideo","progress","uploadProgress","handleClick","handleVideoClick","success","uploadVideoSuccess","label","warm","playMode","$set","defaultImg","uploadImgErrorMsg","uploadError","uploadImgSuccess","class","primary-button","disabled","isDisabled","click","saveWarm","_withStripped","live_mager_warm_fieldvue_type_script_lang_js_","name","components","VeUploadImage","ve_upload_image","VeUploadVideo","ve_upload_video","data","enabled","playCover","recordId","activityId","filename","sign","signed_at","app_id","fileName","transcode_status","sdkPlayParam","accountId","token","linkVideo","isSwitchDisabled","loading","percentVideo","percentImg","uploadErrorMsg","playMsg","canPass","computed","$imgHost","beforeRouteLeave","to","from","next","$messageBox","header","content","cancelText","confirmText","e","action","watch","newVal","warm.playMode","created","$route","params","id","eventBus","$emit","url","initPage","goBack","methods","$router","go","prePlayVideo","$playVideo","extends_default","_this","$get","activity_service","GET_WRAM_INFO","then","res","playType","imgUrl","record","list","length","GET_PAAS_SDK_INFO","$nextTick","signedAt","appId","uploadVideo","document","getElementById","checkoutParams","_this2","$toast","position","st","setTimeout","clearTimeout","_st","_this3","$post","POST_SAVE_WRAM_INFO","parseInt","push","catch","_this4","type","msg","file","_this5","submodule","$config","handlers","POST_DETAIL_SWITCH","code","autoClose","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_live_scss_vue_type_style_index_0_id_b73c8c64_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_warm_field_vue_vue_type_style_index_1_id_b73c8c64_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/10.e8e2eebe.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"live-mager\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"live-title\" },\n      [\n        _c(\"span\", { staticClass: \"title\" }, [_vm._v(\"暖场设置\")]),\n        _vm._v(\" \"),\n        _c(\"el-switch\", {\n          attrs: {\n            \"inactive-color\": \"#DEE1FF\",\n            width: 32,\n            \"active-color\": \"#FFD021\"\n          },\n          on: { change: _vm.openSwitch },\n          model: {\n            value: _vm.isSwitch,\n            callback: function($$v) {\n              _vm.isSwitch = $$v\n            },\n            expression: \"isSwitch\"\n          }\n        }),\n        _vm._v(\" \"),\n        _c(\"com-back\")\n      ],\n      1\n    ),\n    _vm._v(\" \"),\n    _c(\"div\", { staticClass: \"mager-box border-box\" }, [\n      _c(\"div\", { staticClass: \"from-box\" }, [\n        _c(\"div\", { staticClass: \"from-row\" }, [\n          _vm._m(0),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"from-content\" },\n            [\n              _c(\"ve-upload-video\", {\n                attrs: {\n                  title: \"视频仅支持mp4格式，文件大小不超过200M\",\n                  accept: \"mp4\",\n                  fileSize: 204800,\n                  errorMsg: _vm.uploadVideoErrorMsg,\n                  sdk: _vm.sdkParam\n                },\n                on: {\n                  error: _vm.errorUploadVideo,\n                  progress: _vm.uploadProgress,\n                  handleClick: _vm.handleVideoClick,\n                  success: _vm.uploadVideoSuccess\n                }\n              })\n            ],\n            1\n          )\n        ]),\n        _vm._v(\" \"),\n        _c(\"div\", { staticClass: \"from-row\" }, [\n          _vm._m(1),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"from-content\" },\n            [\n              _c(\n                \"el-radio\",\n                {\n                  attrs: { label: \"AUTO\" },\n                  model: {\n                    value: _vm.warm.playMode,\n                    callback: function($$v) {\n                      _vm.$set(_vm.warm, \"playMode\", $$v)\n                    },\n                    expression: \"warm.playMode\"\n                  }\n                },\n                [_vm._v(\"自动循环\\n          \")]\n              ),\n              _vm._v(\" \"),\n              _c(\n                \"el-radio\",\n                {\n                  attrs: { label: \"ONCE\" },\n                  model: {\n                    value: _vm.warm.playMode,\n                    callback: function($$v) {\n                      _vm.$set(_vm.warm, \"playMode\", $$v)\n                    },\n                    expression: \"warm.playMode\"\n                  }\n                },\n                [_vm._v(\"单次播放\\n          \")]\n              )\n            ],\n            1\n          )\n        ]),\n        _vm._v(\" \"),\n        _c(\"div\", { staticClass: \"from-row\" }, [\n          _c(\"div\", { staticClass: \"from-title\" }, [_vm._v(\"视频封面：\")]),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"from-content\" }, [\n            _c(\n              \"div\",\n              { staticClass: \"from-content\" },\n              [\n                _c(\"ve-upload-image\", {\n                  attrs: {\n                    title:\n                      \"图片支持jpg、png、bmp格式，建议比例16:9，大小不超过2M\",\n                    accept: \"png|jpg|jpeg|bmp\",\n                    defaultImg: _vm.defaultImg,\n                    fileSize: 2048,\n                    errorMsg: _vm.uploadImgErrorMsg\n                  },\n                  on: { error: _vm.uploadError, success: _vm.uploadImgSuccess }\n                })\n              ],\n              1\n            )\n          ])\n        ])\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"bottom-btn\" }, [\n        _c(\n          \"button\",\n          {\n            class: { \"primary-button\": true, disabled: _vm.isDisabled },\n            on: { click: _vm.saveWarm }\n          },\n          [_vm._v(\"保存\\n      \")]\n        )\n      ])\n    ])\n  ])\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"暖场视频：\")\n    ])\n  },\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"播放模式：\")\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./warm-field.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./warm-field.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"live-mager\">\n    <div class=\"live-title\">\n      <span class=\"title\">暖场设置</span>\n      <el-switch v-model=\"isSwitch\"\n        inactive-color=\"#DEE1FF\"\n        :width=\"32\"\n        active-color=\"#FFD021\" @change='openSwitch'>\n      </el-switch>\n      <com-back></com-back>\n      <!--<span class=\"msg-tip\">关闭后，直播观看页将不显示开场内容</span>-->\n      <!--<button class=\"primary-button fr\" @click=\"goBack\">返回</button>-->\n    </div>\n    <div class=\"mager-box border-box\">\n      <div class=\"from-box\">\n        <div class=\"from-row\">\n          <div class=\"from-title\"><i class=\"star\">*</i>暖场视频：</div>\n          <div class=\"from-content\">\n            <ve-upload-video title=\"视频仅支持mp4格式，文件大小不超过200M\"\n                             accept=\"mp4\"\n                             :fileSize=\"204800\"\n                             :errorMsg=\"uploadVideoErrorMsg\"\n                             :sdk=\"sdkParam\"\n                             @error=\"errorUploadVideo\"\n                             @progress=\"uploadProgress\"\n                             @handleClick=\"handleVideoClick\"\n                             @success=\"uploadVideoSuccess\"></ve-upload-video>\n          </div>\n        </div>\n        <div class=\"from-row\">\n          <div class=\"from-title\"><i class=\"star\">*</i>播放模式：</div>\n          <div class=\"from-content\">\n            <el-radio v-model=\"warm.playMode\"\n                      label=\"AUTO\">自动循环\n            </el-radio>\n            <el-radio v-model=\"warm.playMode\"\n                      label=\"ONCE\">单次播放\n            </el-radio>\n          </div>\n        </div>\n        <div class=\"from-row\">\n          <div class=\"from-title\">视频封面：</div>\n          <div class=\"from-content\">\n            <div class=\"from-content\">\n              <ve-upload-image title=\"图片支持jpg、png、bmp格式，建议比例16:9，大小不超过2M\"\n                               accept=\"png|jpg|jpeg|bmp\"\n                               :defaultImg=\"defaultImg\"\n                               :fileSize=\"2048\"\n                               :errorMsg=\"uploadImgErrorMsg\"\n                               @error=\"uploadError\"\n                               @success=\"uploadImgSuccess\"></ve-upload-image>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"bottom-btn\">\n        <button :class=\"{'primary-button':true,disabled:isDisabled}\"\n                @click=\"saveWarm\">保存\n        </button>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport VeUploadImage from 'src/components/ve-upload-image'\nimport VeUploadVideo from 'src/components/ve-upload-video'\nimport activityService from 'src/api/activity-service'\nimport EventBus from 'src/utils/eventBus'\n\nexport default {\n  name: 'warm-field',\n  components: { VeUploadImage, VeUploadVideo },\n  data () {\n    return {\n      warm: {\n        enabled: 'N',\n        playMode: 'AUTO',\n        playCover: '',\n        recordId: '',\n        activityId: '',\n        filename: '',\n        fileSize: ''\n      },\n      sdkParam: { // sdk上传插件初始化参数\n        sign: '',\n        signed_at: '',\n        app_id: '',\n        fileName: '',\n        fileSize: '',\n        transcode_status: 0\n      },\n      sdkPlayParam: { // sdk播放器初始化参数\n        app_id: '',\n        accountId: '',\n        token: '',\n        recordId: '', // 回放视频id\n        linkVideo: '' // 外链视频\n      },\n      isSwitch: false,\n      isSwitchDisabled: false,\n      loading: false,\n      isDisabled: false,\n      percentVideo: 0, // 上传进度\n      percentImg: 0, // 图片上传进度\n      uploadErrorMsg: '', // 上传错误信息\n      uploadImgErrorMsg: '', // 图片上传错误信息\n      uploadVideoErrorMsg: '', // 视频上传错误信息\n      playMsg: '',\n      canPass: true,\n      progress: 0\n    }\n  },\n  computed: {\n    defaultImg () {\n      return this.warm.playCover ? `${this.$imgHost}/${this.warm.playCover}` : ''\n    }\n  },\n  /* 路由守卫，离开当前页面之前被调用 */\n  beforeRouteLeave (to, from, next) {\n    if (this.canPass) {\n      next(true)\n      return\n    }\n    this.$messageBox({\n      header: '提示',\n      width: '400px',\n      content: '是否放弃当前编辑？',\n      cancelText: '否',\n      confirmText: '是',\n      handleClick: (e) => {\n        if (e.action === 'confirm') {\n          next(true)\n        } else {\n          next(false)\n        }\n      }\n    })\n  },\n  watch: {\n    isSwitch (newVal) {\n      this.warm.enabled = newVal ? 'Y' : 'N'\n    },\n    'warm.playMode' () {\n      this.canPass = false\n    }\n  },\n  created () {\n    const activityId = this.$route.params.id\n    EventBus.$emit('breads', [{\n      title: '活动管理'\n    }, {\n      title: '活动列表',\n      url: '/liveMager/list'\n    }, {\n      title: '活动详情',\n      url: `/liveMager/detail/${activityId}`\n    }, {\n      title: '暖场设置'\n    }])\n    if (!activityId) {\n      this.goBack()\n      return\n    }\n    this.warm.activityId = activityId\n    this.initPage()\n  },\n  methods: {\n    goBack () {\n      this.$router.go(-1)\n    },\n    /* 播放器进行播放,预览 */\n    prePlayVideo () {\n      this.$playVideo({\n        ...this.sdkPlayParam\n      })\n    },\n    initPage () {\n      this.$get(activityService.GET_WRAM_INFO, {\n        activityId: this.$route.params.id\n      }).then((res) => {\n        /* 查询详情 */\n        if (res.data) {\n          this.warm = {\n            activityId: this.$route.params.id,\n            enabled: res.data.enabled,\n            playMode: res.data.playType || this.warm.playMode,\n            playCover: res.data.imgUrl,\n            recordId: res.data.recordId,\n            filename: res.data.filename,\n            fileSize: res.data.fileSize || 0\n          }\n          this.isSwitch = res.data.enabled === 'Y'\n          /* sdk参数赋值 */\n          this.sdkPlayParam.recordId = res.data.recordId\n          this.sdkParam.fileName = res.data.filename\n          this.sdkParam.fileSize = res.data.fileSize || 0\n          this.sdkParam.transcode_status = (res.data.record && res.data.record.list.length > 0) ? res.data.record.list[0].transcode_status : 0\n        }\n      }).then(() => {\n        this.$get(activityService.GET_PAAS_SDK_INFO).then((res) => {\n          /* $nextTick保证dom被渲染之后进行paas插件初始化 */\n          this.$nextTick(() => {\n            // 初始化pass上传插件\n            this.sdkParam.sign = res.data.sign\n            this.sdkParam.signed_at = res.data.signedAt\n            this.sdkParam.app_id = res.data.appId\n            // 初始化pass播放参数\n            this.sdkPlayParam.app_id = res.data.appId\n            this.sdkPlayParam.accountId = res.data.accountId\n            this.sdkPlayParam.token = res.data.token\n          })\n        })\n      })\n      // LiveHttp.queryWarmInfoById(this.$route.params.id).then((res) => {\n      //   /* 查询详情 */\n      //   if (res.code === 200 && res.data) {\n      //     this.warm = {\n      //       activityId: this.$route.params.id,\n      //       enabled: res.data.enabled,\n      //       playMode: res.data.playType || this.warm.playMode,\n      //       playCover: res.data.imgUrl,\n      //       recordId: res.data.recordId,\n      //       filename: res.data.filename\n      //     }\n      //     this.isSwitch = res.data.enabled === 'Y'\n      //     /* sdk参数赋值 */\n      //     this.sdkPlayParam.recordId = res.data.recordId\n      //     this.sdkParam.fileName = res.data.filename\n      //     this.sdkParam.fileSize = res.data.record ? res.data.record.storage : 0\n      //     this.sdkParam.transcode_status = res.data.record.list[0].transcode_status\n      //   }\n      //   this.isSwitch = res.data.enabled === 'Y'\n      //   /* sdk参数赋值 */\n      //   this.sdkPlayParam.recordId = res.data.recordId\n      //   this.sdkParam.fileName = res.data.filename\n      //   this.sdkParam.fileSize = res.data.record ? res.data.record.storage : 0\n      //   this.sdkParam.transcode_status = res.data.record.list[0].transcode_status\n      // }).then(() => {\n      //   this.$get(activityService.GET_PAAS_SDK_INFO).then((res) => {\n      //     /* $nextTick保证dom被渲染之后进行paas插件初始化 */\n      //     this.$nextTick(() => {\n      //       // 初始化pass上传插件\n      //       this.sdkParam.sign = res.data.sign\n      //       this.sdkParam.signed_at = res.data.signedAt\n      //       this.sdkParam.app_id = res.data.appId\n      //       // 初始化pass播放参数\n      //       this.sdkPlayParam.app_id = res.data.appId\n      //       this.sdkPlayParam.accountId = res.data.accountId\n      //       this.sdkPlayParam.token = res.data.token\n      //     })\n      //   })\n      // })\n    },\n    uploadProgress (progress) {\n      this.progress = progress\n    },\n    uploadVideo () {\n      document.getElementById('upload').click()\n    },\n    checkoutParams () {\n      if (this.progress !== 0 && this.progress !== 100) {\n        this.$toast({\n          content: '请等待视频上传完成后保存',\n          position: 'center'\n        })\n        let st = setTimeout(() => {\n          clearTimeout(st)\n          this.isDisabled = false\n        }, 3000)\n        return false\n      }\n      if (!this.warm.recordId) {\n        this.$toast({\n          content: '请上传暖场视频',\n          position: 'center'\n        })\n        let st = setTimeout(() => {\n          clearTimeout(st)\n          this.isDisabled = false\n        }, 3000)\n        return false\n      }\n      return true\n    },\n    /* 保存暖场信息 */\n    saveWarm () {\n      this.isDisabled = true\n      if (!this.checkoutParams()) return\n      this.$post(activityService.POST_SAVE_WRAM_INFO, {\n        activityId: this.warm.activityId,\n        recordId: this.warm.recordId,\n        playType: this.warm.playMode,\n        imgUrl: this.warm.playCover,\n        enabled: this.warm.enabled,\n        filename: this.warm.filename,\n        fileSize: parseInt(this.warm.fileSize)\n      }).then((res) => {\n        this.canPass = true\n        // this.$toast({\n        //   content: '保存成功',\n        //   position: 'center'\n        // })\n        // let st = setTimeout(() => {\n        //   clearTimeout(st)\n        //   this.isDisabled = false\n        // }, 3000)\n        this.$router.push(`/liveMager/detail/${this.$route.params.id}`)\n      }).catch(() => {\n        this.isDisabled = false\n      })\n      // LiveHttp.saveAndEditWarmInfo({\n      //   activityId: this.warm.activityId,\n      //   recordId: this.warm.recordId,\n      //   playType: this.warm.playMode,\n      //   imgUrl: this.warm.playCover,\n      //   enabled: this.warm.enabled,\n      //   filename: this.warm.filename\n      // }).then((res) => {\n      //   if (res.code === 200) {\n      //     this.$toast({\n      //       header: `提示`,\n      //       content: '保存成功',\n      //       autoClose: 2000,\n      //       position: 'right-top'\n      //     })\n      //   }\n      // })\n    },\n    /* 上传图片成功 */\n    uploadImgSuccess (data) {\n      this.canPass = false\n      this.warm.playCover = data.name\n    },\n    /* 上传视频成功 */\n    uploadVideoSuccess (recordId, fileName, fileSize) {\n      this.canPass = false\n      this.warm.recordId = recordId\n      this.warm.filename = fileName\n      this.warm.fileSize = fileSize\n      this.sdkParam.fileName = fileName\n      this.sdkParam.fileSize = fileSize\n      this.sdkPlayParam.recordId = recordId\n    },\n    /* 预览，删除触发 */\n    handleVideoClick (e) {\n      if (e.type === 'pre-view') { // 预览\n        this.prePlayVideo()\n      } else if (e.type === 'delete') { // 删除\n        this.$messageBox({\n          header: '删除此视频',\n          width: '400px',\n          content: '您是否确定要删除此视频？',\n          cancelText: '取消',\n          confirmText: '删除',\n          type: 'error',\n          handleClick: (e) => {\n            if (e.action === 'confirm') {\n              this.canPass = false\n              this.uploadVideoErrorMsg = ''\n              this.warm.recordId = ''\n              this.warm.filename = ''\n              this.sdkPlayParam.recordId = ''\n              this.sdkParam.fileName = ''\n              this.sdkParam.fileSize = ''\n              this.sdkParam.transcode_status = 0\n              this.progress = 0\n            }\n          }\n        })\n      }\n    },\n    errorUploadVideo (msg, file) {\n      this.sdkParam.fileName = file.name\n      this.uploadVideoErrorMsg = msg\n    },\n    uploadError (data) {\n      this.uploadImgErrorMsg = data.msg\n      this.warm.playCover = ''\n    },\n    openSwitch (type) {\n      const data = {\n        activityId: this.$route.params.id,\n        submodule: 'WARMUP',\n        enabled: type ? 'Y' : 'N'\n      }\n      this.isSwitchDisabled = true\n      this.$config({ handlers: true }).$post(activityService.POST_DETAIL_SWITCH, data).then((res) => {\n        // this.$toast({\n        //   content: '设置成功',\n        //   position: 'center'\n        // })\n        let st = setTimeout(() => {\n          clearTimeout(st)\n          this.isSwitchDisabled = false\n        }, 3000)\n      }).catch((res) => {\n        let st = setTimeout(() => {\n          clearTimeout(st)\n          this.isSwitchDisabled = false\n        }, 3000)\n        if (res.code === 60706) {\n          this.isSwitch = !type\n          this.$messageBox({\n            header: '提示',\n            content: res.msg,\n            autoClose: 10,\n            confirmText: '知道了'\n          })\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped src=\"./css/live.scss\">\n</style>\n<style lang=\"scss\" scoped>\n.bottom-btn {\n  text-align: center;\n  button {\n    width: 200px;\n    margin: 60px auto 50px auto;\n  }\n}\n.el-switch {\n  position: relative;\n  bottom: 4px;\n}\n</style>\n","import { render, staticRenderFns } from \"./warm-field.vue?vue&type=template&id=b73c8c64&scoped=true&\"\nimport script from \"./warm-field.vue?vue&type=script&lang=js&\"\nexport * from \"./warm-field.vue?vue&type=script&lang=js&\"\nimport style0 from \"./css/live.scss?vue&type=style&index=0&id=b73c8c64&lang=scss&scoped=true&\"\nimport style1 from \"./warm-field.vue?vue&type=style&index=1&id=b73c8c64&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b73c8c64\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/chenqi/Desktop/Wswork/fe_management/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('b73c8c64', component.options)\n    } else {\n      api.reload('b73c8c64', component.options)\n    }\n    module.hot.accept(\"./warm-field.vue?vue&type=template&id=b73c8c64&scoped=true&\", function () {\n      api.rerender('b73c8c64', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/live-mager/warm-field.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=b73c8c64&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=b73c8c64&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./warm-field.vue?vue&type=style&index=1&id=b73c8c64&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../node_modules/css-loader/index.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js!../../../node_modules/sass-loader/lib/loader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./warm-field.vue?vue&type=style&index=1&id=b73c8c64&lang=scss&scoped=true&\""],"sourceRoot":""}