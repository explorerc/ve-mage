(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{172:function(a,e,t){"use strict";var i=t(5);const s={queryList:a=>i.a.ajax({method:"post",url:"/manage/base-manage/list-activity",params:a}),deleteById:a=>i.a.ajax({method:"post",url:"/manage/base-manage/del-activity",params:{id:a}}),queryWarmInfoById:a=>i.a.ajax({method:"post",url:"/manage/warm-up-manage/get",params:{activityId:a}}),saveAndEditWarmInfo:a=>i.a.ajax({method:"post",url:"/manage/warm-up-manage/edit",params:a}),queryReminderInfoById:a=>i.a.ajax({method:"post",url:"/",params:{id:a}}),saveReminderInfo:a=>i.a.ajax({method:"post",url:"/",params:a}),roleList:a=>i.a.ajax({method:"GET",url:"/manage/role-manage/list-role",params:{activityId:a}}),delAss:a=>i.a.ajax({method:"POST",url:"/manage/role-manage/del-assistant",params:a}),handleAss:(a,e)=>i.a.ajax({method:"POST",url:a?"/manage/role-manage/update-assistant":"/manage/role-manage/add-assistant",params:e}),getLimit:a=>i.a.ajax({method:"GET",url:"/manage/view-limit/get-limit",params:{activityId:a}}),saveLimit:a=>i.a.ajax({method:"POST",url:"/manage/view-limit/update-limit",params:a}),webinarInfo:a=>i.a.ajax({method:"GET",url:"/manage/base-manage/detail-activity",params:{id:a}}),updateWebinfo:(a,e)=>i.a.ajax({method:"POST",url:a?"/manage/base-manage/add-activity":"/manage/base-manage/update-activity",params:e}),queryEmailList:a=>i.a.ajax({method:"post",url:"/expand/email-invite/list",params:a}),deleteEmailById:a=>i.a.ajax({method:"post",url:"/expand/email-invite/delete",params:{emailInviteId:a}}),queryEmailInfoById:a=>i.a.ajax({method:"post",url:"/expand/email-invite/query",params:{emailInviteId:a}}),queryEmailTemplateList:()=>i.a.ajax({method:"post",url:"/expand/email-invite/templates",params:{}}),sendEmailInfo:a=>i.a.ajax({method:"post",url:"/expand/email-invite/send",params:a}),sendTimerEmailInfo:a=>i.a.ajax({method:"post",url:"/expand/email-invite/save-and-plansend",params:a}),sendTestEmailInfo:a=>i.a.ajax({method:"post",url:"/expand/email-invite/test-send",params:a}),saveAndsendEmail:a=>i.a.ajax({method:"post",url:"/expand/email-invite/save-and-send",params:a}),saveEmailInfo:a=>i.a.ajax({method:"post",url:"/expand/email-invite/save-draft",params:a}),saveWechat:a=>i.a.ajax({method:"post",url:"/expand/wechat-invite/save",params:a}),saveMsg:a=>i.a.ajax({method:"post",url:"/expand/sms-invite/save",params:a}),queryWechat:a=>i.a.ajax({method:"post",url:"/expand/wechat-invite/query",params:{inviteId:a}}),queryMsg:a=>i.a.ajax({method:"post",url:"/expand/sms-invite/query",params:{inviteId:a}}),queryWechatlist:a=>i.a.ajax({method:"post",url:"/expand/wechat-invite/list",params:a}),queryMsglist:a=>i.a.ajax({method:"post",url:"/expand/sms-invite/list",params:a}),deleteWechat:a=>i.a.ajax({method:"post",url:"/expand/wechat-invite/delete",params:{inviteId:a}}),deleteMsg:a=>i.a.ajax({method:"post",url:"/expand/sms-invite/delete",params:{inviteId:a}}),queryPassSdkInfo:()=>i.a.ajax({method:"post",url:"/common/pass-sdk/create-access-token",params:{}})};e.a=s},174:function(a,e,t){},186:function(a,e,t){"use strict";var i=t(174);t.n(i).a},203:function(a,e,t){},204:function(a,e,t){},233:function(a,e,t){"use strict";var i=function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticClass:"pagination-box"},[e("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":this.pageSize,"current-page":this.currentPage,total:this.total},on:{"current-change":this.changePage}})],1)};i._withStripped=!0;var s={name:"ve-pagination",props:{total:{type:Number,default:0},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},methods:{changePage(a){this.$emit("changePage",a)}}},n=(t(186),t(1)),l=Object(n.a)(s,i,[],!1,null,null,null);l.options.__file="src\\components\\ve-pagination.vue";e.a=l.exports},281:function(a,e,t){"use strict";var i=t(203);t.n(i).a},283:function(a,e,t){"use strict";var i=t(204);t.n(i).a},363:function(a,e,t){"use strict";t.r(e);var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"live-mager email-box"},[a._m(0),a._v(" "),t("div",{directives:[{name:"ComLoading",rawName:"v-ComLoading",value:a.loading,expression:"loading"}],staticClass:"email-table-box"},[t("div",{staticClass:"email-setting"},[a._v("\n      邮件邀约：\n      "),t("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:a.isInvite,callback:function(e){a.isInvite=e},expression:"isInvite"}}),a._v(" "),t("span",{staticClass:"msg-tip"},[a._v("开启后，将可以定制邀约邮件，邀请特定客户群参加直播活动")]),a._v(" "),t("el-button",{staticClass:"live-btn fr",attrs:{type:"primary",plain:""},on:{click:a.addEmail}},[a._v("新建邮件")])],1),a._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:a.emailList}},[t("el-table-column",{attrs:{prop:"title",label:"邮件标题"}}),a._v(" "),t("el-table-column",{attrs:{prop:"sendTime",label:"发送时间"}}),a._v(" "),t("el-table-column",{attrs:{prop:"sendCount",label:"发送数量"}}),a._v(" "),t("el-table-column",{attrs:{prop:"statusName",label:"状态"}}),a._v(" "),t("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){t.stopPropagation(),a.clickEmail(e.$index,a.handleType.info)}}},[a._v("查看")]),a._v(" "),"DRAFT"===a.emailList[e.$index].status?t("el-button",{attrs:{type:"text",size:"small",disabled:""},on:{click:function(t){t.stopPropagation(),a.clickEmail(e.$index,a.handleType.send)}}},[a._v("立刻发送")]):"SEND"!==a.emailList[e.$index].status?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){t.stopPropagation(),a.clickEmail(e.$index,a.handleType.send)}}},[a._v("立刻发送")]):a._e(),a._v(" "),"SEND"!==a.emailList[e.$index].status?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){t.stopPropagation(),a.clickEmail(e.$index,a.handleType.edit)}}},[a._v("编辑")]):a._e(),a._v(" "),"SEND"!==a.emailList[e.$index].status?t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){t.stopPropagation(),a.clickEmail(e.$index,a.handleType.delete)}}},[a._v("删除")]):a._e()]}}])})],1),a._v(" "),t("div",{staticClass:"pagination-box"},[a.total>a.pageSize?t("div",{staticClass:"page-pagination"},[t("ve-pagination",{attrs:{total:a.total,pageSize:a.pageSize},on:{changePage:a.changePage}})],1):a._e()])],1),a._v(" "),a.sendShow?t("message-box",{attrs:{width:"500px",header:"邮件推送确认",confirmText:"确认发送"},on:{handleClick:a.handleClickSendEmail}},[t("div",{staticClass:"email-info"},[t("div",{staticClass:"email-info-row"},[t("span",[a._v("邮件标题：")]),a._v(" "),t("span",[a._v(a._s(a.currentEmail.title))])]),a._v(" "),t("div",{staticClass:"email-info-row"},[t("span",[a._v("发件人：")]),a._v(" "),t("span",[a._v("*****")])]),a._v(" "),t("div",{staticClass:"email-info-row"},[t("span",[a._v("收件人：")]),a._v(" "),t("span",[a._v("666")])]),a._v(" "),t("div",{staticClass:"email-info-row"},[t("span",[a._v("邮件摘要：")]),a._v(" "),t("span",[a._v("***********************************************************")])])])]):a._e()],1)};i._withStripped=!0;var s=t(11),n=t.n(s),l=t(172),o=t(233),m=t(18),d=t(8);const r={info:"queryInfoEmail",send:"sendEmail",edit:"editEmail",delete:"deleteEmail"},p={DRAFT:"草稿",SEND:"已发送",AWAIT:"等待发送"};var c={name:"index",components:{VePagination:o.a},data:()=>({isInvite:!1,pageSize:10,total:0,currentPage:1,activeId:"",sendShow:!1,currentEmailIdx:"",handleType:r,loading:!1,emailList:[{activityId:0,emailInviteId:0,title:"",content:"",desc:"",planTime:"",sendTime:"",senderName:"",sendCount:0,status:"",statusName:""}]}),computed:{currentEmail(){return this.emailList[this.currentEmailIdx]}},created(){const a=this.$route.params.id;a||this.$router.go(-1),this.activeId=a,this.queryEmailListById()},methods:n()({},Object(m.mapMutations)("liveMager",{storeEmailInfo:d.a}),{changePage(a){this.currentPage=a,this.queryEmailListById()},queryEmailListById(){this.loading=!0,l.a.queryEmailList({activityId:this.activeId,pageSize:this.pageSize,page:this.currentPage}).then(a=>{this.loading=!1,200===a.code&&(a.data.list.map(a=>(a.statusName=p[a.status],a.sendTime=a.sendTime||"--",a.title=a.title||"--",a)),this.total=a.data.total,this.emailList=a.data.list)}).catch(()=>{this.loading=!1})},clickEmail(a,e){this.currentEmailIdx=a,e===this.handleType.info?this.queryInfoEmail():e===this.handleType.edit?this.editEmail():e===this.handleType.send?this.sendShow=!0:e===this.handleType.delete&&this.$messageBox({header:"",content:"删除邮件后，邮件内容将无法找回，确认删除？",cancelText:"取消",confirmText:"删除",handleClick:a=>{"confirm"===a.action&&this.delEmail()}})},queryInfoEmail(){const a=this.emailList[this.currentEmailIdx];this.storeEmailInfo(a),this.$router.push(`/liveMager/emailInfo/${this.activeId}?email=${a.emailInviteId}`)},sendEmail(){l.a.sendEmailInfo({emailInviteId:this.emailList[this.currentEmailIdx].emailInviteId}).then(a=>{console.log("邮件发送成功"),console.log(a)}).catch(a=>{console.log("邮件发送失败"),console.log(a)})},handleClickSendEmail(a){this.sendShow=!1,"confirm"===a.action&&this.sendEmail()},delEmail(){const a=this.emailList[this.currentEmailIdx].emailInviteId;l.a.deleteEmailById(a).then(a=>{200===a.code&&this.queryEmailListById()}).catch(a=>{console.log("删除邮件失败"),console.log(a)})},editEmail(){const a=this.emailList[this.currentEmailIdx];this.storeEmailInfo(a),this.$router.push(`/liveMager/emailEdit/${this.activeId}?email=${a.emailInviteId}`)},addEmail(){this.$router.push(`/liveMager/emailEdit/${this.activeId}`)}})},u=(t(281),t(283),t(1)),v=Object(u.a)(c,i,[function(){var a=this.$createElement,e=this._self._c||a;return e("div",{staticClass:"live-title"},[e("span",[this._v("邮件邀约")])])}],!1,null,"6533cfb3",null);v.options.__file="src\\pages\\live-mager\\email\\index.vue";e.default=v.exports}}]);
//# sourceMappingURL=13.68c7595c.js.map