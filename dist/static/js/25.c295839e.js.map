{"version":3,"sources":["webpack:///./src/pages/live-mager/css/live.scss?877b","webpack:///./src/pages/live-mager/email/index.vue?bc50","webpack:///./src/pages/live-mager/email/index.vue?902d","webpack:///src/pages/live-mager/email/index.vue","webpack:///./src/pages/live-mager/email/index.vue?67d2","webpack:///./src/pages/live-mager/email/index.vue"],"names":["_node_modules_mini_css_extract_plugin_0_4_4_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_live_scss_vue_type_style_index_0_id_6533cfb3_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_node_modules_mini_css_extract_plugin_0_4_4_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_1_id_6533cfb3_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","on","click","addEmail","_s","countBalance","countTotal","directives","name","rawName","value","loading","expression","staticStyle","padding-top","width","attrs","data","emailList","prop","label","scopedSlots","_u","key","fn","scope","row","status","statusName","_e","$event","stopPropagation","clickEmail","$index","handleType","info","delete","total","pageSize","changePage","_withStripped","send","edit","statusType","DRAFT","SEND","AWAIT","FAIL","live_mager_emailvue_type_script_lang_js_","components","VePagination","ve_pagination","currentPage","activeId","sendShow","currentEmailIdx","activityId","emailInviteId","title","content","desc","planTime","sendTime","senderName","sendCount","computed","currentEmail","created","queryId","$route","params","id","$router","go","getLimit","queryEmailListById","methods","extends_default","Object","vuex_esm","storeEmailInfo","mutation_types","_this","$get","activity_service","GET_EMAIL_LIST","page","then","res","list","map","dataItem","idx","type","_this2","queryInfoEmail","editEmail","$messageBox","header","cancelText","confirmText","handleClick","e","action","delEmail","email","push","sendEmail","$post","POST_SEND_EMAIL_INFO","console","log","handleClickSendEmail","_this3","emaiId","POST_DEL_EMAIL","_this4","GET_SEND_LIMIT","balance","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/25.c295839e.js","sourcesContent":["import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.4@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.4@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.4@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.4@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"live-mager email-box\" }, [\n    _c(\"div\", { staticClass: \"live-title\" }, [\n      _c(\"span\", { staticClass: \"title\" }, [_vm._v(\"邮件邀约\")]),\n      _vm._v(\" \"),\n      _c(\n        \"button\",\n        { staticClass: \"primary-button fr\", on: { click: _vm.addEmail } },\n        [_vm._v(\"新建邮件\")]\n      ),\n      _vm._v(\" \"),\n      _c(\"span\", { staticClass: \"send-box fr\" }, [\n        _vm._v(\n          \"发送限额：\" + _vm._s(_vm.countBalance) + \"/\" + _vm._s(_vm.countTotal)\n        )\n      ])\n    ]),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      {\n        directives: [\n          {\n            name: \"ComLoading\",\n            rawName: \"v-ComLoading\",\n            value: _vm.loading,\n            expression: \"loading\"\n          }\n        ],\n        staticClass: \"email-table-box\"\n      },\n      [\n        _c(\"div\", { staticClass: \"tip-box\" }, [\n          _vm._v(\n            \"\\n      通过邮件邀约，定制邀约邮件，邀请特定客户群参加直播活动\\n    \"\n          )\n        ]),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          {\n            staticClass: \"table-list-box\",\n            staticStyle: { \"padding-top\": \"20px\" }\n          },\n          [\n            _c(\n              \"el-table\",\n              {\n                staticStyle: { width: \"100%\" },\n                attrs: { data: _vm.emailList }\n              },\n              [\n                _c(\"el-table-column\", {\n                  attrs: { prop: \"title\", label: \"邮件标题\" }\n                }),\n                _vm._v(\" \"),\n                _c(\"el-table-column\", {\n                  attrs: { prop: \"sendTime\", label: \"发送时间\" }\n                }),\n                _vm._v(\" \"),\n                _c(\"el-table-column\", {\n                  attrs: { prop: \"sendCount\", label: \"发送数量\" }\n                }),\n                _vm._v(\" \"),\n                _c(\"el-table-column\", {\n                  attrs: { prop: \"statusName\", label: \"状态\" },\n                  scopedSlots: _vm._u([\n                    {\n                      key: \"default\",\n                      fn: function(scope) {\n                        return [\n                          scope.row.status == \"DRAFT\"\n                            ? _c(\"span\", { staticClass: \"cg-status\" }, [\n                                _vm._v(_vm._s(scope.row.statusName))\n                              ])\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          scope.row.status == \"SEND\"\n                            ? _c(\"span\", { staticClass: \"fs-status\" }, [\n                                _vm._v(_vm._s(scope.row.statusName))\n                              ])\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          scope.row.status == \"AWAIT\"\n                            ? _c(\"span\", { staticClass: \"dd-status\" }, [\n                                _vm._v(_vm._s(scope.row.statusName))\n                              ])\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          scope.row.status == \"FAIL\"\n                            ? _c(\"span\", { staticClass: \"del-status\" }, [\n                                _vm._v(_vm._s(scope.row.statusName))\n                              ])\n                            : _vm._e()\n                        ]\n                      }\n                    }\n                  ])\n                }),\n                _vm._v(\" \"),\n                _c(\"el-table-column\", {\n                  attrs: { label: \"操作\" },\n                  scopedSlots: _vm._u([\n                    {\n                      key: \"default\",\n                      fn: function(scope) {\n                        return [\n                          _c(\"div\", { staticClass: \"table-handler\" }, [\n                            _c(\n                              \"span\",\n                              {\n                                on: {\n                                  click: function($event) {\n                                    $event.stopPropagation()\n                                    _vm.clickEmail(\n                                      scope.$index,\n                                      _vm.handleType.info\n                                    )\n                                  }\n                                }\n                              },\n                              [_vm._v(\"查看\")]\n                            ),\n                            _vm._v(\" \"),\n                            _vm.emailList[scope.$index].status !== \"SEND\"\n                              ? _c(\n                                  \"span\",\n                                  {\n                                    on: {\n                                      click: function($event) {\n                                        $event.stopPropagation()\n                                        _vm.clickEmail(\n                                          scope.$index,\n                                          _vm.handleType.delete\n                                        )\n                                      }\n                                    }\n                                  },\n                                  [_vm._v(\"删除\")]\n                                )\n                              : _vm._e()\n                          ])\n                        ]\n                      }\n                    }\n                  ])\n                })\n              ],\n              1\n            )\n          ],\n          1\n        ),\n        _vm._v(\" \"),\n        _c(\"div\", { staticClass: \"pagination-box\" }, [\n          _c(\n            \"div\",\n            { staticClass: \"page-pagination\" },\n            [\n              _c(\"ve-pagination\", {\n                attrs: { total: _vm.total, pageSize: _vm.pageSize },\n                on: { changePage: _vm.changePage }\n              })\n            ],\n            1\n          )\n        ])\n      ]\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"live-mager email-box\">\r\n    <div class=\"live-title\">\r\n      <span class=\"title\">邮件邀约</span>\r\n      <button class=\"primary-button fr\"\r\n              @click=\"addEmail\">新建邮件</button>\r\n      <span class=\"send-box fr\">发送限额：{{countBalance}}/{{countTotal}}</span>\r\n    </div>\r\n    <div class=\"email-table-box\"\r\n         v-ComLoading=\"loading\">\r\n      <div class=\"tip-box\">\r\n        通过邮件邀约，定制邀约邮件，邀请特定客户群参加直播活动\r\n      </div>\r\n      <div class=\"table-list-box\"\r\n           style=\"padding-top: 20px;\">\r\n        <el-table :data=\"emailList\"\r\n                  style=\"width: 100%\">\r\n          <el-table-column prop=\"title\"\r\n                           label=\"邮件标题\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"sendTime\"\r\n                           label=\"发送时间\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"sendCount\"\r\n                           label=\"发送数量\">\r\n          </el-table-column>\r\n          <el-table-column prop=\"statusName\"\r\n                           label=\"状态\">\r\n            <template slot-scope=\"scope\">\r\n              <span v-if=\"scope.row.status=='DRAFT'\"\r\n                    class=\"cg-status\">{{scope.row.statusName}}</span>\r\n              <span v-if=\"scope.row.status=='SEND'\"\r\n                    class=\"fs-status\">{{scope.row.statusName}}</span>\r\n              <span v-if=\"scope.row.status=='AWAIT'\"\r\n                    class=\"dd-status\">{{scope.row.statusName}}</span>\r\n              <span v-if=\"scope.row.status=='FAIL'\"\r\n                    class=\"del-status\">{{scope.row.statusName}}</span>\r\n              <!--DRAFT: '草稿',-->\r\n              <!--SEND: '已发送',-->\r\n              <!--AWAIT: '等待发送'-->\r\n              <!--v-if=\"scope.row.status=='DRAFT'\"-->\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <!--<el-button-->\r\n              <!--type=\"text\" size=\"small\"-->\r\n              <!--@click.stop=\"clickEmail(scope.$index,handleType.info)\">查看</el-button>-->\r\n              <!--<el-button-->\r\n              <!--type=\"text\" size=\"small\"-->\r\n              <!--v-if=\"emailList[scope.$index].status==='DRAFT'\"-->\r\n              <!--@click.stop=\"clickEmail(scope.$index,handleType.send)\" disabled>立刻发送</el-button>-->\r\n              <!--<el-button-->\r\n              <!--type=\"text\" size=\"small\"-->\r\n              <!--v-else-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n              <!--@click.stop=\"clickEmail(scope.$index,handleType.send)\">立刻发送</el-button>-->\r\n              <!--<el-button-->\r\n              <!--type=\"text\" size=\"small\"-->\r\n              <!--v-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n              <!--@click.stop=\"clickEmail(scope.$index,handleType.edit)\">编辑</el-button>-->\r\n              <!--<el-button-->\r\n              <!--type=\"text\" size=\"small\"-->\r\n              <!--v-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n              <!--@click.stop=\"clickEmail(scope.$index,handleType.delete)\">删除</el-button>-->\r\n              <div class=\"table-handler\">\r\n                <span @click.stop=\"clickEmail(scope.$index,handleType.info)\">查看</span>\r\n                <span v-if=\"emailList[scope.$index].status!=='SEND'\"\r\n                      @click.stop=\"clickEmail(scope.$index,handleType.delete)\">删除</span>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n      <div class=\"pagination-box\">\r\n        <div class=\"page-pagination\">\r\n          <ve-pagination :total=\"total\"\r\n                         :pageSize=\"pageSize\"\r\n                         @changePage=\"changePage\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--<message-box-->\r\n    <!--v-if=\"sendShow\"-->\r\n    <!--width=\"500px\"-->\r\n    <!--header=\"邮件推送确认\"-->\r\n    <!--confirmText='确认发送'-->\r\n    <!--@handleClick=\"handleClickSendEmail\">-->\r\n    <!--<div class=\"email-info\">-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>邮件标题：</span>-->\r\n    <!--<span>{{currentEmail.title}}</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>发件人：</span>-->\r\n    <!--<span>*****</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>收件人：</span>-->\r\n    <!--<span>666</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>邮件摘要：</span>-->\r\n    <!--<span>***********************************************************</span>-->\r\n    <!--</div>-->\r\n    <!--</div>-->\r\n    <!--</message-box>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport activityService from 'src/api/activity-service'\r\nimport VePagination from 'src/components/ve-pagination'\r\nimport { mapMutations } from 'vuex'\r\nimport * as types from '../../../store/mutation-types'\r\n\r\nconst handleType = {\r\n  info: 'queryInfoEmail',\r\n  send: 'sendEmail',\r\n  edit: 'editEmail',\r\n  delete: 'deleteEmail'\r\n}\r\nconst statusType = {\r\n  DRAFT: '草稿',\r\n  SEND: '已发送',\r\n  AWAIT: '等待发送',\r\n  FAIL: '发送失败'\r\n}\r\nexport default {\r\n  name: 'index',\r\n  components: { VePagination },\r\n  data () {\r\n    return {\r\n      pageSize: 10,\r\n      total: 0,\r\n      currentPage: 1,\r\n      activeId: '', // 活动id\r\n      sendShow: false,\r\n      currentEmailIdx: '',\r\n      handleType: handleType,\r\n      loading: false,\r\n      emailList: [\r\n        {\r\n          activityId: 0,\r\n          emailInviteId: 0,\r\n          title: '',\r\n          content: '',\r\n          desc: '',\r\n          planTime: '',\r\n          sendTime: '',\r\n          senderName: '',\r\n          sendCount: 0,\r\n          status: '',\r\n          statusName: ''\r\n        }\r\n      ],\r\n      countTotal: 0,\r\n      countBalance: 0\r\n    }\r\n  },\r\n  computed: {\r\n    currentEmail () {\r\n      return this.emailList[this.currentEmailIdx]\r\n    }\r\n  },\r\n  created () {\r\n    const queryId = this.$route.params.id\r\n    if (!queryId) {\r\n      this.$router.go(-1)\r\n    }\r\n    this.activeId = queryId\r\n    this.getLimit()\r\n    this.queryEmailListById()\r\n  },\r\n  methods: {\r\n    ...mapMutations('liveMager', {\r\n      storeEmailInfo: types.EMAIL_INFO\r\n    }),\r\n    changePage (currentPage) {\r\n      this.currentPage = currentPage\r\n      this.queryEmailListById()\r\n    },\r\n    queryEmailListById () {\r\n      // this.loading = true\r\n      this.$get(activityService.GET_EMAIL_LIST, {\r\n        activityId: this.activeId,\r\n        pageSize: this.pageSize,\r\n        page: this.currentPage\r\n      }).then((res) => {\r\n        res.data.list.map((dataItem) => {\r\n          dataItem.statusName = statusType[dataItem.status]\r\n          dataItem.sendTime = dataItem.sendTime || '--'\r\n          dataItem.title = dataItem.title || '--'\r\n          return dataItem\r\n        })\r\n        this.total = res.data.total\r\n        this.emailList = res.data.list\r\n      })\r\n    },\r\n    clickEmail (idx, type) {\r\n      this.currentEmailIdx = idx\r\n      if (type === this.handleType.info) { // 查看\r\n        this.queryInfoEmail()\r\n      } else if (type === this.handleType.edit) { // 编辑\r\n        this.editEmail()\r\n      } else if (type === this.handleType.send) { // 立即发送\r\n        this.sendShow = true\r\n      } else if (type === this.handleType.delete) { // 删除\r\n        this.$messageBox({\r\n          header: '',\r\n          content: '删除邮件后，邮件内容将无法找回，确认删除？',\r\n          cancelText: '取消',\r\n          confirmText: '删除',\r\n          width: '400px',\r\n          handleClick: (e) => {\r\n            if (e.action === 'confirm') {\r\n              this.delEmail()\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    queryInfoEmail () {\r\n      const email = this.emailList[this.currentEmailIdx]\r\n      this.storeEmailInfo(email)\r\n      this.$router.push(`/liveMager/emailInfo/${this.activeId}?email=${email.emailInviteId}`)\r\n    },\r\n    sendEmail () {\r\n      this.$post(activityService.POST_SEND_EMAIL_INFO, {\r\n        emailInviteId: this.emailList[this.currentEmailIdx].emailInviteId\r\n      }).then((res) => {\r\n        console.log('邮件发送成功')\r\n        console.log(res)\r\n      })\r\n      // LiveHttp.sendEmailInfo({\r\n      //   emailInviteId: this.emailList[this.currentEmailIdx].emailInviteId\r\n      // }).then((res) => {\r\n      //   console.log('邮件发送成功')\r\n      //   console.log(res)\r\n      // }).catch((e) => {\r\n      //   console.log('邮件发送失败')\r\n      //   console.log(e)\r\n      // })\r\n    },\r\n    handleClickSendEmail (e) {\r\n      this.sendShow = false\r\n      if (e.action === 'confirm') {\r\n        this.sendEmail()\r\n      }\r\n    },\r\n    delEmail () {\r\n      const emaiId = this.emailList[this.currentEmailIdx].emailInviteId\r\n      this.$post(activityService.POST_DEL_EMAIL, {\r\n        emailInviteId: emaiId\r\n      }).then((res) => {\r\n        this.queryEmailListById()\r\n      })\r\n      // LiveHttp.deleteEmailById(emaiId).then((res) => {\r\n      //   if (res.code === 200) {\r\n      //     this.queryEmailListById()\r\n      //   }\r\n      // }).catch((e) => {\r\n      //   console.log('删除邮件失败')\r\n      //   console.log(e)\r\n      // })\r\n    },\r\n    editEmail () {\r\n      const email = this.emailList[this.currentEmailIdx]\r\n      this.storeEmailInfo(email)\r\n      this.$router.push(`/liveMager/emailEdit/${this.activeId}?email=${email.emailInviteId}`)\r\n    },\r\n    addEmail () {\r\n      this.$router.push(`/liveMager/emailEditOne/${this.activeId}`)\r\n    },\r\n    getLimit () {\r\n      this.$get(activityService.GET_SEND_LIMIT, {\r\n        activityId: this.activeId,\r\n        type: 'EMAIL'\r\n      }).then((res) => {\r\n        console.log(res)\r\n        this.countBalance = res.data.balance\r\n        this.countTotal = res.data.total\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped src=\"../css/live.scss\"></style>\r\n<style lang=\"scss\" scoped>\r\n.email-table-box {\r\n  font-size: 14px;\r\n}\r\n\r\n.send-box {\r\n  display: inline-block;\r\n  color: #888;\r\n  font-size: 14px;\r\n  line-height: 44px;\r\n  margin-right: 20px;\r\n}\r\n\r\n.cg-status {\r\n  color: #1bcab7;\r\n}\r\n\r\n.fs-status {\r\n  color: #4b5afe;\r\n}\r\n\r\n.dd-status {\r\n  color: #ff8b0e;\r\n}\r\n\r\n.del-status {\r\n  color: #fc5659;\r\n}\r\n\r\n.email-box {\r\n  margin-top: 20px;\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6533cfb3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"../css/live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6533cfb3\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\work\\\\vhall\\\\fe_management\\\\node_modules\\\\_vue-hot-reload-api@2.3.1@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6533cfb3', component.options)\n    } else {\n      api.reload('6533cfb3', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=6533cfb3&scoped=true&\", function () {\n      api.rerender('6533cfb3', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/live-mager/email/index.vue\"\nexport default component.exports"],"sourceRoot":""}