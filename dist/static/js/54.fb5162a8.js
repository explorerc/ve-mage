(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1008:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"goods-info"}},[o("p",[e._v("新建/编辑商品信息")]),e._v(" "),o("el-form",{ref:"goodsData",attrs:{model:e.goodsData,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{model:{value:e.goodsData.name,callback:function(t){e.$set(e.goodsData,"name",t)},expression:"goodsData.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"优惠价格"}},[o("el-input",{model:{value:e.goodsData.name,callback:function(t){e.$set(e.goodsData,"name",t)},expression:"goodsData.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"原始价格"}},[o("el-input",{model:{value:e.goodsData.name,callback:function(t){e.$set(e.goodsData,"name",t)},expression:"goodsData.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品图片"}},[o("el-input",{model:{value:e.goodsData.name,callback:function(t){e.$set(e.goodsData,"name",t)},expression:"goodsData.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"商品描述"}},[o("div",{staticClass:"upload_box"},[e._l(e.upload_list,function(t,a){return o("ve-upload",{attrs:{title:"图片小于2MB 支持jpg、png、bmp格式 最佳尺寸：600 x 600",accept:"png|jpg|jpeg|bmp",defaultImg:e.defaultImg,nowIndex:a||0,fileSize:2048,errorMsg:e.uploadImgErrorMsg},on:{error:e.uploadError,success:e.uploadImgSuccess}})}),e._v(" "),e.upload_list.length<4?o("el-button",{on:{click:e.add_upload}},[e._v("+")]):e._e()],2)]),e._v(" "),o("el-form-item",{attrs:{label:"商品链接"}},[o("el-input",{attrs:{type:"url"},model:{value:e.goodsData.name,callback:function(t){e.$set(e.goodsData,"name",t)},expression:"goodsData.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"淘口令"}},[o("el-input",{model:{value:e.goodsData.name,callback:function(t){e.$set(e.goodsData,"name",t)},expression:"goodsData.name"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),o("el-button",{attrs:{size:"small"}},[e._v("取消")])],1)],1)],1)};a._withStripped=!0;var s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"ComLoading",rawName:"v-ComLoading",value:e.loading,expression:"loading"}],staticClass:"ve-upload-box"},[e.fileSrc||!e.fileSrc&&e.coverImg?o("div",{staticClass:"upload-img-box"},[o("transition",{attrs:{name:"fade"}},[e.fileSrc?o("div",{staticClass:"temp-img",style:{backgroundImage:"url("+e.imgHost+"/"+e.fileSrc+")"}}):e._e(),e._v(" "),!e.fileSrc&&e.coverImg?o("div",{staticClass:"temp-img",style:{backgroundImage:"url("+e.coverImg+")"}}):e._e()]),e._v(" "),o("div",{staticClass:"over-upload"},[o("span",{on:{click:function(t){return t.stopPropagation(),e.deleteImage(t)}}},[o("i",{staticClass:"iconfont icon-icon-shanchu"}),e._v("\n        删除\n      ")]),e._v(" "),o("span",{on:{click:function(t){return t.stopPropagation(),e.overUpload(t)}}},[o("i",{staticClass:"iconfont icon-yulanxuanzhuan"}),e._v("\n        重置\n      ")])])],1):e._e(),e._v(" "),o("com-upload",{attrs:{accept:e.accept,actionUrl:"/api/upload/image",inputName:"file",fileSize:e.fileSize},on:{error:e.uploadError,selected:e.selected,progress:e.uploadProgress,load:e.uploadImgSuccess}},[o("div",{directives:[{name:"show",rawName:"v-show",value:!(e.fileSrc||!e.fileSrc&&e.coverImg),expression:"!(fileSrc||(!fileSrc && coverImg))"}],ref:"uploadFile",staticClass:"upload-file-box",attrs:{title:"点击上传"}},[o("i",{staticClass:"upload-icon"}),e._v(" "),e.errorTxt?o("span",{staticClass:"error-msg"},[e._v(e._s(e.errorTxt))]):o("span",{domProps:{innerHTML:e._s(e.tipTxt)}})])])],1)};s._withStripped=!0;var i={name:"ve-upload-image",components:{ComUpload:o(99).a},data:function(){return{imgHost:"",fileSrc:"",coverImg:"",tipTxt:"",percentImg:0,errorTxt:"",loading:!1}},props:{accept:{type:String,default:"png|jpg|jpeg|bmp|gif|doc|mp4"},fileSize:{type:Number,default:1024},defaultImg:{type:String,default:""},title:{type:String,default:"上传文件"},errorMsg:{type:String,default:""},nowIndex:{type:Number,default:0}},watch:{errorMsg:function(e){this.errorTxt=e,e.length&&(this.fileSrc="",this.coverImg="")},defaultImg:{handler:function(e){this.coverImg=e,e||(this.fileSrc="")},immediate:!0},title:{handler:function(e){this.tipTxt=e},immediate:!0}},methods:{deleteImage:function(){this.coverImg="",this.fileSrc="",this.errorTxt="",this.$emit("success",{name:"",host:"",nowIndex:this.nowIndex})},overUpload:function(){this.$refs.uploadFile.click()},selected:function(){console.log("selected"),this.loading=!0},uploadProgress:function(e){this.loading=!1,this.percentImg=parseFloat(parseFloat(e.percent.replace("%","")).toFixed(2)),100===this.percentImg&&(this.percentImg=0)},uploadImgSuccess:function(e){var t=JSON.parse(e.data).data;t.host&&(this.imgHost=t.host),t.name&&(this.fileSrc=t.name),t.nowIndex=this.nowIndex,this.$emit("success",t)},uploadError:function(e){this.loading=!1;var t=e.data[0].state,o="";o="size-limit"===t?"上传图片过大":"type-limit"===t?"不支持该格式，请重新上传":"图片上传失败",this.fileSrc="",this.coverImg="",this.$emit("error",{type:t,msg:o,nowIndex:this.nowIndex})}}},n=(o(995),o(2)),l=Object(n.a)(i,s,[],!1,null,"07a2e09e",null);l.options.__file="src/components/ve-upload-group.vue";var r={name:"info",created:function(){},components:{VeUpload:l.exports},computed:{defaultImg:function(){return this.poster?this.$imgHost+"/"+this.poster:""}},data:function(){return{upload_list:[{}],goodsData:{name:""},uploadImgErrorMsg:""}},methods:{add_upload:function(){this.upload_list.push({})},onSubmit:function(){},uploadImgSuccess:function(e){console.log(e)},uploadError:function(e){console.log(e)}}},c=(o(997),Object(n.a)(r,a,[],!1,null,"5ceb96de",null));c.options.__file="src/pages/sales-tools/recommend-goods/info.vue";t.default=c.exports},659:function(e,t,o){},660:function(e,t,o){},995:function(e,t,o){"use strict";var a=o(659);o.n(a).a},997:function(e,t,o){"use strict";var a=o(660);o.n(a).a}}]);
//# sourceMappingURL=54.fb5162a8.js.map