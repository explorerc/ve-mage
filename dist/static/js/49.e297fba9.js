(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{637:function(e,a,t){},638:function(e,a,t){},839:function(e,a,t){"use strict";var s=t(637);t.n(s).a},840:function(e,a,t){"use strict";var s=t(638);t.n(s).a},899:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"data-box search-box"},[t("div",{staticClass:"search-total"},[t("button",{staticClass:"default-button export-btn fl",on:{click:e.exportData}},[e._v("导出")]),e._v(" "),t("div",{staticClass:"search-item fr"},[t("com-input",{staticClass:"search-com",staticStyle:{width:"220px"},attrs:{type:"search",value:e.searchParams.keyword,maxLength:30,placeholder:"输入姓名/手机号/邮箱"},on:{"update:value":function(a){e.$set(e.searchParams,"keyword",a)}},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.searchEnter(a):null}}}),e._v(" "),t("span",{staticClass:"data-link",staticStyle:{"font-size":"14px","margin-left":"6px"},on:{click:function(a){e.isHigh=!e.isHigh}}},[e._v("高级筛选\n      "),t("i",{class:{iconfont:!0,"icon-Up":!0,"icon-down":!e.isHigh}})])],1)]),e._v(" "),e.isHigh?t("div",{staticClass:"data-pad"},[t("div",{staticClass:"search-item"},[t("span",{staticClass:"search-title"},[e._v("关键词搜索")]),e._v(" "),t("com-input",{staticClass:"search-com",staticStyle:{width:"220px"},attrs:{type:"search",value:e.searchParams.keyword,maxLength:30,placeholder:"输入姓名/手机号/邮箱"},on:{"update:value":function(a){e.$set(e.searchParams,"keyword",a)}},nativeOn:{keyup:function(a){return"button"in a||!e._k(a.keyCode,"enter",13,a.key,"Enter")?e.searchEnter(a):null}}})],1),e._v(" "),t("br"),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("用户级别")]),e._v(" "),t("el-select",{model:{value:e.searchParams.user_level,callback:function(a){e.$set(e.searchParams,"user_level",a)},expression:"searchParams.user_level"}},e._l(e.watcherTypeList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("本次得分")]),e._v(" "),t("el-select",{attrs:{placeholder:"本次得分"},model:{value:e.searchParams.score,callback:function(a){e.$set(e.searchParams,"score",a)},expression:"searchParams.score"}},e._l(e.scoreTypeList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("新老用户")]),e._v(" "),t("el-select",{model:{value:e.searchParams.is_new,callback:function(a){e.$set(e.searchParams,"is_new",a)},expression:"searchParams.is_new"}},e._l(e.userTypeList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("用户性别")]),e._v(" "),t("el-select",{attrs:{placeholder:"用户性别"},model:{value:e.searchParams.sex,callback:function(a){e.$set(e.searchParams,"sex",a)},expression:"searchParams.sex"}},e._l(e.genderList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("渠道来源")]),e._v(" "),t("el-select",{attrs:{placeholder:"渠道来源"},model:{value:e.searchParams.industry,callback:function(a){e.$set(e.searchParams,"industry",a)},expression:"searchParams.industry"}},e._l(e.sourceList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("观看设备")]),e._v(" "),t("el-select",{attrs:{placeholder:"观看设备"},model:{value:e.searchParams.device,callback:function(a){e.$set(e.searchParams,"device",a)},expression:"searchParams.device"}},e._l(e.deviceList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("所属地域")]),e._v(" "),t("el-select",{staticStyle:{width:"100px"},model:{value:e.searchParams.provinceId,callback:function(a){e.$set(e.searchParams,"provinceId",a)},expression:"searchParams.provinceId"}},e._l(e.provinceList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),t("el-select",{staticStyle:{width:"112px"},model:{value:e.searchParams.cityId,callback:function(a){e.$set(e.searchParams,"cityId",a)},expression:"searchParams.cityId"}},e._l(e.cityList,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("div",{staticClass:"search-item flm"},[t("span",{staticClass:"search-title"},[e._v("观众出入时段")]),e._v(" "),t("el-date-picker",{attrs:{format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",type:"datetimerange","range-separator":"至","start-placeholder":"输入进入时间","end-placeholder":"输入离开时间"},model:{value:e.enterOutTime,callback:function(a){e.enterOutTime=a},expression:"enterOutTime"}})],1),e._v(" "),t("div",{staticClass:"search-btns"},[t("button",{staticClass:"primary-button",on:{click:e.searchEnter}},[e._v("查询")]),e._v(" "),t("button",{staticClass:"default-button",on:{click:e.cancelClick}},[e._v("取消")])])]):e._e(),e._v(" "),t("div",{staticClass:"table-list-box data-pad"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.viewerList,"default-sort":{prop:"score",order:"descending"}}},[t("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"user-info"},[a.row.avatar?t("span",{staticClass:"user-avatar",style:{backgroundImage:"url("+e.$imgHost+"/"+a.row.avatar+")"}}):t("span",{staticClass:"user-avatar"}),e._v(" "),t("div",[t("span",{attrs:{title:a.row.nickname}},[e._v(e._s(a.row.nickname?a.row.nickname:"无")+"　"+e._s(a.row.sex?"M"==a.row.sex?"男":"女":""))]),e._v(" "),t("span",{class:{level4:4==a.row.end_user_level,level3:3==a.row.end_user_level,level2:2==a.row.end_user_level,level1:1==a.row.end_user_level}},[e._v(e._s(e._f("fmtUserLevel")(a.row.end_user_level)))])])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"score",sortable:"",label:"本次得分"}}),e._v(" "),t("el-table-column",{attrs:{label:"手机号"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("isEmpty")(a.row.phone))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"邮箱"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("isEmpty")(a.row.email))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"参会时间(首次)"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{attrs:{title:a.row.first_join_at&&a.row.first_join_at.substring(0,16)}},[e._v(e._s(a.row.first_join_at&&a.row.first_join_at.substring(0,16)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"观看时长"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("fmtTime")(a.row.watch_time))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"渠道来源"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e._f("fmtSource")(a.row.source))+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"详情"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"data-link",on:{click:function(t){e.goPageDetail(a.row.business_consumer_uid)}}},[e._v("详情")])]}}])})],1),e._v(" "),e.total>e.searchParams.pageSize?t("div",{staticClass:"page-pagination"},[t("ve-pagination",{attrs:{total:e.total,pageSize:e.searchParams.pageSize},on:{changePage:e.changePage}})],1):e._e()],1)])};s._withStripped=!0;var l=t(30),r=t.n(l),i=t(139),c=t.n(i),n=t(472),o=t(476),u=t(95),v=t(15),h=t(663),_=t(664),d={name:"viewerList",components:{VePagination:n.a},data:function(){return{isHigh:!1,enterOutTime:[],total:0,viewerList:[],searchParams:{activityId:"",keyword:"",sex:"",user_level:"",is_new:"",provinceId:"",province:"",cityId:"",city:"",industry:"",first_join_at:"",last_leave_at:"",device:"",score:"",page:1,pageSize:10},genderList:[{value:"",label:"全部"},{value:"M",label:"男"},{value:"W",label:"女"}],watcherTypeList:[{value:"",label:"全部用户"},{value:1,label:"优质用户"},{value:2,label:"高价值用户"},{value:3,label:"一般用户"},{value:4,label:"潜在用户"},{value:5,label:"流失用户"}],provinceList:[{value:"",label:"省"}].concat(c()(h)),cityList:[{value:"",label:"市"}],sourceList:[{value:"",label:"全部"},{value:"IMPORT",label:"导入"},{value:"MOBILE",label:"手机注册"},{value:"PC",label:"PC注册"}],deviceList:[{value:"",label:"全部"},{value:"pc",label:"电脑"},{value:"phone",label:"手机"}],scoreTypeList:[{value:"",label:"全部"},{value:1,label:"100>得分>90"},{value:2,label:"90>得分>80"},{value:3,label:"80>得分>60"},{value:4,label:"60>得分"}],userTypeList:[{value:"",label:"全部"},{value:0,label:"老用户"},{value:1,label:"新用户"}]}},filters:{fmtTime:function(e){return((e/3600>>0)+"").padStart(2,0)+":"+((e/60%60>>0)+"").padStart(2,0)+":"+((e%60>>0)+"").padStart(2,0)},fmtUserLevel:function(e){return{0:"没有评级",1:"优质用户",2:"高价值用户",3:"一般用户",4:"一般用户",5:"流失用户"}[e]},fmtSource:function(e){return{"":"没有来源",IMPORT:"导入",MOBILE:"手机注册",PC:"PC注册"}[e]}},watch:{enterOutTime:function(e){if(!e)return this.searchParams.first_join_at="",void(this.searchParams.last_leave_at="");this.searchParams.first_join_at=e[0],this.searchParams.last_leave_at=e[1]},"searchParams.provinceId":function(e){if(e){for(var a=0;a<h.length;a++)if(h[a].value===e){this.searchParams.province=h[a].label;break}this.cityList=[{value:"",label:"市"}].concat(c()(_[e]))}else this.cityList=[{value:"",label:"市"}];this.searchParams.cityId="",this.searchParams.city=""},"searchParams.cityId":function(e){for(var a=0;a<this.cityList.length;a++)if(this.cityList[a].value===e){this.searchParams.city=this.cityList[a].label;break}}},created:function(){this.storeSelectMenu(!1),this.searchParams.activityId=this.$route.params.id,this.dealSearchParam(),this.queryList()},methods:r()({},Object(u.b)("dataCenter",{storeSelectMenu:v.c}),{dealSearchParam:function(){var e=this.$route.query.type;console.log(e),"old"===e?this.searchParams.is_new=0:"new"===e?this.searchParams.is_new=1:"high"===e?this.searchParams.user_level=1:"vip"===e?this.searchParams.user_level=4:"ord"===e?this.searchParams.user_level=3:"potent"===e?this.searchParams.user_level=2:"loss"===e&&(this.searchParams.user_level=5)},goPageDetail:function(e){this.$router.push("/userManage/info/"+e)},changePage:function(e){this.searchParams.page=e,this.queryList()},exportData:function(){var e="?";for(var a in this.searchParams)e+=a+"="+this.searchParams[a]+"&";e=e.substring(0,e.length-1);var t="/api"+o.a.GET_VIEWER_LIST_EXPORT+e;window.open(encodeURI(encodeURI(t)))},queryList:function(){var e=this;return this.$get(o.a.GET_VIEWER_LIST,r()({},this.searchParams)).then(function(a){200===a.code&&(e.viewerList=a.data.list,e.total=a.data.total)})},searchEnter:function(){this.queryList()},cancelClick:function(){this.searchParams={activityId:"",keyword:"",sex:"",user_level:"",is_new:"",province:"",city:"",industry:"",first_join_at:"",last_leave_at:"",device:"",score:"",page:1,pageSize:10}}})},m=(t(839),t(840),t(2)),p=Object(m.a)(d,s,[],!1,null,"5d1403fe",null);p.options.__file="src/pages/data/viewerList.vue";a.default=p.exports}}]);
//# sourceMappingURL=49.e297fba9.js.map