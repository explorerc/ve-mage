{"version":3,"sources":["webpack:///./src/pages/live-mager/email/edit-step-two.vue?ff74","webpack:///./src/pages/live-mager/email/edit-step-two.vue?a8ee","webpack:///src/pages/live-mager/email/edit-step-two.vue","webpack:///./src/pages/live-mager/email/edit-step-two.vue","webpack:///./src/pages/live-mager/css/live.scss?403f","webpack:///./src/pages/live-mager/email/edit-step-two.vue?2914"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","keydown","$event","canPass","click","goBack","_v","_m","attrs","placeholder","error-tips","errorMsg","title","value","email","max-length","update:value","$set","senderName","class","error","groupIds","chooseGroup","_s","totalCountStr","countBalance","tip-type","tip","totalBalance","_e","selectedGroupList","length","name","tag","_l","person","idx","key","id","delGroupPerson","selectedTagList","delTagPerson","from-content","planTime","label","model","sendType","callback","$$v","expression","type","align","default-value","defaultValue","picker-options","pickerOptions","format","value-format","focus","dateFocus","webinarType","show","selectPersonShow","groupList","tagList","checkedData","okSelectList","close","searchEnter","selectedGroupListfn","selectedTagListfn","totalCount","primary-button","fr","disabled","disabledBtn","domProps","innerHTML","send","saveEmail","_withStripped","email_edit_step_twovue_type_script_lang_js_","components","VeMsgTips","ve_msg_tips","com_chooseGroup","data","outValue","isTimer","searchPerson","personList","selectedPersonList","selectedPersonListStr","selectedCount","content","desc","Date","disabledDate","time","getTime","now","activityId","emailInviteId","emailTemplateId","tagIdStr","PC_HOST","location","protocol","selectedGroupListStr","selectedTagListStr","groupIdStr","clicked","computed","Object","vuex_esm","emailInfo","state","watch","handler","newVal","extends_default","immediate","clearError","deep","created","emailId","$route","query","expectNum","$router","go","queryEmailInfo","params","getLimit","initData","methods","storeEmailInfo","mutation_types","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","queryTagList","queryGroupList","reArrangeList","split","tagIds","stop","_this2","$get","activity_service","GET_EMAIL_INFO","then","res","change","handleSelectPerson","e","action","_this3","$messageBox","header","autoClose","confirmText","replace","$post","POST_SAVE_EMAIL_INFO","push","sendEmail","_this4","checkParams","$config","handlers","POST_SEND_TIMER_EMAIL_INFO","catch","st","setTimeout","clearTimeout","POST_SAVE_SEND_EMAIL","_this5","$nextTick","immediatelySend","flag","delIdx","indexOf","isChecked","keyword","_this6","userManage_service","GET_GROUP_LIST","not_empty_field","temArray","list","forEach","item","group_id","count","user_count","_this7","GET_TAG_LIST","tag_name","tag_id","arr","str","idStr","substring","group","_this8","ele","i","_this9","GET_SEND_LIMIT","console","log","balance","total","beforeRouteLeave","to","from","width","cancelText","handleClick","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_live_scss_vue_type_style_index_0_id_c4130fe2_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_edit_step_two_vue_vue_type_style_index_1_id_c4130fe2_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/17.ec817d5c.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"edit-step-box\",\n      on: {\n        keydown: function($event) {\n          _vm.canPass = false\n        }\n      }\n    },\n    [\n      _c(\"header\", { staticClass: \"email-header\" }, [\n        _c(\"div\", { staticClass: \"back-btn\", on: { click: _vm.goBack } }, [\n          _c(\"i\", { staticClass: \"iconfont icon-jiantou\" })\n        ]),\n        _vm._v(\" \"),\n        _c(\"span\", [_vm._v(\"步骤2 发送设置\")])\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"live-mager\" },\n        [\n          _c(\"div\", { staticClass: \"mager-box border-box\" }, [\n            _c(\"div\", { staticClass: \"from-box\" }, [\n              _c(\"div\", { staticClass: \"from-row\" }, [\n                _vm._m(0),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"from-content\" },\n                  [\n                    _c(\"com-input\", {\n                      staticClass: \"input-email\",\n                      attrs: {\n                        placeholder: \"输入标题，可结合变量使用\",\n                        \"error-tips\": _vm.errorMsg.title,\n                        value: _vm.email.title,\n                        \"max-length\": 30\n                      },\n                      on: {\n                        \"update:value\": function($event) {\n                          _vm.$set(_vm.email, \"title\", $event)\n                        }\n                      }\n                    })\n                  ],\n                  1\n                )\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"from-row\" }, [\n                _vm._m(1),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"from-content\" },\n                  [\n                    _c(\"com-input\", {\n                      staticClass: \"input-email\",\n                      attrs: {\n                        placeholder: \"输入发件人名称\",\n                        \"error-tips\": _vm.errorMsg.senderName,\n                        value: _vm.email.senderName,\n                        \"max-length\": 15\n                      },\n                      on: {\n                        \"update:value\": function($event) {\n                          _vm.$set(_vm.email, \"senderName\", $event)\n                        }\n                      }\n                    })\n                  ],\n                  1\n                )\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"from-row\" }, [\n                _vm._m(2),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"from-content\" },\n                  [\n                    _c(\n                      \"div\",\n                      { class: { error: _vm.errorMsg.groupIds } },\n                      [\n                        _c(\n                          \"button\",\n                          {\n                            staticClass: \"default-button fl\",\n                            on: { click: _vm.chooseGroup }\n                          },\n                          [_vm._v(\"选择分组\\n              \")]\n                        ),\n                        _vm._v(\" \"),\n                        _c(\"span\", { staticClass: \"send-span\" }, [\n                          _vm._v(\n                            \"发送限额：\" +\n                              _vm._s(\n                                _vm.totalCountStr ? _vm.totalCountStr : 0\n                              ) +\n                              \"/\" +\n                              _vm._s(_vm.countBalance)\n                          )\n                        ]),\n                        _vm._v(\" \"),\n                        _c(\"ve-msg-tips\", {\n                          class: \"msg-tips\",\n                          attrs: {\n                            \"tip-type\": \"html\",\n                            tip:\n                              \"1.每天最多可发送\" +\n                              this.totalBalance +\n                              \"封邮件 <br/> 2.发送限额：当前已选中人数/剩余可发送数量<br/>3.在邮件发送前，如果分组内人员发生变化，收件人也会随之改变\"\n                          }\n                        }),\n                        _vm._v(\" \"),\n                        _vm.errorMsg.groupIds\n                          ? _c(\"span\", { staticClass: \"error-msg\" }, [\n                              _vm._v(_vm._s(_vm.errorMsg.groupIds))\n                            ])\n                          : _vm._e()\n                      ],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _vm.selectedGroupList.length\n                      ? _c(\n                          \"transition-group\",\n                          {\n                            staticClass: \"edit-groups\",\n                            attrs: { name: \"list\", tag: \"div\" }\n                          },\n                          _vm._l(_vm.selectedGroupList, function(person, idx) {\n                            return _c(\n                              \"span\",\n                              { key: person.id, staticClass: \"list-item\" },\n                              [\n                                _vm._v(\n                                  _vm._s(person.name) + \"\\n                \"\n                                ),\n                                _c(\"i\", {\n                                  staticClass: \"iconfont icon-shanchu\",\n                                  on: {\n                                    click: function($event) {\n                                      _vm.delGroupPerson(idx)\n                                    }\n                                  }\n                                })\n                              ]\n                            )\n                          })\n                        )\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _vm.selectedTagList.length\n                      ? _c(\n                          \"transition-group\",\n                          {\n                            staticClass: \"edit-groups sec\",\n                            attrs: { name: \"list\", tag: \"div\" }\n                          },\n                          _vm._l(_vm.selectedTagList, function(tag, idx) {\n                            return _c(\n                              \"span\",\n                              { key: tag.id, staticClass: \"list-item\" },\n                              [\n                                _vm._v(_vm._s(tag.name) + \"\\n                \"),\n                                _c(\"i\", {\n                                  staticClass: \"iconfont icon-shanchu\",\n                                  on: {\n                                    click: function($event) {\n                                      _vm.delTagPerson(idx)\n                                    }\n                                  }\n                                })\n                              ]\n                            )\n                          })\n                        )\n                      : _vm._e()\n                  ],\n                  1\n                )\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"from-row\" }, [\n                _vm._m(3),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  {\n                    class: {\n                      \"from-content\": true,\n                      error: _vm.errorMsg.planTime\n                    }\n                  },\n                  [\n                    _c(\n                      \"div\",\n                      { staticClass: \"send-type-box\" },\n                      [\n                        _c(\n                          \"el-radio\",\n                          {\n                            attrs: { label: \"AUTO\" },\n                            model: {\n                              value: _vm.sendType,\n                              callback: function($$v) {\n                                _vm.sendType = $$v\n                              },\n                              expression: \"sendType\"\n                            }\n                          },\n                          [_vm._v(\"立即发送\\n              \")]\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"el-radio\",\n                          {\n                            attrs: { label: \"ONCE\" },\n                            model: {\n                              value: _vm.sendType,\n                              callback: function($$v) {\n                                _vm.sendType = $$v\n                              },\n                              expression: \"sendType\"\n                            }\n                          },\n                          [_vm._v(\"定时发送\\n              \")]\n                        )\n                      ],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _vm.sendType == \"ONCE\"\n                      ? _c(\"el-date-picker\", {\n                          attrs: {\n                            type: \"datetime\",\n                            placeholder: \"选择日期时间\",\n                            align: \"center\",\n                            \"default-value\": _vm.defaultValue,\n                            \"picker-options\": _vm.pickerOptions,\n                            format: \"yyyy-MM-dd HH:mm\",\n                            \"value-format\": \"yyyy-MM-dd HH:mm\"\n                          },\n                          on: {\n                            focus: function($event) {\n                              _vm.dateFocus()\n                            }\n                          },\n                          model: {\n                            value: _vm.email.planTime,\n                            callback: function($$v) {\n                              _vm.$set(_vm.email, \"planTime\", $$v)\n                            },\n                            expression: \"email.planTime\"\n                          }\n                        })\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _vm.errorMsg.planTime\n                      ? _c(\"span\", { staticClass: \"error-msg\" }, [\n                          _vm._v(_vm._s(_vm.errorMsg.planTime))\n                        ])\n                      : _vm._e()\n                  ],\n                  1\n                )\n              ])\n            ])\n          ]),\n          _vm._v(\" \"),\n          _c(\"choose-group\", {\n            attrs: {\n              webinarType: \"EMAIL\",\n              show: _vm.selectPersonShow,\n              groupList: _vm.groupList,\n              tagList: _vm.tagList,\n              checkedData: _vm.checkedData\n            },\n            on: {\n              okSelectList: _vm.okSelectList,\n              close: _vm.close,\n              searchEnter: _vm.searchEnter,\n              selectedGroupListfn: _vm.selectedGroupListfn,\n              selectedTagListfn: _vm.selectedTagListfn,\n              totalCount: _vm.totalCount\n            }\n          })\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"email-bottom\" }, [\n        _c(\"button\", {\n          class: {\n            \"primary-button\": true,\n            fr: true,\n            disabled: _vm.disabledBtn\n          },\n          domProps: {\n            innerHTML: _vm._s(_vm.sendType === \"AUTO\" ? \"立即发送\" : \"确定\")\n          },\n          on: { click: _vm.send }\n        }),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          {\n            staticClass: \"default-button margin-fl fr\",\n            on: { click: _vm.saveEmail }\n          },\n          [_vm._v(\"保存草稿\\n    \")]\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          {\n            staticClass: \"default-button margin-fl fr\",\n            on: { click: _vm.goBack }\n          },\n          [_vm._v(\"上一步\")]\n        )\n      ])\n    ]\n  )\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"邮件标题：\")\n    ])\n  },\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"发件人：\")\n    ])\n  },\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"收件人：\")\n    ])\n  },\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"发送时间：\")\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-step-two.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-step-two.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"edit-step-box\" @keydown=\"canPass = false\">\n    <header class=\"email-header\">\n      <div class=\"back-btn\"\n           @click=\"goBack\">\n        <i class=\"iconfont icon-jiantou\"></i>\n      </div>\n      <span>步骤2 发送设置</span>\n    </header>\n    <div class=\"live-mager\">\n      <div class=\"mager-box border-box\">\n        <div class=\"from-box\">\n          <div class=\"from-row\">\n            <div class=\"from-title\"><i class=\"star\">*</i>邮件标题：</div>\n            <div class=\"from-content\">\n              <com-input placeholder=\"输入标题，可结合变量使用\"\n                         class=\"input-email\"\n                         :error-tips=\"errorMsg.title\"\n                         :value.sync=\"email.title\"\n                         :max-length=\"30\"></com-input>\n            </div>\n          </div>\n          <div class=\"from-row\">\n            <div class=\"from-title\"><i class=\"star\">*</i>发件人：</div>\n            <div class=\"from-content\">\n              <com-input placeholder=\"输入发件人名称\"\n                         class=\"input-email\"\n                         :error-tips=\"errorMsg.senderName\"\n                         :value.sync=\"email.senderName\"\n                         :max-length=\"15\"></com-input>\n            </div>\n          </div>\n          <div class=\"from-row\">\n            <div class=\"from-title\"><i class=\"star\">*</i>收件人：</div>\n            <div class=\"from-content\">\n              <div :class=\"{error:errorMsg.groupIds}\">\n                <button class=\"default-button fl\"\n                        @click=\"chooseGroup\">选择分组\n                </button>\n                <span class=\"send-span\">发送限额：{{totalCountStr ? totalCountStr : 0}}/{{countBalance}}</span>\n                <ve-msg-tips :class='\"msg-tips\"' tip-type=\"html\"\n                             :tip=\"`1.每天最多可发送${this.totalBalance}封邮件 <br/> 2.发送限额：当前已选中人数/剩余可发送数量<br/>3.在邮件发送前，如果分组内人员发生变化，收件人也会随之改变`\"></ve-msg-tips>\n                <span class=\"error-msg\"\n                      v-if=\"errorMsg.groupIds\">{{errorMsg.groupIds}}</span>\n              </div>\n              <!-- 分组 -->\n              <transition-group name=\"list\"\n                                class=\"edit-groups\"\n                                tag=\"div\"\n                                v-if=\"selectedGroupList.length\">\n                <span class=\"list-item\"\n                      v-for=\"(person,idx) in selectedGroupList\"\n                      :key=\"person.id\">{{person.name}}\n                  <i class=\"iconfont icon-shanchu\"\n                     @click=\"delGroupPerson(idx)\"></i>\n                </span>\n              </transition-group>\n              <!-- 标签 -->\n              <transition-group name=\"list\"\n                                class=\"edit-groups sec\"\n                                tag=\"div\"\n                                v-if=\"selectedTagList.length\">\n                <span class=\"list-item\"\n                      v-for=\"(tag,idx) in selectedTagList\"\n                      :key=\"tag.id\">{{tag.name}}\n                  <i class=\"iconfont icon-shanchu\"\n                     @click=\"delTagPerson(idx)\"></i>\n                </span>\n              </transition-group>\n            </div>\n          </div>\n          <div class=\"from-row\">\n            <div class=\"from-title\"><i class=\"star\">*</i>发送时间：</div>\n            <div :class=\"{'from-content':true,error:errorMsg.planTime}\">\n              <div class=\"send-type-box\">\n                <el-radio v-model=\"sendType\"\n                          label=\"AUTO\">立即发送\n                </el-radio>\n                <el-radio v-model=\"sendType\"\n                          label=\"ONCE\">定时发送\n                </el-radio>\n              </div>\n              <el-date-picker v-if=\"sendType=='ONCE'\"\n                              v-model=\"email.planTime\"\n                              type=\"datetime\"\n                              placeholder=\"选择日期时间\"\n                              align=\"center\"\n                              :default-value=\"defaultValue\"\n                              :picker-options=\"pickerOptions\"\n                              format=\"yyyy-MM-dd HH:mm\"\n                              value-format=\"yyyy-MM-dd HH:mm\"\n                              @focus='dateFocus()'>\n              </el-date-picker>\n              <span class=\"error-msg\"\n                    v-if=\"errorMsg.planTime\">{{errorMsg.planTime}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- 选择收件人 -->\n      <choose-group :webinarType=\"'EMAIL'\" :show=\"selectPersonShow\" :groupList=\"groupList\" :tagList='tagList'\n                    :checkedData=\"checkedData\" @okSelectList=\"okSelectList\" @close=\"close\" @searchEnter=\"searchEnter\"\n                    @selectedGroupListfn=\"selectedGroupListfn\" @selectedTagListfn=\"selectedTagListfn\"\n                    @totalCount=\"totalCount\"></choose-group>\n    </div>\n    <div class=\"email-bottom\">\n      <button :class=\"{'primary-button':true, fr:true,disabled:disabledBtn}\"\n              @click=\"send\" v-html=\"sendType === 'AUTO'? '立即发送':'确定'\">\n      </button>\n      <button class=\"default-button margin-fl fr\"\n              @click=\"saveEmail\">保存草稿\n      </button>\n      <button class=\"default-button margin-fl fr\" @click=\"goBack\">上一步</button>\n    </div>\n  </div>\n</template>\n\n<script>\n  import userManage from 'src/api/userManage-service'\n  // import noticeService from 'src/api/notice-service'\n  import VeMsgTips from 'src/components/ve-msg-tips'\n  import chooseGroup from '../promote/com-chooseGroup'\n  import activityService from 'src/api/activity-service'\n  import {mapState, mapMutations} from 'vuex'\n  import * as types from '../../../store/mutation-types'\n\n  export default {\n    name: 'edit-step-two',\n    components: {VeMsgTips, chooseGroup},\n    data () {\n      return {\n        outValue: '',\n        isTimer: true,\n        selectPersonShow: false,\n        sendType: 'AUTO',\n        searchPerson: '',\n        personList: [],\n        selectedPersonList: [],\n        selectedPersonListStr: '',\n        selectedCount: 0,\n        disabledBtn: false,\n        canPass: true,\n        errorMsg: {\n          title: '',\n          content: '',\n          desc: '',\n          senderName: '',\n          planTime: '',\n          groupIds: ''\n        },\n        defaultValue: new Date(),\n        pickerOptions: {\n          disabledDate (time) {\n            return time.getTime() < Date.now() - 8.64e7\n          }\n        },\n        email: {\n          activityId: '',\n          emailInviteId: '',\n          emailTemplateId: 1,\n          title: '',\n          content: '',\n          senderName: '',\n          planTime: '',\n          groupIds: '',\n          tagIdStr: ''\n        },\n        PC_HOST: location.protocol + process.env.PC_HOST,\n        groupList: [],\n        tagList: [],\n        checkedData: [],\n        selectedGroupList: [],\n        selectedTagList: [],\n        selectedGroupListStr: '',\n        selectedTagListStr: '',\n        groupIdStr: '',\n        tagIdStr: '',\n        totalCountStr: '',\n        countBalance: 0,\n        clicked: false\n      }\n    },\n    computed: mapState('liveMager', {\n      emailInfo: state => state.emailInfo\n    }),\n    watch: {\n      emailInfo: {\n        handler (newVal) {\n          this.email = {...this.email, ...newVal}\n          this.sendType = this.email.planTime ? 'ONCE' : 'AUTO'\n        },\n        immediate: true\n      },\n      email: {\n        handler () {\n          this.clearError()\n        },\n        deep: true\n      },\n      sendType (newVal) {\n        this.errorMsg.planTime = ''\n        this.email.planTime = ''\n        if (newVal === 'ONCE') {\n          this.defaultValue = new Date(new Date().getTime() + 30 * 60 * 1000)\n        }\n      }\n    },\n    created () {\n      const emailId = this.$route.query.email\n      if (!this.email.content) {\n        if (!emailId) {\n          this.$router.go(-1)\n          return\n        } else {\n          this.queryEmailInfo(emailId)\n        }\n      } else {\n        this.totalCountStr = this.emailInfo.expectNum\n      }\n      this.email.activityId = this.$route.params.id\n      this.getLimit()\n      this.initData()\n      // this.queryTagList()\n      // this.$nextTick((res) => {\n      //   this.queryGroupList()\n      // })\n      // this.$nextTick((res) => {\n      //   this.reArrangeList(this.emailInfo.groupIds ? this.emailInfo.groupIds.split(',') : [], this.emailInfo.tagIds ? this.emailInfo.tagIds.split(',') : [])\n      // })\n    },\n    methods: {\n      ...mapMutations('liveMager', {\n        storeEmailInfo: types.EMAIL_INFO\n      }),\n      async initData () {\n        await this.queryTagList()\n        await this.queryGroupList()\n        await this.reArrangeList(this.emailInfo.groupIds ? this.emailInfo.groupIds.split(',') : [], this.emailInfo.tagIds ? this.emailInfo.tagIds.split(',') : [])\n      },\n      chooseGroup () {\n        this.selectPersonShow = true\n        this.clicked = true\n      },\n      /* 清除错误信息 */\n      clearError () {\n        if (this.email.title) {\n          this.errorMsg.title = ''\n        } else {\n          return\n        }\n        if (this.email.planTime) {\n          this.errorMsg.planTime = ''\n        } else {\n          return\n        }\n        if (this.email.senderName) {\n          this.errorMsg.senderName = ''\n        } else {\n          return\n        }\n        if (this.email.groupIds) {\n          this.errorMsg.groupIds = ''\n        } else {\n          return\n        }\n        if (this.email.desc) {\n          this.errorMsg.desc = ''\n        } else {\n          return\n        }\n        if (this.email.content) {\n          this.errorMsg.content = ''\n        }\n      },\n      /* 查询邮件详情 */\n      queryEmailInfo (emailId) {\n        // 如果不是编辑页面就return\n        if (!emailId) return\n        this.$get(activityService.GET_EMAIL_INFO, {\n          emailInviteId: emailId\n        }).then((res) => {\n          this.email = res.data\n          this.storeEmailInfo(this.email)\n          this.totalCountStr = this.emailInfo.expectNum\n        })\n      },\n      /* enter搜索 */\n      // searchEnter () {\n      //   this.queryPersonList()\n      // },\n      /* 点击确定 */\n      okSelectList () {\n        this.selectPersonShow = false\n        this.email.change = 1\n        if (this.email.groupIds) {\n          this.errorMsg.groupIds = ''\n        }\n      },\n      /* 点击取消 */\n      handleSelectPerson (e) {\n        if (e.action === 'cancel') {\n          this.selectPersonShow = false\n        }\n      },\n      saveEmail () {\n        if (this.totalCountStr > this.countBalance) {\n          this.$messageBox({\n            header: '提示',\n            content: '邮件可发送数量已超过发送限额',\n            autoClose: 10,\n            confirmText: '知道了'\n          })\n          return false\n        }\n        this.canPass = true\n        this.email.content = this.email.content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\n        this.$post(activityService.POST_SAVE_EMAIL_INFO, this.email).then((res) => {\n          // this.email = {...this.email, ...res.data}\n          // this.storeEmailInfo(this.email)\n          // this.$router.replace(`/liveMager/emailEditTwo/${this.email.activityId}?email=${this.email.emailInviteId}`)\n          // this.$toast({\n          //   content: '保存草稿成功',\n          //   position: 'center'\n          // })\n          this.$router.push(`/liveMager/email/${this.email.activityId}`)\n        })\n      },\n      sendEmail () {\n        this.canPass = true\n        if (this.isTimer && !this.email.planTime) {\n          this.errorMsg.planTime = '定时时间不能为空'\n          this.disabledBtn = false\n          return\n        }\n        if (!this.checkParams(this.isTimer)) {\n          this.disabledBtn = false\n          return\n        }\n        this.email.content = this.email.content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\n        if (this.isTimer) { // 发送定时邮件\n          this.$config({handlers: true}).$post(activityService.POST_SEND_TIMER_EMAIL_INFO, this.email).then((res) => {\n            this.$router.push(`/liveMager/email/${this.email.activityId}`)\n            this.disabledBtn = false\n          }).catch((e) => {\n            let st = setTimeout(() => {\n              clearTimeout(st)\n              this.disabledBtn = false\n            }, 2000)\n          })\n        } else { // 保存并发送\n          this.$post(activityService.POST_SAVE_SEND_EMAIL, this.email).then((res) => {\n            this.$router.push(`/liveMager/email/${this.email.activityId}`)\n            this.disabledBtn = false\n          })\n        }\n      },\n      send () {\n        if (this.totalCountStr > this.countBalance) {\n          this.$messageBox({\n            header: '提示',\n            content: '邮件可发送数量已超过发送限额',\n            autoClose: 10,\n            confirmText: '知道了'\n          })\n          return false\n        }\n        this.canPass = true\n        this.disabledBtn = true\n        this.$nextTick(() => {\n          if (this.sendType === 'AUTO') {\n            this.isTimer = false\n            this.immediatelySend()\n          } else if (this.sendType === 'ONCE') {\n            this.isTimer = true\n            this.sendEmail()\n          }\n        })\n      },\n      immediatelySend () {\n        this.email.planTime = ''\n        this.isTimer = false\n        this.sendEmail()\n      },\n      checkParams () {\n        this.errorMsg = {\n          title: '',\n          content: '',\n          senderName: '',\n          planTime: ''\n        }\n        if (!this.email.title) {\n          this.errorMsg.title = '标题不能为空'\n          return false\n        } else if (!this.email.senderName) {\n          this.errorMsg.senderName = '发件人不能为空'\n          return false\n        } else if (!this.email.groupIds && !this.email.tagIds) {\n          this.errorMsg.groupIds = '请选择收件人'\n          return false\n        }\n        return true\n      },\n      goBack () {\n        this.storeEmailInfo(this.email)\n        this.$router.go(-1)\n      },\n      /* enter搜索 */\n      searchEnter (key, flag) {\n        if (flag === 'group') {\n          this.queryGroupList(key)\n        } else {\n          this.queryTagList(key)\n        }\n      },\n      /* 点击取消 */\n      close () {\n        this.selectPersonShow = false\n      },\n      /* 删除分组 */\n      delGroupPerson (idx) {\n        const delIdx = this.groupList.indexOf(this.selectedGroupList[idx])\n        this.groupList[delIdx].isChecked = false\n        this.email.change = 1\n      },\n      // 标签\n      delTagPerson (idx) {\n        const delIdx = this.tagList.indexOf(this.selectedTagList[idx])\n        this.tagList[delIdx].isChecked = false\n        this.email.change = 1\n      },\n      // 查询群组\n      queryGroupList (keyword) {\n        return this.$get(userManage.GET_GROUP_LIST, {\n          keyword: keyword,\n          not_empty_field: 'email'\n        }).then((res) => {\n          let temArray = []\n          res.data.list.forEach((item) => {\n            temArray.push({\n              id: item.group_id,\n              name: item.title,\n              count: item.user_count,\n              isChecked: false\n            })\n          })\n          this.groupList = temArray\n          this.email.groupList = this.groupList\n        })\n      },\n      /* 查询标签 */\n      queryTagList (key) {\n        return this.$get(userManage.GET_TAG_LIST, {\n          keyword: key\n        }).then((res) => {\n          let temArray = []\n          res.data.list.forEach(item => {\n            temArray.push({\n              name: item.tag_name,\n              id: item.tag_id,\n              count: item.user_count,\n              isChecked: false\n            })\n          })\n          this.tagList = temArray\n          this.email.tagList = this.tagList\n        })\n      },\n      selectedGroupListfn (arr, str, idStr) {\n        this.selectedGroupListStr = str.substring(0, str.length - 1)\n        this.selectedGroupList = arr\n        this.email.groupIds = idStr // 分组id\n      },\n      selectedTagListfn (arr, str, idStr) {\n        this.selectedTagListStr = str.substring(0, str.length - 1)\n        this.selectedTagList = arr\n        this.email.tagIds = idStr // 标签id\n      },\n      totalCount (res) {\n        if (this.clicked) {\n          this.totalCountStr = res\n        }\n      },\n      reArrangeList (group, tag) {\n        this.groupList.forEach((item, idx) => {\n          group.forEach((ele, i) => {\n            if (ele * 1 === item.id) {\n              this.groupList[idx].isChecked = true\n              this.selectedGroupList.push({\n                count: item.count,\n                id: item.id,\n                isChecked: true,\n                name: item.name\n              })\n            }\n          })\n        })\n        this.email.selectedGroupList = this.selectedGroupList\n        this.tagList.forEach((item, idx) => {\n          tag.forEach((ele, i) => {\n            if (ele * 1 === item.id) {\n              this.tagList[idx].isChecked = true\n              this.selectedTagList.push({\n                count: item.count,\n                id: item.id,\n                isChecked: true,\n                name: item.name\n              })\n            }\n          })\n        })\n        this.email.selectedTagList = this.selectedTagList\n      },\n      // 获取限额\n      getLimit () {\n        this.$get(activityService.GET_SEND_LIMIT, {\n          activityId: this.email.activityId,\n          type: 'EMAIL'\n        }).then((res) => {\n          console.log(res)\n          this.countBalance = res.data.balance\n          this.totalBalance = res.data.total\n        })\n      },\n      dateFocus () {\n        this.email.planTime = new Date(this.defaultValue).format('yyyy-MM-dd hh:mm')\n      }\n    },\n    /* 路由守卫，离开当前页面之前被调用 */\n    beforeRouteLeave (to, from, next) {\n      if (this.canPass) {\n        next(true)\n        return false\n      }\n      this.$messageBox({\n        header: '提示',\n        width: '400px',\n        content: '是否放弃当前编辑？',\n        cancelText: '否',\n        confirmText: '是',\n        handleClick: (e) => {\n          if (e.action === 'confirm') {\n            next(true)\n          } else {\n            next(false)\n          }\n        }\n      })\n    }\n  }\n</script>\n<style lang=\"scss\" scoped src=\"../css/live.scss\"></style>\n<style lang=\"scss\" scoped>\n.edit-step-box {\n  .msg-tips {\n    top: 4px;\n  }\n  background-color: #f5f5f5;\n  .send-span {\n    display: inline-block;\n    height: 40px;\n    line-height: 40px;\n    margin: 0 15px;\n    color: #888;\n  }\n  .email-header {\n    height: 60px;\n    line-height: 60px;\n    background-color: #ffd021;\n    .icon-jiantou {\n      font-size: 22px;\n      vertical-align: -2px;\n    }\n    .back-btn {\n      display: inline-block;\n      padding: 0 15px;\n      background-color: #ffda51;\n      line-height: 40px;\n      border-radius: 4px;\n      font-size: 18px;\n      text-align: center;\n      margin-left: 20px;\n      margin-right: 10px;\n      &:hover {\n        cursor: pointer;\n        opacity: 0.9;\n        color: #4b5afe;\n      }\n    }\n  }\n  .live-mager {\n    padding-bottom: 0;\n    height: calc(100vh - 120px);\n    overflow: hidden;\n    .border-box {\n      margin-top: 50px;\n      height: 2000px;\n    }\n  }\n  .email-bottom {\n    height: 60px;\n    width: 100%;\n    line-height: 60px;\n    border-top: 1px solid #e2e2e2;\n    box-sizing: border-box;\n    box-shadow: 0 0 4px rgba(0, 0, 0, 0.1);\n    padding: 0 20px;\n    background-color: #fff;\n    button {\n      width: 120px;\n      margin-top: 10px;\n    }\n    .margin-fl {\n      margin-right: 10px;\n    }\n  }\n  .send-type-box {\n    height: 30px;\n    margin-top: 13px;\n  }\n  .msg-box {\n    z-index: 1000;\n  }\n  .step-btns {\n    margin: 30px 30px 100px 30px;\n    .margin-fl {\n      margin: 0 20px;\n    }\n  }\n  .input-email {\n    width: 400px;\n  }\n  .msg-box-bottom {\n    height: 40px;\n    .email-timer {\n      display: inline-block;\n      margin-right: 23px;\n    }\n    .error-msg {\n      display: block;\n      position: absolute;\n      color: #fc5659;\n      font-size: 14px;\n    }\n  }\n  .from-title {\n    line-height: 40px;\n  }\n  .edit-groups {\n    margin-top: 30px;\n    // width: 500px;\n    display: inline-block;\n    &:nth-of-type(1) {\n      margin-top: 0px;\n    }\n    span {\n      display: inline-block;\n      background-color: #f0f1fe;\n      border-radius: 17px;\n      padding: 8px 10px;\n      margin-right: 10px;\n      margin-bottom: 10px;\n      i {\n        color: #4b5afe;\n        &:hover {\n          cursor: pointer;\n          opacity: 0.8;\n        }\n      }\n    }\n  }\n}\n</style>\n","import { render, staticRenderFns } from \"./edit-step-two.vue?vue&type=template&id=c4130fe2&scoped=true&\"\nimport script from \"./edit-step-two.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-step-two.vue?vue&type=script&lang=js&\"\nimport style0 from \"../css/live.scss?vue&type=style&index=0&id=c4130fe2&lang=scss&scoped=true&\"\nimport style1 from \"./edit-step-two.vue?vue&type=style&index=1&id=c4130fe2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c4130fe2\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/chenqi/Desktop/Wswork/fe_management/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('c4130fe2', component.options)\n    } else {\n      api.reload('c4130fe2', component.options)\n    }\n    module.hot.accept(\"./edit-step-two.vue?vue&type=template&id=c4130fe2&scoped=true&\", function () {\n      api.rerender('c4130fe2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/live-mager/email/edit-step-two.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=c4130fe2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=c4130fe2&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-step-two.vue?vue&type=style&index=1&id=c4130fe2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-step-two.vue?vue&type=style&index=1&id=c4130fe2&lang=scss&scoped=true&\""],"sourceRoot":""}