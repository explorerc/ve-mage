{"version":3,"sources":["webpack:///./src/pages/live-mager/email/index.vue?0f80","webpack:///src/pages/live-mager/email/index.vue","webpack:///./src/pages/live-mager/email/index.vue?42a3","webpack:///./src/pages/live-mager/email/index.vue","webpack:///./src/pages/live-mager/css/live.scss?abee","webpack:///./src/pages/live-mager/email/index.vue?5119"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","class","emailList","length","on","click","addEmail","_s","countBalance","countTotal","_e","directives","name","rawName","value","loading","expression","staticStyle","padding-top","width","attrs","data","prop","label","scopedSlots","_u","key","fn","scope","row","status","statusName","$event","stopPropagation","clickEmail","$index","handleType","info","delete","total","pageSize","changePage","_withStripped","send","edit","statusType","DRAFT","SEND","AWAIT","FAIL","live_mager_emailvue_type_script_lang_js_","components","VePagination","ve_pagination","currentPage","activeId","sendShow","currentEmailIdx","activityId","emailInviteId","title","content","desc","planTime","sendTime","senderName","sendCount","computed","currentEmail","created","queryId","$route","params","id","$router","go","getLimit","queryEmailListById","methods","extends_default","Object","vuex_esm","storeEmailInfo","mutation_types","_this","$get","activity_service","GET_EMAIL_LIST","page","then","res","list","map","dataItem","idx","type","_this2","queryInfoEmail","editEmail","$messageBox","header","cancelText","confirmText","handleClick","e","action","delEmail","email","push","sendEmail","$post","POST_SEND_EMAIL_INFO","console","log","handleClickSendEmail","_this3","emaiId","POST_DEL_EMAIL","_this4","GET_SEND_LIMIT","balance","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_live_scss_vue_type_style_index_0_id_6533cfb3_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_node_modules_sass_loader_lib_loader_js_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_1_id_6533cfb3_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__"],"mappings":"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","file":"static/js/15.c1f68303.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"live-mager email-box\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"live-title\" },\n      [\n        _c(\"span\", { staticClass: \"title\" }, [_vm._v(\"邮件邀约\")]),\n        _vm._v(\" \"),\n        _c(\"com-back\", { class: \"back-btn\" }),\n        _vm._v(\" \"),\n        _vm.emailList.length\n          ? [\n              _c(\n                \"button\",\n                {\n                  staticClass: \"default-button fr\",\n                  on: { click: _vm.addEmail }\n                },\n                [_vm._v(\"新建邮件\")]\n              ),\n              _vm._v(\" \"),\n              _c(\"span\", { staticClass: \"send-box fr\" }, [\n                _vm._v(\n                  \"发送限额：\" +\n                    _vm._s(_vm.countBalance) +\n                    \"/\" +\n                    _vm._s(_vm.countTotal)\n                )\n              ])\n            ]\n          : _vm._e()\n      ],\n      2\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      {\n        directives: [\n          {\n            name: \"ComLoading\",\n            rawName: \"v-ComLoading\",\n            value: _vm.loading,\n            expression: \"loading\"\n          }\n        ],\n        staticClass: \"email-table-box\"\n      },\n      [\n        _c(\"div\", { staticClass: \"tip-box\" }, [\n          _vm._v(\n            \"\\n      通过邮件邀约，定制邀约邮件，邀请特定客户群参加直播活动\\n    \"\n          )\n        ]),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          {\n            staticClass: \"table-list-box\",\n            staticStyle: { \"padding-top\": \"20px\" }\n          },\n          [\n            _vm.emailList.length\n              ? [\n                  _c(\n                    \"el-table\",\n                    {\n                      staticStyle: { width: \"100%\" },\n                      attrs: { data: _vm.emailList }\n                    },\n                    [\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"title\", label: \"邮件标题\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"sendTime\", label: \"发送时间\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"sendCount\", label: \"发送数量\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"statusName\", label: \"状态\" },\n                        scopedSlots: _vm._u([\n                          {\n                            key: \"default\",\n                            fn: function(scope) {\n                              return [\n                                scope.row.status == \"DRAFT\"\n                                  ? _c(\"span\", { staticClass: \"cg-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"SEND\"\n                                  ? _c(\"span\", { staticClass: \"fs-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"AWAIT\"\n                                  ? _c(\"span\", { staticClass: \"dd-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"FAIL\"\n                                  ? _c(\"span\", { staticClass: \"del-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e()\n                              ]\n                            }\n                          }\n                        ])\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { label: \"操作\" },\n                        scopedSlots: _vm._u([\n                          {\n                            key: \"default\",\n                            fn: function(scope) {\n                              return [\n                                _c(\"div\", { staticClass: \"table-handler\" }, [\n                                  _c(\n                                    \"span\",\n                                    {\n                                      on: {\n                                        click: function($event) {\n                                          $event.stopPropagation()\n                                          _vm.clickEmail(\n                                            scope.$index,\n                                            _vm.handleType.info\n                                          )\n                                        }\n                                      }\n                                    },\n                                    [_vm._v(\"查看\")]\n                                  ),\n                                  _vm._v(\" \"),\n                                  _vm.emailList[scope.$index].status !== \"SEND\"\n                                    ? _c(\n                                        \"span\",\n                                        {\n                                          on: {\n                                            click: function($event) {\n                                              $event.stopPropagation()\n                                              _vm.clickEmail(\n                                                scope.$index,\n                                                _vm.handleType.delete\n                                              )\n                                            }\n                                          }\n                                        },\n                                        [_vm._v(\"删除\")]\n                                      )\n                                    : _vm._e()\n                                ])\n                              ]\n                            }\n                          }\n                        ])\n                      })\n                    ],\n                    1\n                  )\n                ]\n              : [\n                  _c(\n                    \"div\",\n                    { staticClass: \"empty\" },\n                    [\n                      _c(\"div\", { staticClass: \"img\" }),\n                      _vm._v(\" \"),\n                      _c(\"div\", { staticClass: \"txt\" }, [\n                        _vm._v(\"您还没有添加邮件邀约，快去添加吧\")\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\n                        \"el-button\",\n                        {\n                          staticClass: \"primary-button\",\n                          on: { click: _vm.addEmail }\n                        },\n                        [_vm._v(\"新建邮件\")]\n                      )\n                    ],\n                    1\n                  )\n                ]\n          ],\n          2\n        ),\n        _vm._v(\" \"),\n        _vm.emailList.length\n          ? _c(\"div\", { staticClass: \"pagination-box\" }, [\n              _c(\n                \"div\",\n                { staticClass: \"page-pagination\" },\n                [\n                  _c(\"ve-pagination\", {\n                    attrs: { total: _vm.total, pageSize: _vm.pageSize },\n                    on: { changePage: _vm.changePage }\n                  })\n                ],\n                1\n              )\n            ])\n          : _vm._e()\n      ]\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"live-mager email-box\">\r\n    <div class=\"live-title\">\r\n      <span class=\"title\">邮件邀约</span>\r\n      <com-back :class='\"back-btn\"'></com-back>\r\n      <template v-if='emailList.length'>\r\n        <button class=\"default-button fr\"\r\n                @click=\"addEmail\">新建邮件</button>\r\n        <span class=\"send-box fr\">发送限额：{{countBalance}}/{{countTotal}}</span>\r\n      </template>\r\n    </div>\r\n    <div class=\"email-table-box\"\r\n         v-ComLoading=\"loading\">\r\n      <div class=\"tip-box\">\r\n        通过邮件邀约，定制邀约邮件，邀请特定客户群参加直播活动\r\n      </div>\r\n      <div class=\"table-list-box\"\r\n           style=\"padding-top: 20px;\">\r\n           <template v-if='emailList.length'>\r\n            <el-table :data=\"emailList\"\r\n                      style=\"width: 100%\">\r\n              <el-table-column prop=\"title\"\r\n                              label=\"邮件标题\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"sendTime\"\r\n                              label=\"发送时间\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"sendCount\"\r\n                              label=\"发送数量\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"statusName\"\r\n                              label=\"状态\">\r\n                <template slot-scope=\"scope\">\r\n                  <span v-if=\"scope.row.status=='DRAFT'\"\r\n                        class=\"cg-status\">{{scope.row.statusName}}</span>\r\n                  <span v-if=\"scope.row.status=='SEND'\"\r\n                        class=\"fs-status\">{{scope.row.statusName}}</span>\r\n                  <span v-if=\"scope.row.status=='AWAIT'\"\r\n                        class=\"dd-status\">{{scope.row.statusName}}</span>\r\n                  <span v-if=\"scope.row.status=='FAIL'\"\r\n                        class=\"del-status\">{{scope.row.statusName}}</span>\r\n                  <!--DRAFT: '草稿',-->\r\n                  <!--SEND: '已发送',-->\r\n                  <!--AWAIT: '等待发送'-->\r\n                  <!--v-if=\"scope.row.status=='DRAFT'\"-->\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.info)\">查看</el-button>-->\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--v-if=\"emailList[scope.$index].status==='DRAFT'\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.send)\" disabled>立刻发送</el-button>-->\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--v-else-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.send)\">立刻发送</el-button>-->\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--v-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.edit)\">编辑</el-button>-->\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--v-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.delete)\">删除</el-button>-->\r\n                  <div class=\"table-handler\">\r\n                    <span @click.stop=\"clickEmail(scope.$index,handleType.info)\">查看</span>\r\n                    <span v-if=\"emailList[scope.$index].status!=='SEND'\"\r\n                          @click.stop=\"clickEmail(scope.$index,handleType.delete)\">删除</span>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n           </template>\r\n           <template v-else>\r\n            <div class=\"empty\">\r\n              <div class=\"img\"></div>\r\n              <div class=\"txt\">您还没有添加邮件邀约，快去添加吧</div>\r\n              <el-button class='primary-button' @click=\"addEmail\">新建邮件</el-button>\r\n            </div>\r\n           </template>\r\n      </div>\r\n      <div class=\"pagination-box\" v-if='emailList.length'>\r\n        <div class=\"page-pagination\">\r\n          <ve-pagination :total=\"total\"\r\n                         :pageSize=\"pageSize\"\r\n                         @changePage=\"changePage\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--<message-box-->\r\n    <!--v-if=\"sendShow\"-->\r\n    <!--width=\"500px\"-->\r\n    <!--header=\"邮件推送确认\"-->\r\n    <!--confirmText='确认发送'-->\r\n    <!--@handleClick=\"handleClickSendEmail\">-->\r\n    <!--<div class=\"email-info\">-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>邮件标题：</span>-->\r\n    <!--<span>{{currentEmail.title}}</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>发件人：</span>-->\r\n    <!--<span>*****</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>收件人：</span>-->\r\n    <!--<span>666</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>邮件摘要：</span>-->\r\n    <!--<span>***********************************************************</span>-->\r\n    <!--</div>-->\r\n    <!--</div>-->\r\n    <!--</message-box>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport activityService from 'src/api/activity-service'\r\nimport VePagination from 'src/components/ve-pagination'\r\nimport { mapMutations } from 'vuex'\r\nimport * as types from '../../../store/mutation-types'\r\n\r\nconst handleType = {\r\n  info: 'queryInfoEmail',\r\n  send: 'sendEmail',\r\n  edit: 'editEmail',\r\n  delete: 'deleteEmail'\r\n}\r\nconst statusType = {\r\n  DRAFT: '草稿',\r\n  SEND: '已发送',\r\n  AWAIT: '等待发送',\r\n  FAIL: '发送失败'\r\n}\r\nexport default {\r\n  name: 'index',\r\n  components: { VePagination },\r\n  data () {\r\n    return {\r\n      pageSize: 10,\r\n      total: 0,\r\n      currentPage: 1,\r\n      activeId: '', // 活动id\r\n      sendShow: false,\r\n      currentEmailIdx: '',\r\n      handleType: handleType,\r\n      loading: false,\r\n      emailList: [\r\n        {\r\n          activityId: 0,\r\n          emailInviteId: 0,\r\n          title: '',\r\n          content: '',\r\n          desc: '',\r\n          planTime: '',\r\n          sendTime: '',\r\n          senderName: '',\r\n          sendCount: 0,\r\n          status: '',\r\n          statusName: ''\r\n        }\r\n      ],\r\n      countTotal: 0,\r\n      countBalance: 0\r\n    }\r\n  },\r\n  computed: {\r\n    currentEmail () {\r\n      return this.emailList[this.currentEmailIdx]\r\n    }\r\n  },\r\n  created () {\r\n    const queryId = this.$route.params.id\r\n    if (!queryId) {\r\n      this.$router.go(-1)\r\n    }\r\n    this.activeId = queryId\r\n    this.getLimit()\r\n    this.queryEmailListById()\r\n  },\r\n  methods: {\r\n    ...mapMutations('liveMager', {\r\n      storeEmailInfo: types.EMAIL_INFO\r\n    }),\r\n    changePage (currentPage) {\r\n      this.currentPage = currentPage\r\n      this.queryEmailListById()\r\n    },\r\n    queryEmailListById () {\r\n      // this.loading = true\r\n      this.$get(activityService.GET_EMAIL_LIST, {\r\n        activityId: this.activeId,\r\n        pageSize: this.pageSize,\r\n        page: this.currentPage\r\n      }).then((res) => {\r\n        res.data.list.map((dataItem) => {\r\n          dataItem.statusName = statusType[dataItem.status]\r\n          dataItem.sendTime = dataItem.sendTime || '--'\r\n          dataItem.title = dataItem.title || '--'\r\n          return dataItem\r\n        })\r\n        this.total = res.data.total\r\n        this.emailList = res.data.list\r\n      })\r\n    },\r\n    clickEmail (idx, type) {\r\n      this.currentEmailIdx = idx\r\n      if (type === this.handleType.info) { // 查看\r\n        this.queryInfoEmail()\r\n      } else if (type === this.handleType.edit) { // 编辑\r\n        this.editEmail()\r\n      } else if (type === this.handleType.send) { // 立即发送\r\n        this.sendShow = true\r\n      } else if (type === this.handleType.delete) { // 删除\r\n        this.$messageBox({\r\n          header: '',\r\n          content: '删除邮件后，邮件内容将无法找回，确认删除？',\r\n          cancelText: '取消',\r\n          confirmText: '删除',\r\n          width: '400px',\r\n          handleClick: (e) => {\r\n            if (e.action === 'confirm') {\r\n              this.delEmail()\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    queryInfoEmail () {\r\n      const email = this.emailList[this.currentEmailIdx]\r\n      // this.storeEmailInfo(email)\r\n      this.$router.push(`/liveMager/emailInfo/${this.activeId}?email=${email.emailInviteId}`)\r\n    },\r\n    sendEmail () {\r\n      this.$post(activityService.POST_SEND_EMAIL_INFO, {\r\n        emailInviteId: this.emailList[this.currentEmailIdx].emailInviteId\r\n      }).then((res) => {\r\n        console.log('邮件发送成功')\r\n        console.log(res)\r\n      })\r\n      // LiveHttp.sendEmailInfo({\r\n      //   emailInviteId: this.emailList[this.currentEmailIdx].emailInviteId\r\n      // }).then((res) => {\r\n      //   console.log('邮件发送成功')\r\n      //   console.log(res)\r\n      // }).catch((e) => {\r\n      //   console.log('邮件发送失败')\r\n      //   console.log(e)\r\n      // })\r\n    },\r\n    handleClickSendEmail (e) {\r\n      this.sendShow = false\r\n      if (e.action === 'confirm') {\r\n        this.sendEmail()\r\n      }\r\n    },\r\n    delEmail () {\r\n      const emaiId = this.emailList[this.currentEmailIdx].emailInviteId\r\n      this.$post(activityService.POST_DEL_EMAIL, {\r\n        emailInviteId: emaiId\r\n      }).then((res) => {\r\n        this.queryEmailListById()\r\n      })\r\n      // LiveHttp.deleteEmailById(emaiId).then((res) => {\r\n      //   if (res.code === 200) {\r\n      //     this.queryEmailListById()\r\n      //   }\r\n      // }).catch((e) => {\r\n      //   console.log('删除邮件失败')\r\n      //   console.log(e)\r\n      // })\r\n    },\r\n    editEmail () {\r\n      const email = this.emailList[this.currentEmailIdx]\r\n      this.storeEmailInfo(email)\r\n      this.$router.push(`/liveMager/emailEdit/${this.activeId}?email=${email.emailInviteId}`)\r\n    },\r\n    addEmail () {\r\n      this.$router.push(`/liveMager/emailEditOne/${this.activeId}`)\r\n    },\r\n    getLimit () {\r\n      this.$get(activityService.GET_SEND_LIMIT, {\r\n        activityId: this.activeId,\r\n        type: 'EMAIL'\r\n      }).then((res) => {\r\n        console.log(res)\r\n        this.countBalance = res.data.balance\r\n        this.countTotal = res.data.total\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped src=\"../css/live.scss\"></style>\r\n<style lang=\"scss\" scoped>\r\n@import '~assets/css/mixin.scss';\r\n.back-btn {\r\n  margin: 0 0 0 10px !important;\r\n}\r\n.email-table-box {\r\n  font-size: 14px;\r\n}\r\n\r\n.send-box {\r\n  display: inline-block;\r\n  color: #888;\r\n  font-size: 14px;\r\n  line-height: 44px;\r\n  margin-right: 20px;\r\n}\r\n\r\n.cg-status {\r\n  color: #1bcab7;\r\n}\r\n\r\n.fs-status {\r\n  color: #4b5afe;\r\n}\r\n\r\n.dd-status {\r\n  color: #ff8b0e;\r\n}\r\n\r\n.del-status {\r\n  color: #fc5659;\r\n}\r\n\r\n.email-box {\r\n  margin-top: 20px;\r\n}\r\n.table-list-box {\r\n  .empty {\r\n    text-align: center;\r\n    margin: 100px 0;\r\n    .txt {\r\n      padding-top: 20px;\r\n      font-size: 16px;\r\n      color: $color-font;\r\n    }\r\n    .img {\r\n      width: 180px;\r\n      height: 180px;\r\n      margin: 0 auto;\r\n      background: url('~assets/image/email_empty.png') no-repeat center;\r\n      background-size: contain;\r\n    }\r\n    .el-button {\r\n      padding: 0;\r\n      width: 220px;\r\n      height: 40px;\r\n      text-align: center;\r\n      line-height: 40px;\r\n      margin-top: 20px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6533cfb3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"../css/live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6533cfb3\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\work\\\\saas营销\\\\fe_management\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6533cfb3', component.options)\n    } else {\n      api.reload('6533cfb3', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=6533cfb3&scoped=true&\", function () {\n      api.rerender('6533cfb3', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/live-mager/email/index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js!../../../../node_modules/css-loader/index.js!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/lib/index.js!../../../../node_modules/sass-loader/lib/loader.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\""],"sourceRoot":""}