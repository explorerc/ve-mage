(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{258:function(t,e,i){},380:function(t,e,i){"use strict";var n=i(258);i.n(n).a},551:function(t,e,i){"use strict";i.r(e);var n=i(227),a=i.n(n),r=i(228),s=i.n(r),o=i(111),h=i.n(o),l=i(52),u=i.n(l),c=i(76),d=i.n(c),f=i(229),p=i.n(f),v=i(231),y=i.n(v),g=i(230),_=i.n(g),m=function(){function t(){a()(this,t)}return s()(t,[{key:"linear",value:function(t,e,i,n){return i*t/n+e}},{key:"quart",value:function(t){for(var e={linear:this.linear,easeIn:function(t,e,i,n){return i*(t/=n)*t+e},easeOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return!!e[t]&&e[t].apply(e,n)}},{key:"quad",value:function(t){for(var e={linear:this.linear,easeIn:function(t,e,i,n){return i*(t/=n)*t+e},easeOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}},i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return!!e[t]&&e[t].apply(e,n)}},{key:"cubic",value:function(t){for(var e={linear:this.linear,easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}},i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return!!e[t]&&e[t].apply(e,n)}},{key:"quint",value:function(t){for(var e={linear:this.linear,easeIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}},i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return!!e[t]&&e[t].apply(e,n)}}]),t}(),w=m;m.prototype.Linear="linear",m.prototype.EaseIn="easeIn",m.prototype.EaseOut="easeOut",m.prototype.EaseInOut="easeInOut";var b=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a()(this,e);var n=p()(this,(e.__proto__||d()(e)).call(this,t,i));return n.type="NORMAL-RENDERER",n.itemPool=[],n.tweenType=i.tweenType||"quad",n.tweenMethod=i.tweenMethod||n.tween.Linear,n.duration=i.duration||5e3,n.offsetYPercent=i.offsetYPercent||.1,n.fillPercent=i.fillPercent||.8,n.changeStyle(i),n._calcRow(),n}return _()(e,t),s()(e,[{key:"changeStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.globalHeight=t.fontSize||this.globalHeight||18,this.globalFamily=t.fontFamily||this.globalFamily||"Microsoft YaHei",this.globalStyle=t.fontColor||this.globalStyle||"#ffffff",this.opacity=t.opacity||this.opacity||1,this.gap=t.gap||this.gap||3,this.globalChanged=!0}},{key:"update",value:function(t,i,n){if(y()(e.prototype.__proto__||d()(e.prototype),"update",this).call(this,t,i,n),this.globalChanged&&this.initStyle(),!this._pause){this.ctx.clearRect(0,0,t,i),this.ctx.save();for(var a=this.data.length,r=0;r<a;r++){var s=this.data[r];s&&(s.elapsedTime+=n,s.x=this.tween[this.tweenType](this.tweenMethod,s.elapsedTime,t,-s.width-t,s.duration),this.ctx.fillStyle=s.fillStyle,s.x<-s.width?(this._recycle(s),this.data.splice(r,1),a--):this.ctx.fillText(s.data,s.x,s.y))}this.ctx.restore()}}},{key:"initStyle",value:function(){y()(e.prototype.__proto__||d()(e.prototype),"initStyle",this).call(this),this.globalChanged=!1,this._mergeFont(),this.ctx.font=this.globalFont,this.ctx.textBaseline="middle",this.ctx.fillStyle=this.globalColor,this.ctx.globalAlpha=this.opacity}},{key:"add",value:function(t,i){y()(e.prototype.__proto__||d()(e.prototype),"add",this).call(this,t,i);var n=this.itemPool.length>0?this.itemPool.shift():{};u()(n,i),this.ctx&&(n.width=this.ctx.measureText(t).width||200),n.elapsedTime=0,n.data=t,n.height=this.globalHeight,n.duration=this.duration-Math.random()*this.duration/3>>0,n.fillStyle=i.fillStyle||this.globalStyle,n.y=this._randomRow(),this._data.push(n)}},{key:"destroy",value:function(){y()(e.prototype.__proto__||d()(e.prototype),"destory",this).call(this),this.itemPool=[],this._data=[]}},{key:"_mergeFont",value:function(){this.globalFont=this.globalHeight+"px "+this.globalFamily}},{key:"_recycle",value:function(t){t.elapsedTime=0,t.width=0,t.height=0,t.data="",t.x=0,t.y=0,t.row=-1,t.duration=0,t.fillStyle="",this.itemPool.push(t)}},{key:"_calcRow",value:function(){var t=this.height*this.fillPercent;this.totalRows=Math.floor(t/(this.globalHeight+this.gap))}},{key:"_randomRow",value:function(){var t=Math.floor(Math.random()*this.totalRows);return this.height*this.offsetYPercent+t*(this.globalHeight+this.gap)}}]),e}(function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a()(this,t),this.type="BASE-RENDERER",this.canvas=e,this.opt=i,this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.itemPool=[],this._data=[],this._pause=!1,this.tween=new Proxy(new w,{get:function(t,e){return"function"==typeof t[e]?t[e].bind(t):t[e]}})}return s()(t,[{key:"update",value:function(t,e,i){}},{key:"initStyle",value:function(){}},{key:"pause",value:function(){this._pause=!0}},{key:"resume",value:function(){this._pause=!1}},{key:"destory",value:function(){}},{key:"add",value:function(t,e){}},{key:"clearRect",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}},{key:"resize",value:function(t,e){this.canvas.width=t,this.canvas.height=e,this.width=t,this.height=e}},{key:"invalidateSize",value:function(){this.globalChanged=!0}},{key:"data",get:function(){return this._data||[]}}]),t}()),k=window.requestAnimationFrame||window.webkitRequestAnimationFrame,x=h()("barrage-loop"),P=function(){function t(){a()(this,t),window.barrages=[],this._fps=0,this.renderers=[],this.running=!1,this[x]()}return s()(t,[{key:x,value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getTime(),i=(new Date).getTime();if(this.running){var n=i-e,a=this.width,r=this.height;this.renderers.forEach(function(t){t.renderer.update(a,r,n)}),this._fps=1e3/n>>0,k(function(){return t[x](i)})}else this.renderers.forEach(function(t){t.renderer.clearRect()})}},{key:"registRenderer",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=void 0;switch(this.width=e.clientWidth,this.height=e.clientHeight,t){case"normal":n=new b(e,i)}if(null!==n){var a={id:t+100*Math.random()>>0,type:t,renderer:n};window.barrages.push(e),this.renderers.push(a)}}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.renderers.forEach(function(n){n.type===e&&n.renderer.add(t,i)})}},{key:"start",value:function(){this.running||(this.running=!0,console.log("[barrage] start"),this[x]())}},{key:"stop",value:function(){this.running=!1,console.log("[barrage] stop")}},{key:"pause",value:function(){this.renderers.forEach(function(t){t.renderer.pause()}),console.log("[barrage] pause")}},{key:"resume",value:function(){this.renderers.forEach(function(t){t.renderer.resume()}),console.log("[barrage] resume")}},{key:"destroy",value:function(){this.renderers.forEach(function(t){var e=t.renderer;e.clearRect(),e.destroy()}),this.renderers=[],this.running=!1,this._fps=0,console.log("[barrage] destroy")}},{key:"fps",get:function(){return this._fps}}]),t}(),R=i(342),S={created:function(){this.barrageSystem=new P;var t="access:499279ae:885ba973a5d6ad10";this.hostPusher=new R.a("499279ae","lss_5b3c9d9d","inav_47d93f42",t,"my-pusher"),this.hostPusher.initHostPusher(),this.hostPusher.accountId="master",this.hostPusher2=new R.a("499279ae","lss_5b3c9d9d","inav_47d93f42",t,"my-pusher2"),this.hostPusher.initHostPusher(),this.hostPusher.accountId="master2"},mounted:function(){},data:function(){return{cTime:"00:00",dTime:"00:00",play:!1,audioHttp:"http://up.mcyt.net/?down/46426.mp3"}},methods:{playMusic:function(t){var e=this.$refs.player,i=t.pageX/this.$refs.runfatbar.offsetWidth;this.$refs.runbar.style.width=100*i+"%",e.currentTime=e.duration*i,e.play(),this.play=!0},audioState:function(){this.play=!this.play;var t=this.$refs.player;this.play?t.play():t.pause()},switchAudio:function(t){"top"===t?this.audioHttp="http://mp3.henduoge.com/mp3/2018-04-19/1524135488.mp3":"bottom"===t&&(this.audioHttp="http://mp3.henduoge.com/mp3/2018-04-20/1524234022.mp3"),this.play=!1,this.$refs.runbar.style.width=0,this.$refs.yuanright.style.display="none",this.$refs.yuanleft.style.display="none"}}},E=(i(380),i(1)),I=Object(E.a)(S,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("canvas",{ref:"cvs",staticClass:"cvs",attrs:{width:"400px",height:"200px"}}),t._v(" "),i("div",[i("el-input",{attrs:{clearable:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),i("el-button",{on:{click:t.addBarrage}},[t._v("添加")]),t._v(" "),i("span",[t._v(t._s(t.fps))])],1),t._v(" "),i("div",[i("el-button",{on:{click:t.registBarrage}},[t._v("注册普通")]),t._v(" "),i("el-button",{on:{click:t.startBarrage}},[t._v("开始")]),t._v(" "),i("el-button",{on:{click:t.stopBarrage}},[t._v("停止")]),t._v(" "),i("el-button",{on:{click:t.pauseBarrage}},[t._v("暂停")]),t._v(" "),i("el-button",{on:{click:t.resumeBarrage}},[t._v("恢复")]),t._v(" "),i("el-button",{on:{click:t.destroyBarrage}},[t._v("销毁")])],1),t._v(" "),i("div",[i("div",{attrs:{id:"my-pusher"}}),t._v(" "),i("el-button",{on:{click:t.getDevices}},[t._v("获取设备")]),t._v(" "),i("el-button",{on:{click:t.broadcast}},[t._v("推旁路")]),t._v(" "),i("el-button",{on:{click:t.stopBroadcast}},[t._v("取消旁路推流")]),t._v(" "),i("el-button",{on:{click:t.getSetting}},[t._v("获取推流配置")]),t._v(" "),i("el-button",{on:{click:t.hideCamera}},[t._v("隐藏摄像头")])],1),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),i("svg",{attrs:{width:"400px",height:"400px"}},[i("path",{ref:"pathRef",attrs:{fill:"none",stroke:"#CCC","stroke-width":"10","stroke-linecap":"round"}})])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"my-pusher2"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"my-puller"}})])}],!1,null,null,null);I.options.__file="index.vue";e.default=I.exports}}]);