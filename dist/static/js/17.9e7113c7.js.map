{"version":3,"sources":["webpack:///./src/pages/live-mager/css/live.scss?e2c5","webpack:///./src/pages/live-mager/email/edit-step-two.vue?74b3","webpack:///./src/pages/live-mager/email/edit-step-two.vue?2e8d","webpack:///./src/pages/live-mager/email/edit-step-two.vue?5cd7","webpack:///src/pages/live-mager/email/edit-step-two.vue","webpack:///./src/pages/live-mager/email/edit-step-two.vue"],"names":["_node_modules_mini_css_extract_plugin_0_4_4_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_live_scss_vue_type_style_index_0_id_c4130fe2_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_node_modules_mini_css_extract_plugin_0_4_4_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_edit_step_two_vue_vue_type_style_index_1_id_c4130fe2_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","keydown","$event","canPass","click","goBack","_v","_m","attrs","placeholder","error-tips","errorMsg","title","value","email","max-length","update:value","$set","senderName","class","error","groupIds","selectPersonShow","tip-type","tip","_s","_e","selectedPersonList","length","name","tag","_l","person","idx","key","id","count","delPerson","from-content","planTime","label","model","sendType","callback","$$v","expression","type","align","format","value-format","width","header","confirmText","handleClick","handleSelectPerson","searchPerson","nativeOn","keyup","_k","keyCode","searchEnter","personList","active","isChecked","stopPropagation","clickRow","small","slot","selectedCount","selectedPersonListStr","okSelectList","primary-button","fr","disabled","disabledBtn","send","saveEmail","_withStripped","email_edit_step_twovue_type_script_lang_js_","components","VeMsgTips","ve_msg_tips","data","outValue","isTimer","content","desc","activityId","emailInviteId","emailTemplateId","PC_HOST","location","protocol","computed","Object","vuex_esm","emailInfo","state","watch","handler","newVal","extends_default","immediate","clearError","deep","newArray","_this","temArray","listStr","groupIdsStr","forEach","item","push","substring","created","queryPersonList","$router","go","methods","storeEmailInfo","mutation_types","e","action","delIdx","indexOf","_this2","$get","activity_service","GET_PERSON_LIST","$route","params","then","res","_this3","replace","$post","POST_SAVE_EMAIL_INFO","$toast","autoClose","position","sendEmail","_this4","checkParams","POST_SEND_TIMER_EMAIL_INFO","POST_SAVE_SEND_EMAIL","_this5","$nextTick","immediatelySend","beforeRouteLeave","to","from","next","$messageBox","cancelText","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/17.9e7113c7.js","sourcesContent":["import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.4@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=c4130fe2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.4@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=c4130fe2&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.4@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./edit-step-two.vue?vue&type=style&index=1&id=c4130fe2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.4@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./edit-step-two.vue?vue&type=style&index=1&id=c4130fe2&lang=scss&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"edit-step-box\",\n      on: {\n        keydown: function($event) {\n          _vm.canPass = false\n        }\n      }\n    },\n    [\n      _c(\"header\", { staticClass: \"email-header\" }, [\n        _c(\"div\", { staticClass: \"back-btn\", on: { click: _vm.goBack } }, [\n          _c(\"i\", { staticClass: \"iconfont icon-jiantou\" })\n        ]),\n        _vm._v(\" \"),\n        _c(\"span\", [_vm._v(\"步骤2 发送设置\")])\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"live-mager\" },\n        [\n          _c(\"div\", { staticClass: \"mager-box border-box\" }, [\n            _c(\"div\", { staticClass: \"from-box\" }, [\n              _c(\"div\", { staticClass: \"from-row\" }, [\n                _vm._m(0),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"from-content\" },\n                  [\n                    _c(\"com-input\", {\n                      staticClass: \"input-email\",\n                      attrs: {\n                        placeholder: \"输入标题，可结合变量使用\",\n                        \"error-tips\": _vm.errorMsg.title,\n                        value: _vm.email.title,\n                        \"max-length\": 30\n                      },\n                      on: {\n                        \"update:value\": function($event) {\n                          _vm.$set(_vm.email, \"title\", $event)\n                        }\n                      }\n                    })\n                  ],\n                  1\n                )\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"from-row\" }, [\n                _vm._m(1),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"from-content\" },\n                  [\n                    _c(\"com-input\", {\n                      staticClass: \"input-email\",\n                      attrs: {\n                        placeholder: \"输入发件人名称\",\n                        \"error-tips\": _vm.errorMsg.senderName,\n                        value: _vm.email.senderName,\n                        \"max-length\": 15\n                      },\n                      on: {\n                        \"update:value\": function($event) {\n                          _vm.$set(_vm.email, \"senderName\", $event)\n                        }\n                      }\n                    })\n                  ],\n                  1\n                )\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"from-row\" }, [\n                _vm._m(2),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  { staticClass: \"from-content\" },\n                  [\n                    _c(\n                      \"div\",\n                      { class: { error: _vm.errorMsg.groupIds } },\n                      [\n                        _c(\n                          \"button\",\n                          {\n                            staticClass: \"default-button fl\",\n                            on: {\n                              click: function($event) {\n                                _vm.selectPersonShow = true\n                              }\n                            }\n                          },\n                          [_vm._v(\"选择分组\")]\n                        ),\n                        _vm._v(\" \"),\n                        _c(\"span\", { staticClass: \"send-span\" }, [\n                          _vm._v(\"发送限额：0/400\")\n                        ]),\n                        _vm._v(\" \"),\n                        _c(\"ve-msg-tips\", {\n                          attrs: {\n                            \"tip-type\": \"html\",\n                            tip:\n                              \"1.每天最多可发送10000封邮件 <br/> 2.发送限额：当前已选中人数/剩余可发送数量<br/>3.在邮件发送前，如果分组内人员发生变化，收件人也会随之改变\"\n                          }\n                        }),\n                        _vm._v(\" \"),\n                        _vm.errorMsg.groupIds\n                          ? _c(\"span\", { staticClass: \"error-msg\" }, [\n                              _vm._v(_vm._s(_vm.errorMsg.groupIds))\n                            ])\n                          : _vm._e()\n                      ],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _vm.selectedPersonList.length\n                      ? _c(\n                          \"transition-group\",\n                          {\n                            staticClass: \"edit-groups\",\n                            attrs: { name: \"list\", tag: \"div\" }\n                          },\n                          _vm._l(_vm.selectedPersonList, function(person, idx) {\n                            return _c(\n                              \"span\",\n                              { key: person.id, staticClass: \"list-item\" },\n                              [\n                                _vm._v(\n                                  _vm._s(person.name) +\n                                    \" (\" +\n                                    _vm._s(person.count) +\n                                    \"人）\\n                \"\n                                ),\n                                _c(\"i\", {\n                                  staticClass: \"iconfont icon-shanchu\",\n                                  on: {\n                                    click: function($event) {\n                                      _vm.delPerson(idx)\n                                    }\n                                  }\n                                })\n                              ]\n                            )\n                          })\n                        )\n                      : _vm._e()\n                  ],\n                  1\n                )\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"from-row\" }, [\n                _c(\"div\", { staticClass: \"from-title\" }, [\n                  _vm._v(\"发送时间：\")\n                ]),\n                _vm._v(\" \"),\n                _c(\n                  \"div\",\n                  {\n                    class: {\n                      \"from-content\": true,\n                      error: _vm.errorMsg.planTime\n                    }\n                  },\n                  [\n                    _c(\n                      \"div\",\n                      { staticClass: \"send-type-box\" },\n                      [\n                        _c(\n                          \"el-radio\",\n                          {\n                            attrs: { label: \"AUTO\" },\n                            model: {\n                              value: _vm.sendType,\n                              callback: function($$v) {\n                                _vm.sendType = $$v\n                              },\n                              expression: \"sendType\"\n                            }\n                          },\n                          [_vm._v(\"立即发送\")]\n                        ),\n                        _vm._v(\" \"),\n                        _c(\n                          \"el-radio\",\n                          {\n                            attrs: { label: \"ONCE\" },\n                            model: {\n                              value: _vm.sendType,\n                              callback: function($$v) {\n                                _vm.sendType = $$v\n                              },\n                              expression: \"sendType\"\n                            }\n                          },\n                          [_vm._v(\"定时发送\")]\n                        )\n                      ],\n                      1\n                    ),\n                    _vm._v(\" \"),\n                    _vm.sendType == \"ONCE\"\n                      ? _c(\"el-date-picker\", {\n                          attrs: {\n                            type: \"datetime\",\n                            placeholder: \"选择日期时间\",\n                            align: \"right\",\n                            format: \"yyyy-MM-dd HH:mm\",\n                            \"value-format\": \"yyyy-MM-dd HH:mm\"\n                          },\n                          model: {\n                            value: _vm.email.planTime,\n                            callback: function($$v) {\n                              _vm.$set(_vm.email, \"planTime\", $$v)\n                            },\n                            expression: \"email.planTime\"\n                          }\n                        })\n                      : _vm._e(),\n                    _vm._v(\" \"),\n                    _vm.errorMsg.planTime\n                      ? _c(\"span\", { staticClass: \"error-msg\" }, [\n                          _vm._v(_vm._s(_vm.errorMsg.planTime))\n                        ])\n                      : _vm._e()\n                  ],\n                  1\n                )\n              ])\n            ])\n          ]),\n          _vm._v(\" \"),\n          _vm.selectPersonShow\n            ? _c(\n                \"message-box\",\n                {\n                  staticClass: \"select-person\",\n                  attrs: {\n                    width: \"740px\",\n                    type: \"prompt\",\n                    header: \"选择观众组\",\n                    confirmText: \"确认\"\n                  },\n                  on: { handleClick: _vm.handleSelectPerson }\n                },\n                [\n                  _c(\"div\", { staticClass: \"select-person-box\" }, [\n                    _c(\"div\", { staticClass: \"select-nav fl\" }, [\n                      _c(\"div\", { staticClass: \"select-item active\" }, [\n                        _c(\"i\", { staticClass: \"iconfont icon-fenzu\" }),\n                        _vm._v(\" \"),\n                        _c(\"span\", [_vm._v(\"分组\")])\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\"div\", { staticClass: \"select-item\" }, [\n                        _c(\"i\", { staticClass: \"iconfont icon-biaoqian\" }),\n                        _vm._v(\" \"),\n                        _c(\"span\", [_vm._v(\"标签\")])\n                      ])\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"div\", { staticClass: \"select-content fl\" }, [\n                      _c(\n                        \"div\",\n                        { staticClass: \"search-person-box\" },\n                        [\n                          _c(\"com-input\", {\n                            staticClass: \"search-com\",\n                            attrs: {\n                              type: \"search\",\n                              value: _vm.searchPerson,\n                              placeholder: \"输入直播名称\"\n                            },\n                            on: {\n                              \"update:value\": function($event) {\n                                _vm.searchPerson = $event\n                              }\n                            },\n                            nativeOn: {\n                              keyup: function($event) {\n                                if (\n                                  !(\"button\" in $event) &&\n                                  _vm._k(\n                                    $event.keyCode,\n                                    \"enter\",\n                                    13,\n                                    $event.key,\n                                    \"Enter\"\n                                  )\n                                ) {\n                                  return null\n                                }\n                                return _vm.searchEnter($event)\n                              }\n                            }\n                          })\n                        ],\n                        1\n                      ),\n                      _vm._v(\" \"),\n                      _c(\"div\", { staticClass: \"select-person-box\" }, [\n                        _c(\n                          \"ul\",\n                          _vm._l(_vm.personList, function(person, idx) {\n                            return _c(\n                              \"li\",\n                              {\n                                key: person.id,\n                                class: { active: person.isChecked },\n                                on: {\n                                  click: function($event) {\n                                    $event.stopPropagation()\n                                    _vm.clickRow(idx)\n                                  }\n                                }\n                              },\n                              [\n                                _vm._v(\n                                  \"\\n                \" +\n                                    _vm._s(person.name) +\n                                    \" (\" +\n                                    _vm._s(person.count) +\n                                    \"人）\\n                \"\n                                ),\n                                _c(\"com-checkbox\", {\n                                  staticClass: \"fr\",\n                                  attrs: { small: \"\" },\n                                  model: {\n                                    value: person.isChecked,\n                                    callback: function($$v) {\n                                      _vm.$set(person, \"isChecked\", $$v)\n                                    },\n                                    expression: \"person.isChecked\"\n                                  }\n                                })\n                              ],\n                              1\n                            )\n                          })\n                        )\n                      ])\n                    ])\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\n                    \"div\",\n                    {\n                      staticClass: \"select-bottom\",\n                      attrs: { slot: \"bottom\" },\n                      slot: \"bottom\"\n                    },\n                    [\n                      _c(\"span\", { staticClass: \"select-all fl\" }, [\n                        _vm._v(\"已选择\" + _vm._s(_vm.selectedCount) + \"人：\")\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\n                        \"div\",\n                        {\n                          staticClass: \"select-list fl\",\n                          attrs: { title: _vm.selectedPersonListStr }\n                        },\n                        [\n                          _vm._v(\n                            \"\\n          \" +\n                              _vm._s(_vm.selectedPersonListStr) +\n                              \"\\n        \"\n                          )\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"button\",\n                        {\n                          staticClass: \"primary-button\",\n                          on: { click: _vm.okSelectList }\n                        },\n                        [_vm._v(\"确定\")]\n                      )\n                    ]\n                  )\n                ]\n              )\n            : _vm._e()\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"email-bottom\" }, [\n        _c(\n          \"button\",\n          {\n            class: {\n              \"primary-button\": true,\n              fr: true,\n              disabled: _vm.disabledBtn\n            },\n            on: { click: _vm.send }\n          },\n          [_vm._v(\"发送\")]\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          {\n            staticClass: \"primary-button margin-fl fr\",\n            on: { click: _vm.saveEmail }\n          },\n          [_vm._v(\"保存草稿\")]\n        )\n      ])\n    ]\n  )\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"邮件标题：\")\n    ])\n  },\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"发件人：\")\n    ])\n  },\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"div\", { staticClass: \"from-title\" }, [\n      _c(\"i\", { staticClass: \"star\" }, [_vm._v(\"*\")]),\n      _vm._v(\"收件人：\")\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./edit-step-two.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./edit-step-two.vue?vue&type=script&lang=js&\"","<template>\r\n  <div class=\"edit-step-box\" @keydown=\"canPass = false\">\r\n    <header class=\"email-header\">\r\n      <div class=\"back-btn\"\r\n           @click=\"goBack\">\r\n        <i class=\"iconfont icon-jiantou\"></i>\r\n      </div>\r\n      <span>步骤2 发送设置</span>\r\n    </header>\r\n    <div class=\"live-mager\">\r\n      <div class=\"mager-box border-box\">\r\n        <div class=\"from-box\">\r\n          <div class=\"from-row\">\r\n            <div class=\"from-title\"><i class=\"star\">*</i>邮件标题：</div>\r\n            <div class=\"from-content\">\r\n              <com-input placeholder=\"输入标题，可结合变量使用\"\r\n                         class=\"input-email\"\r\n                         :error-tips=\"errorMsg.title\"\r\n                         :value.sync=\"email.title\"\r\n                         :max-length=\"30\"></com-input>\r\n            </div>\r\n          </div>\r\n          <div class=\"from-row\">\r\n            <div class=\"from-title\"><i class=\"star\">*</i>发件人：</div>\r\n            <div class=\"from-content\">\r\n              <com-input placeholder=\"输入发件人名称\"\r\n                         class=\"input-email\"\r\n                         :error-tips=\"errorMsg.senderName\"\r\n                         :value.sync=\"email.senderName\"\r\n                         :max-length=\"15\"></com-input>\r\n            </div>\r\n          </div>\r\n          <div class=\"from-row\">\r\n            <div class=\"from-title\"><i class=\"star\">*</i>收件人：</div>\r\n            <div class=\"from-content\">\r\n              <div :class=\"{error:errorMsg.groupIds}\">\r\n                <button class=\"default-button fl\"\r\n                        @click=\"selectPersonShow=true\">选择分组</button>\r\n                <span class=\"send-span\">发送限额：0/400</span>\r\n                <ve-msg-tips tip-type=\"html\"\r\n                             tip=\"1.每天最多可发送10000封邮件 <br/> 2.发送限额：当前已选中人数/剩余可发送数量<br/>3.在邮件发送前，如果分组内人员发生变化，收件人也会随之改变\"></ve-msg-tips>\r\n                <span class=\"error-msg\"\r\n                      v-if=\"errorMsg.groupIds\">{{errorMsg.groupIds}}</span>\r\n              </div>\r\n              <transition-group name=\"list\"\r\n                                class=\"edit-groups\"\r\n                                tag=\"div\"\r\n                                v-if=\"selectedPersonList.length\">\r\n                <span class=\"list-item\"\r\n                      v-for=\"(person,idx) in selectedPersonList\"\r\n                      :key=\"person.id\">{{person.name}} ({{person.count}}人）\r\n                  <i class=\"iconfont icon-shanchu\"\r\n                     @click=\"delPerson(idx)\"></i>\r\n                </span>\r\n              </transition-group>\r\n            </div>\r\n          </div>\r\n          <div class=\"from-row\">\r\n            <div class=\"from-title\">发送时间：</div>\r\n            <div :class=\"{'from-content':true,error:errorMsg.planTime}\">\r\n              <div class=\"send-type-box\">\r\n                <el-radio v-model=\"sendType\"\r\n                          label=\"AUTO\">立即发送</el-radio>\r\n                <el-radio v-model=\"sendType\"\r\n                          label=\"ONCE\">定时发送</el-radio>\r\n              </div>\r\n              <el-date-picker v-if=\"sendType=='ONCE'\"\r\n                              v-model=\"email.planTime\"\r\n                              type=\"datetime\"\r\n                              placeholder=\"选择日期时间\"\r\n                              align=\"right\"\r\n                              format=\"yyyy-MM-dd HH:mm\"\r\n                              value-format=\"yyyy-MM-dd HH:mm\">\r\n              </el-date-picker>\r\n              <span class=\"error-msg\"\r\n                    v-if=\"errorMsg.planTime\">{{errorMsg.planTime}}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 选择收件人 -->\r\n      <message-box v-if=\"selectPersonShow\"\r\n                   width=\"740px\"\r\n                   type=\"prompt\"\r\n                   header=\"选择观众组\"\r\n                   confirmText='确认'\r\n                   class=\"select-person\"\r\n                   @handleClick=\"handleSelectPerson\">\r\n        <div class=\"select-person-box\">\r\n          <div class=\"select-nav fl\">\r\n            <div class=\"select-item active\">\r\n              <i class=\"iconfont icon-fenzu\"></i>\r\n              <span>分组</span>\r\n            </div>\r\n            <div class=\"select-item\">\r\n              <i class=\"iconfont icon-biaoqian\"></i>\r\n              <span>标签</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"select-content fl\">\r\n            <div class=\"search-person-box\">\r\n              <com-input type=\"search\"\r\n                         class=\"search-com\"\r\n                         :value.sync=\"searchPerson\"\r\n                         @keyup.native.enter=\"searchEnter\"\r\n                         placeholder=\"输入直播名称\"></com-input>\r\n            </div>\r\n            <div class=\"select-person-box\">\r\n              <ul>\r\n                <li v-for=\"(person,idx) in personList\"\r\n                    @click.stop=\"clickRow(idx)\"\r\n                    :class=\"{active:person.isChecked}\"\r\n                    :key=\"person.id\">\r\n                  {{person.name}} ({{person.count}}人）\r\n                  <com-checkbox v-model=\"person.isChecked\"\r\n                                class=\"fr\"\r\n                                small></com-checkbox>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div slot=\"bottom\"\r\n             class=\"select-bottom\">\r\n          <span class=\"select-all fl\">已选择{{selectedCount}}人：</span>\r\n          <div class=\"select-list fl\"\r\n               :title=\"selectedPersonListStr\">\r\n            {{selectedPersonListStr}}\r\n          </div>\r\n          <button class=\"primary-button\"\r\n                  @click=\"okSelectList\">确定</button>\r\n        </div>\r\n      </message-box>\r\n    </div>\r\n    <div class=\"email-bottom\">\r\n      <button :class=\"{'primary-button':true, fr:true,disabled:disabledBtn}\"\r\n              @click=\"send\">发送</button>\r\n      <button class=\"primary-button margin-fl fr\"\r\n              @click=\"saveEmail\">保存草稿</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VeMsgTips from 'src/components/ve-msg-tips'\r\nimport activityService from 'src/api/activity-service'\r\nimport { mapState, mapMutations } from 'vuex'\r\nimport * as types from '../../../store/mutation-types'\r\n\r\nexport default {\r\n  name: 'edit-step-two',\r\n  components: { VeMsgTips },\r\n  data () {\r\n    return {\r\n      outValue: '',\r\n      isTimer: true,\r\n      selectPersonShow: false,\r\n      sendType: 'AUTO',\r\n      searchPerson: '',\r\n      personList: [{ id: '', name: '', count: 0, isChecked: false }],\r\n      selectedPersonList: [{ id: '', name: '', count: 0, isChecked: false }],\r\n      selectedPersonListStr: '',\r\n      selectedCount: 0,\r\n      disabledBtn: false,\r\n      canPass: true,\r\n      errorMsg: {\r\n        title: '',\r\n        content: '',\r\n        desc: '',\r\n        senderName: '',\r\n        planTime: '',\r\n        groupIds: ''\r\n      },\r\n      email: {\r\n        activityId: '',\r\n        emailInviteId: '',\r\n        emailTemplateId: 1,\r\n        title: '',\r\n        content: '',\r\n        senderName: '',\r\n        planTime: '',\r\n        groupIds: ''\r\n      },\r\n      PC_HOST: location.protocol + process.env.PC_HOST\r\n    }\r\n  },\r\n  computed: mapState('liveMager', {\r\n    emailInfo: state => state.emailInfo\r\n  }),\r\n  watch: {\r\n    emailInfo: {\r\n      handler (newVal) {\r\n        this.email = { ...this.email, ...newVal }\r\n        this.sendType = this.email.planTime ? 'ONCE' : 'AUTO'\r\n      },\r\n      immediate: true\r\n    },\r\n    email: {\r\n      handler () {\r\n        this.clearError()\r\n      },\r\n      deep: true\r\n    },\r\n    personList: {\r\n      handler (newArray) {\r\n        let temArray = []\r\n        let listStr = ''\r\n        let groupIdsStr = ''\r\n        newArray.forEach((item, idx) => {\r\n          if (!item.isChecked) return\r\n          temArray.push(item)\r\n          this.selectedCount += item.count\r\n          listStr += `${item.name} (${item.count}人）、`\r\n          groupIdsStr += `${item.id},`\r\n        })\r\n        this.selectedPersonListStr = listStr.substring(0, listStr.length - 1)\r\n        this.email.groupIds = groupIdsStr.substring(0, groupIdsStr.length - 1)\r\n        this.selectedPersonList = temArray\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created () {\r\n    if (!this.email.content) {\r\n      this.$router.go(-1)\r\n      return\r\n    }\r\n    this.queryPersonList()\r\n  },\r\n  methods: {\r\n    ...mapMutations('liveMager', {\r\n      storeEmailInfo: types.EMAIL_INFO\r\n    }),\r\n    /* 清除错误信息 */\r\n    clearError () {\r\n      if (this.email.planTime) {\r\n        this.errorMsg.planTime = ''\r\n      } else {\r\n        return\r\n      }\r\n      if (this.email.title) {\r\n        this.errorMsg.title = ''\r\n      } else {\r\n        return\r\n      }\r\n      if (this.email.senderName) {\r\n        this.errorMsg.senderName = ''\r\n      } else {\r\n        return\r\n      }\r\n      if (this.email.groupIds) {\r\n        this.errorMsg.groupIds = ''\r\n      } else {\r\n        return\r\n      }\r\n      if (this.email.desc) {\r\n        this.errorMsg.desc = ''\r\n      } else {\r\n        return\r\n      }\r\n      if (this.email.content) {\r\n        this.errorMsg.content = ''\r\n      }\r\n    },\r\n    /* enter搜索 */\r\n    searchEnter () {\r\n      this.queryPersonList()\r\n    },\r\n    /* 点击确定 */\r\n    okSelectList () {\r\n      this.selectPersonShow = false\r\n      if (this.email.groupIds) {\r\n        this.errorMsg.groupIds = ''\r\n      }\r\n    },\r\n    /* 点击取消 */\r\n    handleSelectPerson (e) {\r\n      if (e.action === 'cancel') {\r\n        this.selectPersonShow = false\r\n      }\r\n    },\r\n    /* 选中行 */\r\n    clickRow (idx) {\r\n      this.personList[idx].isChecked = !this.personList[idx].isChecked\r\n    },\r\n    /* 删除已经选中的分组 */\r\n    delPerson (idx) {\r\n      const delIdx = this.personList.indexOf(this.selectedPersonList[idx])\r\n      this.personList[delIdx].isChecked = false\r\n    },\r\n    /* 查询人员 */\r\n    queryPersonList () {\r\n      this.$get(activityService.GET_PERSON_LIST, {\r\n        activityId: this.$route.params.id,\r\n        name: this.searchPerson\r\n      }).then((res) => {\r\n        let temArray = []\r\n        res.data.forEach((item) => {\r\n          temArray.push({\r\n            id: item.id,\r\n            name: item.name,\r\n            count: 0,\r\n            isChecked: false\r\n          })\r\n        })\r\n        this.personList = temArray\r\n      })\r\n      // LiveHttp.queryPersonList({\r\n      //   activityId: this.$route.params.id,\r\n      //   name: this.searchPerson\r\n      // }).then((res) => {\r\n      //   let temArray = []\r\n      //   res.data.forEach((item) => {\r\n      //     temArray.push({\r\n      //       id: item.id,\r\n      //       name: item.name,\r\n      //       count: 0,\r\n      //       isChecked: false\r\n      //     })\r\n      //   })\r\n      //   this.personList = temArray\r\n      // })\r\n    },\r\n    saveEmail () {\r\n      this.canPass = true\r\n      this.email.content = this.email.content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\r\n      this.$post(activityService.POST_SAVE_EMAIL_INFO, this.email).then((res) => {\r\n        this.email = { ...this.email, ...res.data }\r\n        this.storeEmailInfo(this.email)\r\n        this.$toast({\r\n          header: `提示`,\r\n          content: '保存草稿成功',\r\n          autoClose: 2000,\r\n          position: 'right-top'\r\n        })\r\n      })\r\n      // LiveHttp.saveEmailInfo(this.email).then((res) => {\r\n      //   if (res.code === 200) {\r\n      //     this.email = {...this.email, ...res.data}\r\n      //     this.storeEmailInfo(this.email)\r\n      //     this.$toast({\r\n      //       header: `提示`,\r\n      //       content: '保存草稿成功',\r\n      //       autoClose: 2000,\r\n      //       position: 'right-top'\r\n      //     })\r\n      //   }\r\n      // })\r\n    },\r\n    sendEmail () {\r\n      this.canPass = true\r\n      if (this.isTimer && !this.email.planTime) {\r\n        this.errorMsg.planTime = '定时时间不能为空'\r\n        this.disabledBtn = false\r\n        return\r\n      }\r\n      if (!this.checkParams(this.isTimer)) {\r\n        this.disabledBtn = false\r\n        return\r\n      }\r\n      this.email.content = this.email.content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\r\n      if (this.isTimer) { // 发送定时邮件\r\n        this.$post(activityService.POST_SEND_TIMER_EMAIL_INFO, this.email).then((res) => {\r\n          this.$router.push(`/liveMager/email/${this.email.activityId}`)\r\n          this.disabledBtn = false\r\n        })\r\n        // LiveHttp.sendTimerEmailInfo(this.email).then((res) => {\r\n        //   this.$router.push(`/liveMager/email/${this.email.activityId}`)\r\n        //   this.disabledBtn = false\r\n        // }).catch(() => {\r\n        //   this.disabledBtn = false\r\n        // })\r\n      } else { // 保存并发送\r\n        this.$post(activityService.POST_SAVE_SEND_EMAIL, this.email).then((res) => {\r\n          this.$router.push(`/liveMager/email/${this.email.activityId}`)\r\n          this.disabledBtn = false\r\n        })\r\n        // LiveHttp.saveAndsendEmail(this.email).then((res) => {\r\n        //   this.$router.push(`/liveMager/email/${this.email.activityId}`)\r\n        //   this.disabledBtn = false\r\n        // }).catch(() => {\r\n        //   this.disabledBtn = false\r\n        // })\r\n      }\r\n    },\r\n    send () {\r\n      this.canPass = true\r\n      this.disabledBtn = true\r\n      this.$nextTick(() => {\r\n        if (this.sendType === 'AUTO') {\r\n          this.isTimer = false\r\n          this.immediatelySend()\r\n        } else if (this.sendType === 'ONCE') {\r\n          this.isTimer = true\r\n          this.sendEmail()\r\n        }\r\n      })\r\n    },\r\n    immediatelySend () {\r\n      this.email.planTime = ''\r\n      this.isTimer = false\r\n      this.sendEmail()\r\n    },\r\n    checkParams () {\r\n      this.errorMsg = {\r\n        title: '',\r\n        content: '',\r\n        senderName: '',\r\n        planTime: ''\r\n      }\r\n      if (!this.email.title) {\r\n        this.errorMsg.title = '标题不能为空'\r\n        return false\r\n      } else if (!this.email.senderName) {\r\n        this.errorMsg.senderName = '发件人不能为空'\r\n        return false\r\n      } else if (!this.email.groupIds) {\r\n        this.errorMsg.groupIds = '请选择收件人'\r\n        return false\r\n      }\r\n      return true\r\n    },\r\n    goBack () {\r\n      this.storeEmailInfo(this.email)\r\n      this.$router.go(-1)\r\n    }\r\n  },\r\n  /* 路由守卫，离开当前页面之前被调用 */\r\n  beforeRouteLeave (to, from, next) {\r\n    if (this.canPass) {\r\n      next(true)\r\n      return false\r\n    }\r\n    this.$messageBox({\r\n      header: '提示',\r\n      width: '400px',\r\n      content: '是否放弃当前编辑？',\r\n      cancelText: '否',\r\n      confirmText: '是',\r\n      handleClick: (e) => {\r\n        if (e.action === 'confirm') {\r\n          next(true)\r\n        } else {\r\n          next(false)\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped src=\"../css/live.scss\"></style>\r\n<style lang=\"scss\" scoped>\r\n.edit-step-box {\r\n  background-color: #f5f5f5;\r\n  .send-span {\r\n    display: inline-block;\r\n    height: 40px;\r\n    line-height: 40px;\r\n    margin: 0 15px;\r\n    color: #888;\r\n  }\r\n  .email-header {\r\n    height: 60px;\r\n    line-height: 60px;\r\n    background-color: #ffd021;\r\n    .icon-jiantou {\r\n      font-size: 22px;\r\n      vertical-align: -2px;\r\n    }\r\n    .back-btn {\r\n      display: inline-block;\r\n      padding: 0 15px;\r\n      background-color: #ffda51;\r\n      line-height: 40px;\r\n      border-radius: 4px;\r\n      font-size: 18px;\r\n      text-align: center;\r\n      margin-left: 20px;\r\n      margin-right: 10px;\r\n      &:hover {\r\n        cursor: pointer;\r\n        opacity: 0.9;\r\n        color: #4b5afe;\r\n      }\r\n    }\r\n  }\r\n  .live-mager {\r\n    padding-bottom: 0;\r\n    height: calc(100vh - 120px);\r\n    overflow: hidden;\r\n    .border-box {\r\n      margin-top: 50px;\r\n      height: 2000px;\r\n    }\r\n  }\r\n  .email-bottom {\r\n    height: 60px;\r\n    width: 100%;\r\n    line-height: 60px;\r\n    border-top: 1px solid #e2e2e2;\r\n    box-sizing: border-box;\r\n    box-shadow: 0 0 4px rgba(0, 0, 0, 0.1);\r\n    padding: 0 20px;\r\n    background-color: #fff;\r\n    button {\r\n      margin-top: 10px;\r\n    }\r\n    .margin-fl {\r\n      margin-right: 10px;\r\n    }\r\n  }\r\n  .send-type-box {\r\n    height: 30px;\r\n    margin-top: 13px;\r\n  }\r\n  .msg-box {\r\n    z-index: 1000;\r\n  }\r\n  .step-btns {\r\n    margin: 30px 30px 100px 30px;\r\n    .margin-fl {\r\n      margin: 0 20px;\r\n    }\r\n  }\r\n  .input-email {\r\n    width: 400px;\r\n  }\r\n  .msg-box-bottom {\r\n    height: 40px;\r\n    .email-timer {\r\n      display: inline-block;\r\n      margin-right: 23px;\r\n    }\r\n    .error-msg {\r\n      display: block;\r\n      position: absolute;\r\n      color: #fc5659;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n  .from-title {\r\n    line-height: 40px;\r\n  }\r\n  .edit-groups {\r\n    margin-top: 15px;\r\n    width: 500px;\r\n    span {\r\n      display: inline-block;\r\n      background-color: #f0f1fe;\r\n      border-radius: 17px;\r\n      padding: 8px 10px;\r\n      margin-right: 10px;\r\n      margin-bottom: 10px;\r\n      i {\r\n        color: #4b5afe;\r\n        &:hover {\r\n          cursor: pointer;\r\n          opacity: 0.8;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render, staticRenderFns } from \"./edit-step-two.vue?vue&type=template&id=c4130fe2&scoped=true&\"\nimport script from \"./edit-step-two.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-step-two.vue?vue&type=script&lang=js&\"\nimport style0 from \"../css/live.scss?vue&type=style&index=0&id=c4130fe2&lang=scss&scoped=true&\"\nimport style1 from \"./edit-step-two.vue?vue&type=style&index=1&id=c4130fe2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c4130fe2\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\project\\\\fe_management\\\\node_modules\\\\_vue-hot-reload-api@2.3.1@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('c4130fe2', component.options)\n    } else {\n      api.reload('c4130fe2', component.options)\n    }\n    module.hot.accept(\"./edit-step-two.vue?vue&type=template&id=c4130fe2&scoped=true&\", function () {\n      api.rerender('c4130fe2', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/live-mager/email/edit-step-two.vue\"\nexport default component.exports"],"sourceRoot":""}