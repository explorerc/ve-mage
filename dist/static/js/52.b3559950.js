(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{644:function(t,e,a){},851:function(t,e,a){"use strict";var i=a(644);a.n(i).a},885:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"goods-list"}},[i("header",[i("p",[t._v("商品推荐")]),t._v(" "),t.tableData.length>=1?i("div",[i("el-button",{attrs:{round:""},on:{click:t.check}},[t._v("查看活动数据")]),t._v(" "),i("el-button",{staticClass:"add-goods primary-button",attrs:{disabled:t.tableData.length>=20,round:""},on:{click:t.createGoods}},[t._v("\n        新建商品（"+t._s(t.tableData.length)+" / 20）\n      ")])],1):t._e()]),t._v(" "),t.tableData.length>=1?i("div",{staticClass:"table-box"},[i("table",{attrs:{border:"1"}},[t._m(0),t._v(" "),i("draggable",{attrs:{element:"tbody",options:{handle:".item"}},model:{value:t.tableData,callback:function(e){t.tableData=e},expression:"tableData"}},t._l(t.tableData,function(e,n){return i("tr",{key:n},[i("td",[t._v(t._s(e.number<10?"0"+e.number:e.number))]),t._v(" "),i("td",[i("img",{attrs:{src:e.avatar?t.$imgHost+"/"+e.avatar:a(479),alt:""}})]),t._v(" "),i("td",[t._v(t._s(e.title))]),t._v(" "),i("td",[i("del",[t._v(t._s(e.price))])]),t._v(" "),i("td",{staticClass:"dis-prices"},[t._v(t._s(e.preferential))]),t._v(" "),i("td",[i("div",[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.handleEdit(e,n)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.handleShelf(e,n)}}},[t._v(t._s("0"===e.added?"下架":"上架")+"\n              ")]),t._v(" "),i("el-button",{staticClass:"item",attrs:{size:"mini",type:"text"}},[t._v("移动")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.handleDelete(e,n)}}},[t._v("删除")])],1)])])}))],1)]):i("div",{staticClass:"no-goods"},[i("img",{attrs:{src:a(479),alt:""}}),t._v(" "),i("p",[t._v("暂时没有商品哦~")]),t._v(" "),t._m(1),t._v(" "),i("el-button",{staticClass:"add-goods primary-button",attrs:{round:""},on:{click:t.createGoods}},[t._v("添加商品")])],1)])};i._withStripped=!0;var n=a(453),o=a.n(n),s=a(670),c={components:{draggable:o.a},created:function(){this.getList()},data:function(){return{activity_id:this.$route.params.activity_id,tableData:[]}},watch:{tableData:{handler:function(t,e){t.length>=1&&this.sortGoods()},deep:!0}},methods:{getList:function(){var t=this;this.$post(s.a.GOODS_LISTS,{activity_id:this.activity_id}).then(function(e){console.log(e),t.tableData=e.data}).catch(function(){t.tableData=[]})},createGoods:function(){this.$router.push("/salesTools/recommendGoodsInfo/"+this.activity_id+"/create")},sortGoods:function(){var t=this.tableData.map(function(t,e){return t.goods_id});this.$post(s.a.SORT_GOODS,{activity_id:this.activity_id,goods_ids:t.join()})},check:function(){this.$router.push("/liveMager/detail/"+this.activity_id)},handleShelf:function(t){var e=this;this.$post(s.a.GOODS_SHELF,{goods_id:t.goods_id,type:"0"===t.added?"1":"0"}).then(function(t){setTimeout(function(){e.getList()},500),e.$toast({content:"操作成功!",position:"center"})})},handleEdit:function(t,e){this.$router.push("/salesTools/recommendGoodsInfo/"+t.goods_id+"/update")},handleDelete:function(t,e){var a=this;console.log(t),this.$messageBox({header:"删除该商品",type:"error",width:"450px",content:"删除后观看页将不再显示该商品",cancelText:"取消",confirmText:"删除",handleClick:function(i){"cancel"===i.action?a.$toast({content:"已取消删除",position:"center"}):"confirm"===i.action&&a.$post(s.a.GOODS_DELETE,{goods_id:t.goods_id}).then(function(t){a.tableData.splice(e,1),setTimeout(function(){a.getList()},1e3),a.$toast({content:"删除成功!",position:"center"})})}})}}},r=(a(851),a(1)),d=Object(r.a)(c,i,[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("封面图")]),t._v(" "),a("th",[t._v("商品名称")]),t._v(" "),a("th",[t._v("原始价格")]),t._v(" "),a("th",[t._v("优惠价格")]),t._v(" "),a("th",[t._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("全新直播购物模式，通过实时直播带动粉丝经济，"),e("br"),this._v("你甚至可以联合品牌商一起策划品牌内容，提升观众信任感")])}],!1,null,"2e5cf102",null);d.options.__file="src/pages/sales-tools/recommend-goods/index.vue";e.default=d.exports}}]);
//# sourceMappingURL=52.b3559950.js.map