(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{194:function(t,e,r){var i=r(2),s=r(6),n=r(44),a=r(235),o=r(19).f;t.exports=function(t){var e=s.Symbol||(s.Symbol=n?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:a.f(t)})}},195:function(t,e,r){},235:function(t,e,r){e.f=r(4)},236:function(t,e,r){var i=r(84),s=r(59).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},255:function(t,e,r){t.exports={default:r(256),__esModule:!0}},256:function(t,e,r){r(257),r(85),r(263),r(264),t.exports=r(6).Symbol},257:function(t,e,r){"use strict";var i=r(2),s=r(20),n=r(16),a=r(12),o=r(86),l=r(258).KEY,h=r(42),c=r(58),u=r(45),p=r(56),d=r(4),f=r(235),g=r(194),y=r(259),m=r(260),v=r(9),b=r(15),w=r(21),_=r(81),S=r(55),x=r(87),I=r(261),O=r(262),E=r(19),P=r(43),k=O.f,F=E.f,R=I.f,B=i.Symbol,M=i.JSON,C=M&&M.stringify,N=d("_hidden"),T=d("toPrimitive"),j={}.propertyIsEnumerable,D=c("symbol-registry"),A=c("symbols"),H=c("op-symbols"),q=Object.prototype,J="function"==typeof B,W=i.QObject,Y=!W||!W.prototype||!W.prototype.findChild,L=n&&h(function(){return 7!=x(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(t,e,r){var i=k(q,e);i&&delete q[e],F(t,e,r),i&&t!==q&&F(q,e,i)}:F,Q=function(t){var e=A[t]=x(B.prototype);return e._k=t,e},$=J&&"symbol"==typeof B.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof B},z=function(t,e,r){return t===q&&z(H,e,r),v(t),e=_(e,!0),v(r),s(A,e)?(r.enumerable?(s(t,N)&&t[N][e]&&(t[N][e]=!1),r=x(r,{enumerable:S(0,!1)})):(s(t,N)||F(t,N,S(1,{})),t[N][e]=!0),L(t,e,r)):F(t,e,r)},K=function(t,e){v(t);for(var r,i=y(e=w(e)),s=0,n=i.length;n>s;)z(t,r=i[s++],e[r]);return t},V=function(t){var e=j.call(this,t=_(t,!0));return!(this===q&&s(A,t)&&!s(H,t))&&(!(e||!s(this,t)||!s(A,t)||s(this,N)&&this[N][t])||e)},G=function(t,e){if(t=w(t),e=_(e,!0),t!==q||!s(A,e)||s(H,e)){var r=k(t,e);return!r||!s(A,e)||s(t,N)&&t[N][e]||(r.enumerable=!0),r}},U=function(t){for(var e,r=R(w(t)),i=[],n=0;r.length>n;)s(A,e=r[n++])||e==N||e==l||i.push(e);return i},X=function(t){for(var e,r=t===q,i=R(r?H:w(t)),n=[],a=0;i.length>a;)!s(A,e=i[a++])||r&&!s(q,e)||n.push(A[e]);return n};J||(o((B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(r){this===q&&e.call(H,r),s(this,N)&&s(this[N],t)&&(this[N][t]=!1),L(this,t,S(1,r))};return n&&Y&&L(q,t,{configurable:!0,set:e}),Q(t)}).prototype,"toString",function(){return this._k}),O.f=G,E.f=z,r(236).f=I.f=U,r(53).f=V,r(82).f=X,n&&!r(44)&&o(q,"propertyIsEnumerable",V,!0),f.f=function(t){return Q(d(t))}),a(a.G+a.W+a.F*!J,{Symbol:B});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)d(Z[tt++]);for(var et=P(d.store),rt=0;et.length>rt;)g(et[rt++]);a(a.S+a.F*!J,"Symbol",{for:function(t){return s(D,t+="")?D[t]:D[t]=B(t)},keyFor:function(t){if(!$(t))throw TypeError(t+" is not a symbol!");for(var e in D)if(D[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!J,"Object",{create:function(t,e){return void 0===e?x(t):K(x(t),e)},defineProperty:z,defineProperties:K,getOwnPropertyDescriptor:G,getOwnPropertyNames:U,getOwnPropertySymbols:X}),M&&a(a.S+a.F*(!J||h(function(){var t=B();return"[null]"!=C([t])||"{}"!=C({a:t})||"{}"!=C(Object(t))})),"JSON",{stringify:function(t){for(var e,r,i=[t],s=1;arguments.length>s;)i.push(arguments[s++]);if(r=e=i[1],(b(e)||void 0!==t)&&!$(t))return m(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!$(e))return e}),i[1]=e,C.apply(M,i)}}),B.prototype[T]||r(13)(B.prototype,T,B.prototype.valueOf),u(B,"Symbol"),u(Math,"Math",!0),u(i.JSON,"JSON",!0)},258:function(t,e,r){var i=r(56)("meta"),s=r(15),n=r(20),a=r(19).f,o=0,l=Object.isExtensible||function(){return!0},h=!r(42)(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,i,{value:{i:"O"+ ++o,w:{}}})},u=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!n(t,i)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[i].i},getWeak:function(t,e){if(!n(t,i)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[i].w},onFreeze:function(t){return h&&u.NEED&&l(t)&&!n(t,i)&&c(t),t}}},259:function(t,e,r){var i=r(43),s=r(82),n=r(53);t.exports=function(t){var e=i(t),r=s.f;if(r)for(var a,o=r(t),l=n.f,h=0;o.length>h;)l.call(t,a=o[h++])&&e.push(a);return e}},260:function(t,e,r){var i=r(22);t.exports=Array.isArray||function(t){return"Array"==i(t)}},261:function(t,e,r){var i=r(21),s=r(236).f,n={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==n.call(t)?function(t){try{return s(t)}catch(t){return a.slice()}}(t):s(i(t))}},262:function(t,e,r){var i=r(53),s=r(55),n=r(21),a=r(81),o=r(20),l=r(83),h=Object.getOwnPropertyDescriptor;e.f=r(16)?h:function(t,e){if(t=n(t),e=a(e,!0),l)try{return h(t,e)}catch(t){}if(o(t,e))return s(!i.f.call(t,e),t[e])}},263:function(t,e,r){r(194)("asyncIterator")},264:function(t,e,r){r(194)("observable")},265:function(t,e,r){"use strict";var i=r(195);r.n(i).a},351:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("canvas",{ref:"cvs",staticClass:"cvs",attrs:{width:"400px",height:"200px"}}),t._v(" "),r("div",[r("el-input",{attrs:{clearable:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),r("el-button",{on:{click:t.addBarrage}},[t._v("添加")]),t._v(" "),r("span",[t._v(t._s(t.fps))])],1),t._v(" "),r("div",[r("el-button",{on:{click:t.registBarrage}},[t._v("注册普通")]),t._v(" "),r("el-button",{on:{click:t.startBarrage}},[t._v("开始")]),t._v(" "),r("el-button",{on:{click:t.stopBarrage}},[t._v("停止")]),t._v(" "),r("el-button",{on:{click:t.pauseBarrage}},[t._v("暂停")]),t._v(" "),r("el-button",{on:{click:t.resumeBarrage}},[t._v("恢复")]),t._v(" "),r("el-button",{on:{click:t.destroyBarrage}},[t._v("销毁")])],1),t._v(" "),r("div",[r("div",{attrs:{id:"my-pusher"}}),t._v(" "),r("el-button",{on:{click:t.getDevices}},[t._v("获取设备")]),t._v(" "),r("el-button",{on:{click:t.broadcast}},[t._v("推旁路")]),t._v(" "),r("el-button",{on:{click:t.stopBroadcast}},[t._v("取消旁路推流")])],1),t._v(" "),t._m(0),t._v(" "),r("svg",{attrs:{width:"400px",height:"400px"}},[r("path",{ref:"pathRef",attrs:{fill:"none",stroke:"#CCC","stroke-width":"10","stroke-linecap":"round"}})])])};i._withStripped=!0;var s=r(255),n=r.n(s),a=r(46),o=r.n(a);class l{linear(t,e,r,i){return r*t/i+e}quart(t,...e){const r={linear:this.linear,easeIn:(t,e,r,i)=>r*(t/=i)*t+e,easeOut:(t,e,r,i)=>-r*(t/=i)*(t-2)+e,easeInOut:(t,e,r,i)=>(t/=i/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e};return!!r[t]&&r[t](...e)}quad(t,...e){const r={linear:this.linear,easeIn:(t,e,r,i)=>r*(t/=i)*t+e,easeOut:(t,e,r,i)=>-r*(t/=i)*(t-2)+e,easeInOut:(t,e,r,i)=>(t/=i/2)<1?r/2*t*t+e:-r/2*(--t*(t-2)-1)+e};return!!r[t]&&r[t](...e)}cubic(t,...e){const r={linear:this.linear,easeIn:(t,e,r,i)=>r*(t/=i)*t*t+e,easeOut:(t,e,r,i)=>r*((t=t/i-1)*t*t+1)+e,easeInOut:(t,e,r,i)=>(t/=i/2)<1?r/2*t*t*t+e:r/2*((t-=2)*t*t+2)+e};return!!r[t]&&r[t](...e)}quint(t,...e){const r={linear:this.linear,easeIn:(t,e,r,i)=>r*(t/=i)*t*t*t*t+e,easeOut:(t,e,r,i)=>r*((t=t/i-1)*t*t*t*t+1)+e,easeInOut:(t,e,r,i)=>(t/=i/2)<1?r/2*t*t*t*t*t+e:r/2*((t-=2)*t*t*t*t+2)+e};return!!r[t]&&r[t](...e)}}l.prototype.Linear="linear",l.prototype.EaseIn="easeIn",l.prototype.EaseOut="easeOut",l.prototype.EaseInOut="easeInOut";class h{constructor(t,e={}){this.type="BASE-RENDERER",this.canvas=t,this.opt=e,this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.itemPool=[],this._data=[],this._pause=!1,this.tween=new Proxy(new l,{get:(t,e)=>"function"==typeof t[e]?t[e].bind(t):t[e]})}update(t,e,r){}initStyle(){}pause(){this._pause=!0}resume(){this._pause=!1}destory(){}add(t,e){}clearRect(){this.ctx.clearRect(0,0,this.width,this.height)}resize(t,e){this.canvas.width=t,this.canvas.height=e,this.width=t,this.height=e}invalidateSize(){this.globalChanged=!0}get data(){return this._data||[]}}class c extends h{constructor(t,e={}){super(t,e),this.type="NORMAL-RENDERER",this.itemPool=[],this.tweenType=e.tweenType||"quad",this.tweenMethod=e.tweenMethod||this.tween.Linear,this.duration=e.duration||5e3,this.offsetYPercent=e.offsetYPercent||.1,this.fillPercent=e.fillPercent||.8,this.changeStyle(e),this._calcRow()}changeStyle(t={}){this.globalHeight=t.fontSize||this.globalHeight||18,this.globalFamily=t.fontFamily||this.globalFamily||"Microsoft YaHei",this.globalStyle=t.fontColor||this.globalStyle||"#ffffff",this.opacity=t.opacity||this.opacity||1,this.gap=t.gap||this.gap||3,this.globalChanged=!0}update(t,e,r){if(super.update(t,e,r),this.globalChanged&&this.initStyle(),this._pause)return;this.ctx.clearRect(0,0,t,e),this.ctx.save();let i=this.data.length;for(let e=0;e<i;e++){let s=this.data[e];s&&(s.elapsedTime+=r,s.x=this.tween[this.tweenType](this.tweenMethod,s.elapsedTime,t,-s.width-t,s.duration),this.ctx.fillStyle=s.fillStyle,s.x<-s.width?(this._recycle(s),this.data.splice(e,1),i--):this.ctx.fillText(s.data,s.x,s.y))}this.ctx.restore()}initStyle(){super.initStyle(),this.globalChanged=!1,this._mergeFont(),this.ctx.font=this.globalFont,this.ctx.textBaseline="middle",this.ctx.fillStyle=this.globalColor,this.ctx.globalAlpha=this.opacity}add(t,e){super.add(t,e);let r=this.itemPool.length>0?this.itemPool.shift():{};o()(r,e),this.ctx&&(r.width=this.ctx.measureText(t).width||200),r.elapsedTime=0,r.data=t,r.height=this.globalHeight,r.duration=this.duration-Math.random()*this.duration/3>>0,r.fillStyle=e.fillStyle||this.globalStyle,r.y=this._randomRow(),this._data.push(r)}destroy(){super.destory(),this.itemPool=[],this._data=[]}_mergeFont(){this.globalFont=`${this.globalHeight}px ${this.globalFamily}`}_recycle(t){t.elapsedTime=0,t.width=0,t.height=0,t.data="",t.x=0,t.y=0,t.row=-1,t.duration=0,t.fillStyle="",this.itemPool.push(t)}_calcRow(){let t=this.height*this.fillPercent;this.totalRows=Math.floor(t/(this.globalHeight+this.gap))}_randomRow(){let t=Math.floor(Math.random()*this.totalRows);return this.height*this.offsetYPercent+t*(this.globalHeight+this.gap)}}const u=window.requestAnimationFrame||window.webkitRequestAnimationFrame,p=n()("barrage-loop");class d{constructor(t,e,r){this.appId=t,this.rootEleId=e,this.token=r,this.type="",this._accountId=null,this.player=null}set accoundId(t){this._accountId=t}get accoundId(){return this._accountId}play(t=null){this.player.play(),t&&t()}pause(t=null){this.player.pause(),t&&t()}getQuality(){return this.player.getQuality()}setQuality(t,e=null){this.player.setQuality(t),e&&e()}setFullScreen(t,e=null){this.player.setFullScreen(t),e&&e()}isFullscreen(){return this.player.isFullscreen()}set volume(t){this.player.setVolume(t)}set width(t){this.player.setWidth(t)}set height(t){this.player.setHeight(t)}get netWorkState(){return this.player.getNetworkState()}}var f={created(){this.barrageSystem=new class{constructor(){window.barrages=[],this._fps=0,this.renderers=[],this.running=!1,this[p]()}[p](t=(new Date).getTime()){let e=(new Date).getTime();if(!this.running)return void this.renderers.forEach(t=>{t.renderer.clearRect()});let r=e-t,i=this.width,s=this.height;this.renderers.forEach(t=>{t.renderer.update(i,s,r)}),this._fps=1e3/r>>0,u(()=>this[p](e))}registRenderer(t,e,r={}){let i;switch(this.width=e.clientWidth,this.height=e.clientHeight,t){case"normal":i=new c(e,r)}if(null===i)return;let s={id:t+100*Math.random()>>0,type:t,renderer:i};window.barrages.push(e),this.renderers.push(s)}add(t,e="normal",r={}){this.renderers.forEach(i=>{i.type===e&&i.renderer.add(t,r)})}start(){this.running||(this.running=!0,console.log("[barrage] start"),this[p]())}stop(){this.running=!1,console.log("[barrage] stop")}pause(){this.renderers.forEach(t=>{t.renderer.pause()}),console.log("[barrage] pause")}resume(){this.renderers.forEach(t=>{t.renderer.resume()}),console.log("[barrage] resume")}destroy(){this.renderers.forEach(t=>{let e=t.renderer;e.clearRect(),e.destroy()}),this.renderers=[],this.running=!1,this._fps=0,console.log("[barrage] destroy")}get fps(){return this._fps}};let t="my-pusher";t="my-puller",this.puller=new class extends d{constructor(t,e,r,i){super(t,r,i),this.type="live",this.roomId=e}initLivePlayer(t=!1,e=null){let r=window.Vhall,i=window.VhallPlayer;console.log("1调用初始化拉流器"),r.ready(()=>{console.log("2SDK初始化完成"),i.init({roomId:this.roomId,type:"live",videoNode:this.rootEleId,complete:()=>{console.log("3播放器初始化完成"),e&&e(),t&&i.play()}}),this.player=i})}set accountId(t){super.accoundId=t,console.log("aaa",this.appId,this.roomId,this.rootEleId,this.token),Vhall.config({appId:this.appId,accountId:t,token:this.token})}}("499279ae","lss_5b3c9d9d","my-puller","access:499279ae:885ba973a5d6ad10"),this.puller.initLivePlayer(!0),this.puller.accountId="xiao2"},mounted(){},data:()=>({content:"",barrageSystem:null,fps:0,intervalId:0,c:null,hostPusher:null,puller:null}),methods:{startBarrage(){this.barrageSystem.start()},stopBarrage(){this.barrageSystem.stop(),clearInterval(this.intervalId)},registBarrage(){this.barrageSystem.registRenderer("normal",this.$refs.cvs,{})},addBarrage(){let t=["#ffffff","#ff0000","#00ff00","#0000ff"];this.intervalId=setInterval(()=>{this.barrageSystem.add(Math.random().toFixed(2),"normal",{fillStyle:t[Math.random()*t.length>>0]}),this.barrageSystem.add(Math.random().toFixed(2),"normal"),this.fps=this.barrageSystem.fps},50)},pauseBarrage(){this.barrageSystem.pause()},resumeBarrage(){this.barrageSystem.resume()},destroyBarrage(){this.barrageSystem.destroy()},getDevices(){this.hostPusher.getDevices()},broadcast(){this.hostPusher.startBroadCast()},stopBroadcast(){this.hostPusher.stopBroadCast()}}},g=(r(265),r(1)),y=Object(g.a)(f,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"my-puller"}})])}],!1,null,null,null);y.options.__file="src\\pages\\barrage\\index.vue";e.default=y.exports}}]);
//# sourceMappingURL=8.d015acf3.js.map