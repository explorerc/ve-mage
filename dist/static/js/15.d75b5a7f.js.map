{"version":3,"sources":["webpack:///./src/pages/live-mager/email/index.vue?9acc","webpack:///src/pages/live-mager/email/index.vue","webpack:///./src/pages/live-mager/email/index.vue?d7cd","webpack:///./src/pages/live-mager/email/index.vue","webpack:///./src/pages/live-mager/css/live.scss?d287","webpack:///./src/pages/live-mager/email/index.vue?21e4"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","url","activeId","emailList","length","on","click","addEmail","_s","countBalance","countTotal","_e","directives","name","rawName","value","loading","expression","staticStyle","padding-top","width","data","prop","label","scopedSlots","_u","key","fn","scope","row","status","statusName","$event","stopPropagation","clickEmail","$index","handleType","info","delete","total","pageSize","changePage","_withStripped","send","edit","statusType","DRAFT","SEND","AWAIT","FAIL","live_mager_emailvue_type_script_lang_js_","components","VePagination","ve_pagination","currentPage","sendShow","currentEmailIdx","activityId","emailInviteId","title","content","desc","planTime","sendTime","senderName","sendCount","computed","currentEmail","created","queryId","$route","params","id","$router","go","eventBus","$emit","getLimit","queryEmailListById","methods","extends_default","Object","vuex_esm","storeEmailInfo","mutation_types","_this","$get","activity_service","GET_EMAIL_LIST","page","then","res","list","map","dataItem","idx","type","_this2","queryInfoEmail","editEmail","$messageBox","header","cancelText","confirmText","handleClick","e","action","delEmail","email","push","sendEmail","$post","POST_SEND_EMAIL_INFO","console","log","handleClickSendEmail","_this3","emaiId","POST_DEL_EMAIL","_this4","GET_SEND_LIMIT","balance","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/15.d75b5a7f.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"live-mager email-box\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"live-title\" },\n      [\n        _c(\"span\", { staticClass: \"title\" }, [_vm._v(\"邮件邀约\")]),\n        _vm._v(\" \"),\n        _c(\"com-back\", {\n          attrs: { url: \"/liveMager/detail/\" + this.activeId }\n        }),\n        _vm._v(\" \"),\n        _vm.emailList.length\n          ? [\n              _c(\n                \"button\",\n                {\n                  staticClass: \"default-button fr create-button\",\n                  on: { click: _vm.addEmail }\n                },\n                [_vm._v(\"新建邮件\")]\n              ),\n              _vm._v(\" \"),\n              _c(\"span\", { staticClass: \"send-box fr\" }, [\n                _vm._v(\n                  \"发送限额：\" +\n                    _vm._s(_vm.countBalance) +\n                    \"/\" +\n                    _vm._s(_vm.countTotal)\n                )\n              ])\n            ]\n          : _vm._e()\n      ],\n      2\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      {\n        directives: [\n          {\n            name: \"ComLoading\",\n            rawName: \"v-ComLoading\",\n            value: _vm.loading,\n            expression: \"loading\"\n          }\n        ],\n        staticClass: \"email-table-box\"\n      },\n      [\n        _c(\"div\", { staticClass: \"tip-box\" }, [\n          _vm._v(\n            \"\\n      通过邮件邀约，定制邀约邮件，邀请特定客户群参加直播活动\\n    \"\n          )\n        ]),\n        _vm._v(\" \"),\n        _c(\n          \"div\",\n          {\n            staticClass: \"table-list-box\",\n            staticStyle: { \"padding-top\": \"20px\" }\n          },\n          [\n            _vm.emailList.length\n              ? [\n                  _c(\n                    \"el-table\",\n                    {\n                      staticStyle: { width: \"100%\" },\n                      attrs: { data: _vm.emailList }\n                    },\n                    [\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"title\", label: \"邮件标题\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"sendTime\", label: \"发送时间\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"sendCount\", label: \"发送数量\" }\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { prop: \"statusName\", label: \"状态\" },\n                        scopedSlots: _vm._u([\n                          {\n                            key: \"default\",\n                            fn: function(scope) {\n                              return [\n                                scope.row.status == \"DRAFT\"\n                                  ? _c(\"span\", { staticClass: \"cg-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"SEND\"\n                                  ? _c(\"span\", { staticClass: \"fs-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"AWAIT\"\n                                  ? _c(\"span\", { staticClass: \"dd-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e(),\n                                _vm._v(\" \"),\n                                scope.row.status == \"FAIL\"\n                                  ? _c(\"span\", { staticClass: \"del-status\" }, [\n                                      _vm._v(_vm._s(scope.row.statusName))\n                                    ])\n                                  : _vm._e()\n                              ]\n                            }\n                          }\n                        ])\n                      }),\n                      _vm._v(\" \"),\n                      _c(\"el-table-column\", {\n                        attrs: { label: \"操作\" },\n                        scopedSlots: _vm._u([\n                          {\n                            key: \"default\",\n                            fn: function(scope) {\n                              return [\n                                _c(\"div\", { staticClass: \"table-handler\" }, [\n                                  _c(\n                                    \"span\",\n                                    {\n                                      on: {\n                                        click: function($event) {\n                                          $event.stopPropagation()\n                                          _vm.clickEmail(\n                                            scope.$index,\n                                            _vm.handleType.info\n                                          )\n                                        }\n                                      }\n                                    },\n                                    [_vm._v(\"查看\")]\n                                  ),\n                                  _vm._v(\" \"),\n                                  _vm.emailList[scope.$index].status !== \"SEND\"\n                                    ? _c(\n                                        \"span\",\n                                        {\n                                          on: {\n                                            click: function($event) {\n                                              $event.stopPropagation()\n                                              _vm.clickEmail(\n                                                scope.$index,\n                                                _vm.handleType.delete\n                                              )\n                                            }\n                                          }\n                                        },\n                                        [_vm._v(\"删除\")]\n                                      )\n                                    : _vm._e()\n                                ])\n                              ]\n                            }\n                          }\n                        ])\n                      })\n                    ],\n                    1\n                  )\n                ]\n              : [\n                  _c(\n                    \"div\",\n                    { staticClass: \"empty\" },\n                    [\n                      _c(\"div\", { staticClass: \"img\" }),\n                      _vm._v(\" \"),\n                      _c(\"div\", { staticClass: \"txt\" }, [\n                        _vm._v(\"您还没有添加邮件邀约，快去添加吧\")\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\n                        \"el-button\",\n                        {\n                          staticClass: \"primary-button\",\n                          on: { click: _vm.addEmail }\n                        },\n                        [_vm._v(\"新建邮件\")]\n                      )\n                    ],\n                    1\n                  )\n                ]\n          ],\n          2\n        ),\n        _vm._v(\" \"),\n        _vm.emailList.length\n          ? _c(\"div\", { staticClass: \"pagination-box\" }, [\n              _c(\n                \"div\",\n                { staticClass: \"page-pagination\" },\n                [\n                  _c(\"ve-pagination\", {\n                    attrs: { total: _vm.total, pageSize: _vm.pageSize },\n                    on: { changePage: _vm.changePage }\n                  })\n                ],\n                1\n              )\n            ])\n          : _vm._e()\n      ]\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"live-mager email-box\">\r\n    <div class=\"live-title\">\r\n      <span class=\"title\">邮件邀约</span>\r\n      <com-back  :url=\"`/liveMager/detail/${this.activeId}`\"></com-back>\r\n      <template v-if='emailList.length'>\r\n        <button class=\"default-button fr create-button\"\r\n                @click=\"addEmail\">新建邮件</button>\r\n        <span class=\"send-box fr\">发送限额：{{countBalance}}/{{countTotal}}</span>\r\n      </template>\r\n    </div>\r\n    <div class=\"email-table-box\"\r\n         v-ComLoading=\"loading\">\r\n      <div class=\"tip-box\">\r\n        通过邮件邀约，定制邀约邮件，邀请特定客户群参加直播活动\r\n      </div>\r\n      <div class=\"table-list-box\"\r\n           style=\"padding-top: 20px;\">\r\n           <template v-if='emailList.length'>\r\n            <el-table :data=\"emailList\"\r\n                      style=\"width: 100%\">\r\n              <el-table-column prop=\"title\"\r\n                              label=\"邮件标题\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"sendTime\"\r\n                              label=\"发送时间\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"sendCount\"\r\n                              label=\"发送数量\">\r\n              </el-table-column>\r\n              <el-table-column prop=\"statusName\"\r\n                              label=\"状态\">\r\n                <template slot-scope=\"scope\">\r\n                  <span v-if=\"scope.row.status=='DRAFT'\"\r\n                        class=\"cg-status\">{{scope.row.statusName}}</span>\r\n                  <span v-if=\"scope.row.status=='SEND'\"\r\n                        class=\"fs-status\">{{scope.row.statusName}}</span>\r\n                  <span v-if=\"scope.row.status=='AWAIT'\"\r\n                        class=\"dd-status\">{{scope.row.statusName}}</span>\r\n                  <span v-if=\"scope.row.status=='FAIL'\"\r\n                        class=\"del-status\">{{scope.row.statusName}}</span>\r\n                  <!--DRAFT: '草稿',-->\r\n                  <!--SEND: '已发送',-->\r\n                  <!--AWAIT: '等待发送'-->\r\n                  <!--v-if=\"scope.row.status=='DRAFT'\"-->\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.info)\">查看</el-button>-->\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--v-if=\"emailList[scope.$index].status==='DRAFT'\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.send)\" disabled>立刻发送</el-button>-->\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--v-else-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.send)\">立刻发送</el-button>-->\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--v-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.edit)\">编辑</el-button>-->\r\n                  <!--<el-button-->\r\n                  <!--type=\"text\" size=\"small\"-->\r\n                  <!--v-if=\"emailList[scope.$index].status!=='SEND'\"-->\r\n                  <!--@click.stop=\"clickEmail(scope.$index,handleType.delete)\">删除</el-button>-->\r\n                  <div class=\"table-handler\">\r\n                    <span @click.stop=\"clickEmail(scope.$index,handleType.info)\">查看</span>\r\n                    <span v-if=\"emailList[scope.$index].status!=='SEND'\"\r\n                          @click.stop=\"clickEmail(scope.$index,handleType.delete)\">删除</span>\r\n                  </div>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n           </template>\r\n           <template v-else>\r\n            <div class=\"empty\">\r\n              <div class=\"img\"></div>\r\n              <div class=\"txt\">您还没有添加邮件邀约，快去添加吧</div>\r\n              <el-button class='primary-button' @click=\"addEmail\">新建邮件</el-button>\r\n            </div>\r\n           </template>\r\n      </div>\r\n      <div class=\"pagination-box\" v-if='emailList.length'>\r\n        <div class=\"page-pagination\">\r\n          <ve-pagination :total=\"total\"\r\n                         :pageSize=\"pageSize\"\r\n                         @changePage=\"changePage\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!--<message-box-->\r\n    <!--v-if=\"sendShow\"-->\r\n    <!--width=\"500px\"-->\r\n    <!--header=\"邮件推送确认\"-->\r\n    <!--confirmText='确认发送'-->\r\n    <!--@handleClick=\"handleClickSendEmail\">-->\r\n    <!--<div class=\"email-info\">-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>邮件标题：</span>-->\r\n    <!--<span>{{currentEmail.title}}</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>发件人：</span>-->\r\n    <!--<span>*****</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>收件人：</span>-->\r\n    <!--<span>666</span>-->\r\n    <!--</div>-->\r\n    <!--<div class=\"email-info-row\">-->\r\n    <!--<span>邮件摘要：</span>-->\r\n    <!--<span>***********************************************************</span>-->\r\n    <!--</div>-->\r\n    <!--</div>-->\r\n    <!--</message-box>-->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport activityService from 'src/api/activity-service'\r\nimport VePagination from 'src/components/ve-pagination'\r\nimport { mapMutations } from 'vuex'\r\nimport * as types from '../../../store/mutation-types'\r\nimport EventBus from 'src/utils/eventBus'\r\n\r\nconst handleType = {\r\n  info: 'queryInfoEmail',\r\n  send: 'sendEmail',\r\n  edit: 'editEmail',\r\n  delete: 'deleteEmail'\r\n}\r\nconst statusType = {\r\n  DRAFT: '草稿',\r\n  SEND: '已发送',\r\n  AWAIT: '等待发送',\r\n  FAIL: '发送失败'\r\n}\r\nexport default {\r\n  name: 'index',\r\n  components: { VePagination },\r\n  data () {\r\n    return {\r\n      pageSize: 10,\r\n      total: 0,\r\n      currentPage: 1,\r\n      activeId: '', // 活动id\r\n      sendShow: false,\r\n      currentEmailIdx: '',\r\n      handleType: handleType,\r\n      loading: false,\r\n      emailList: [\r\n        {\r\n          activityId: 0,\r\n          emailInviteId: 0,\r\n          title: '',\r\n          content: '',\r\n          desc: '',\r\n          planTime: '',\r\n          sendTime: '',\r\n          senderName: '',\r\n          sendCount: 0,\r\n          status: '',\r\n          statusName: ''\r\n        }\r\n      ],\r\n      countTotal: 0,\r\n      countBalance: 0\r\n    }\r\n  },\r\n  computed: {\r\n    currentEmail () {\r\n      return this.emailList[this.currentEmailIdx]\r\n    }\r\n  },\r\n  created () {\r\n    const queryId = this.$route.params.id\r\n    if (!queryId) {\r\n      this.$router.go(-1)\r\n    }\r\n    this.activeId = queryId\r\n    EventBus.$emit('breads', [{\r\n      title: '活动管理'\r\n    }, {\r\n      title: '活动列表',\r\n      url: '/liveMager/list'\r\n    }, {\r\n      title: '活动详情',\r\n      url: `/liveMager/detail/${this.activeId}`\r\n    }, {\r\n      title: '邮件邀约'\r\n    }])\r\n    this.getLimit()\r\n    this.queryEmailListById()\r\n  },\r\n  methods: {\r\n    ...mapMutations('liveMager', {\r\n      storeEmailInfo: types.EMAIL_INFO\r\n    }),\r\n    changePage (currentPage) {\r\n      this.currentPage = currentPage\r\n      this.queryEmailListById()\r\n    },\r\n    queryEmailListById () {\r\n      // this.loading = true\r\n      this.$get(activityService.GET_EMAIL_LIST, {\r\n        activityId: this.activeId,\r\n        pageSize: this.pageSize,\r\n        page: this.currentPage\r\n      }).then((res) => {\r\n        res.data.list.map((dataItem) => {\r\n          dataItem.statusName = statusType[dataItem.status]\r\n          dataItem.sendTime = dataItem.sendTime || '--'\r\n          dataItem.title = dataItem.title || '--'\r\n          return dataItem\r\n        })\r\n        this.total = res.data.total\r\n        this.emailList = res.data.list\r\n      })\r\n    },\r\n    clickEmail (idx, type) {\r\n      this.currentEmailIdx = idx\r\n      if (type === this.handleType.info) { // 查看\r\n        this.queryInfoEmail()\r\n      } else if (type === this.handleType.edit) { // 编辑\r\n        this.editEmail()\r\n      } else if (type === this.handleType.send) { // 立即发送\r\n        this.sendShow = true\r\n      } else if (type === this.handleType.delete) { // 删除\r\n        this.$messageBox({\r\n          header: '',\r\n          content: '删除邮件后，邮件内容将无法找回，确认删除？',\r\n          cancelText: '取消',\r\n          confirmText: '删除',\r\n          width: '400px',\r\n          handleClick: (e) => {\r\n            if (e.action === 'confirm') {\r\n              this.delEmail()\r\n            }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    queryInfoEmail () {\r\n      const email = this.emailList[this.currentEmailIdx]\r\n      // this.storeEmailInfo(email)\r\n      this.$router.push(`/liveMager/emailInfo/${this.activeId}?email=${email.emailInviteId}`)\r\n    },\r\n    sendEmail () {\r\n      this.$post(activityService.POST_SEND_EMAIL_INFO, {\r\n        emailInviteId: this.emailList[this.currentEmailIdx].emailInviteId\r\n      }).then((res) => {\r\n        console.log('邮件发送成功')\r\n        console.log(res)\r\n      })\r\n      // LiveHttp.sendEmailInfo({\r\n      //   emailInviteId: this.emailList[this.currentEmailIdx].emailInviteId\r\n      // }).then((res) => {\r\n      //   console.log('邮件发送成功')\r\n      //   console.log(res)\r\n      // }).catch((e) => {\r\n      //   console.log('邮件发送失败')\r\n      //   console.log(e)\r\n      // })\r\n    },\r\n    handleClickSendEmail (e) {\r\n      this.sendShow = false\r\n      if (e.action === 'confirm') {\r\n        this.sendEmail()\r\n      }\r\n    },\r\n    delEmail () {\r\n      const emaiId = this.emailList[this.currentEmailIdx].emailInviteId\r\n      this.$post(activityService.POST_DEL_EMAIL, {\r\n        emailInviteId: emaiId\r\n      }).then((res) => {\r\n        this.queryEmailListById()\r\n      })\r\n      // LiveHttp.deleteEmailById(emaiId).then((res) => {\r\n      //   if (res.code === 200) {\r\n      //     this.queryEmailListById()\r\n      //   }\r\n      // }).catch((e) => {\r\n      //   console.log('删除邮件失败')\r\n      //   console.log(e)\r\n      // })\r\n    },\r\n    editEmail () {\r\n      const email = this.emailList[this.currentEmailIdx]\r\n      this.storeEmailInfo(email)\r\n      this.$router.push(`/liveMager/emailEdit/${this.activeId}?email=${email.emailInviteId}`)\r\n    },\r\n    addEmail () {\r\n      this.$router.push(`/liveMager/emailEditOne/${this.activeId}`)\r\n    },\r\n    getLimit () {\r\n      this.$get(activityService.GET_SEND_LIMIT, {\r\n        activityId: this.activeId,\r\n        type: 'EMAIL'\r\n      }).then((res) => {\r\n        console.log(res)\r\n        this.countBalance = res.data.balance\r\n        this.countTotal = res.data.total\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped src=\"../css/live.scss\"></style>\r\n<style lang=\"scss\" scoped>\r\n@import '~assets/css/mixin.scss';\r\n.email-table-box {\r\n  font-size: 14px;\r\n}\r\n.live-title {\r\n  .create-button {\r\n    height: 30px;\r\n    line-height: 30px;\r\n    margin-right: 110px;\r\n    margin-top: 17px;\r\n  }\r\n}\r\n.send-box {\r\n  display: inline-block;\r\n  color: #888;\r\n  font-size: 14px;\r\n  line-height: 60px;\r\n  margin-right: 20px;\r\n}\r\n\r\n.cg-status {\r\n  color: #1bcab7;\r\n}\r\n\r\n.fs-status {\r\n  color: #4b5afe;\r\n}\r\n\r\n.dd-status {\r\n  color: #ff8b0e;\r\n}\r\n\r\n.del-status {\r\n  color: #fc5659;\r\n}\r\n\r\n.email-box {\r\n  // margin-top: 20px;\r\n}\r\n.table-list-box {\r\n  .empty {\r\n    text-align: center;\r\n    margin: 100px 0;\r\n    .txt {\r\n      padding-top: 20px;\r\n      font-size: 16px;\r\n      color: $color-font;\r\n    }\r\n    .img {\r\n      width: 150px;\r\n      height: 150px;\r\n      margin: 0 auto;\r\n      background: url('~assets/image/email_empty.png') no-repeat center;\r\n      background-size: contain;\r\n    }\r\n    .el-button {\r\n      padding: 0;\r\n      width: 220px;\r\n      height: 40px;\r\n      text-align: center;\r\n      line-height: 40px;\r\n      margin-top: 20px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=6533cfb3&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"../css/live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6533cfb3\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\fe_management\\\\node_modules\\\\_vue-hot-reload-api@2.3.0@vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('6533cfb3', component.options)\n    } else {\n      api.reload('6533cfb3', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=6533cfb3&scoped=true&\", function () {\n      api.rerender('6533cfb3', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src\\\\pages\\\\live-mager\\\\email\\\\index.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=6533cfb3&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.5@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../../node_modules/_vue-loader@15.3.0@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&id=6533cfb3&lang=scss&scoped=true&\""],"sourceRoot":""}