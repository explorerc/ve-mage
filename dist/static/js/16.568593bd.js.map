{"version":3,"sources":["webpack:///./src/pages/live-mager/css/live.scss?a358","webpack:///./src/pages/live-mager/email/edit-step-one.vue?2371","webpack:///./src/pages/live-mager/email/edit-step-one.vue?177d","webpack:///./src/pages/live-mager/email/edit-step-one.vue?9571","webpack:///src/pages/live-mager/email/edit-step-one.vue","webpack:///./src/pages/live-mager/email/edit-step-one.vue"],"names":["_node_modules_mini_css_extract_plugin_0_4_3_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_live_scss_vue_type_style_index_0_id_f4e271ae_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","n","_node_modules_mini_css_extract_plugin_0_4_3_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_1_0_0_css_loader_index_js_node_modules_vue_loader_15_4_2_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_2_1_6_postcss_loader_lib_index_js_node_modules_sass_loader_7_1_0_sass_loader_lib_loader_js_node_modules_vue_loader_15_4_2_vue_loader_lib_index_js_vue_loader_options_edit_step_one_vue_vue_type_style_index_1_id_f4e271ae_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","goBack","_v","model","value","email","content","callback","$$v","$set","expression","recoverDefault","_l","emailList","emailItem","idx","class","temp-item","fl","active","emailTemplateId","$event","stopPropagation","changeTemp","style","backgroundColor","cover","_s","title","directives","name","rawName","testEmailShow","attrs","header","type","width","handleClick","emailHandleClick","testEmailAddress","error-tips","emailError","maxLength","placeholder","update:value","nativeOn","keyup","_k","keyCode","key","sendTestEmail","slot","testEmailCount","clickSendTestEmail","nextEmail","saveEmail","_withStripped","email_edit_step_onevue_type_script_lang_js_","data","isHistory","activityId","emailInviteId","desc","senderName","PC_HOST","location","protocol","components","VeHtml5Editer","ve_html5_editer","computed","Object","vuex_esm","emailInfo","state","beforeRouteEnter","to","from","next","vm","initPage","watch","handler","newVal","extends_default","immediate","methods","storeEmailInfo","mutation_types","queryId","$route","params","id","emailId","query","queryEmailTemp","queryEmailInfo","$router","go","_this","$post","activity_service","POST_TEST_EMAIL_INFO","then","res","e","action","_this2","$get","GET_EMAIL_INFO","_this3","GET_EMAIL_TPL_LIST","list","replace","_this4","RegExp","test","POST_SEND_TEST_EMAIL_INFO","receiverEmail","$toast","autoClose","position","$messageBox","confirmText","_this5","POST_SAVE_EMAIL_INFO","push","_this6","cancelText","_this7","i","length","emailObj","component","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"static/js/16.568593bd.js","sourcesContent":["import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=f4e271ae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!./live.scss?vue&type=style&index=0&id=f4e271ae&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./edit-step-one.vue?vue&type=style&index=1&id=f4e271ae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/_mini-css-extract-plugin@0.4.3@mini-css-extract-plugin/dist/loader.js!../../../../node_modules/_css-loader@1.0.0@css-loader/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/_postcss-loader@2.1.6@postcss-loader/lib/index.js!../../../../node_modules/_sass-loader@7.1.0@sass-loader/lib/loader.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./edit-step-one.vue?vue&type=style&index=1&id=f4e271ae&lang=scss&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"edit-step-box\" },\n    [\n      _c(\"header\", { staticClass: \"email-header\" }, [\n        _c(\"div\", { staticClass: \"back-btn\", on: { click: _vm.goBack } }, [\n          _c(\"i\", { staticClass: \"iconfont icon-jiantou\" })\n        ]),\n        _vm._v(\" \"),\n        _c(\"span\", [_vm._v(\"步骤1 邮件内容\")])\n      ]),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"border-box\" }, [\n        _c(\"div\", { staticClass: \"edit-content clearfix\" }, [\n          _c(\n            \"div\",\n            { staticClass: \"edit-content-box fl\" },\n            [\n              _c(\"ve-html5-editer\", {\n                model: {\n                  value: _vm.email.content,\n                  callback: function($$v) {\n                    _vm.$set(_vm.email, \"content\", $$v)\n                  },\n                  expression: \"email.content\"\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"div\", { staticClass: \"edit-content-temp fr\" }, [\n            _c(\"div\", { staticClass: \"temp-title\" }, [\n              _c(\"span\", [_vm._v(\"选择模板\")]),\n              _vm._v(\" \"),\n              _c(\n                \"button\",\n                {\n                  staticClass: \"default-button fr\",\n                  on: { click: _vm.recoverDefault }\n                },\n                [_vm._v(\"恢复默认\")]\n              )\n            ]),\n            _vm._v(\" \"),\n            _c(\n              \"div\",\n              { staticClass: \"temp-boxs\" },\n              _vm._l(_vm.emailList, function(emailItem, idx) {\n                return _c(\n                  \"div\",\n                  {\n                    class: {\n                      \"temp-item\": true,\n                      fl: true,\n                      active:\n                        emailItem.emailTemplateId == _vm.email.emailTemplateId\n                    },\n                    on: {\n                      click: function($event) {\n                        $event.stopPropagation()\n                        _vm.changeTemp(idx)\n                      }\n                    }\n                  },\n                  [\n                    _c(\"div\", {\n                      staticClass: \"temp-item-box\",\n                      style: { backgroundColor: emailItem.cover }\n                    }),\n                    _vm._v(\" \"),\n                    _c(\"span\", { staticClass: \"temp-item-title\" }, [\n                      _vm._v(_vm._s(emailItem.title))\n                    ])\n                  ]\n                )\n              })\n            )\n          ])\n        ])\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"message-box\",\n        {\n          directives: [\n            {\n              name: \"show\",\n              rawName: \"v-show\",\n              value: _vm.testEmailShow,\n              expression: \"testEmailShow\"\n            }\n          ],\n          attrs: { header: \"邮件测试发送\", type: \"prompt\", width: \"450px\" },\n          on: { handleClick: _vm.emailHandleClick }\n        },\n        [\n          _c(\n            \"div\",\n            { staticClass: \"email-box\" },\n            [\n              _c(\"span\", { staticClass: \"test-tip\" }, [\n                _vm._v(\"每天只允许发送5条测试邮件：\")\n              ]),\n              _vm._v(\" \"),\n              _c(\"com-input\", {\n                attrs: {\n                  value: _vm.testEmailAddress,\n                  \"error-tips\": _vm.emailError,\n                  maxLength: 40,\n                  placeholder: \"输入邮件地址\"\n                },\n                on: {\n                  \"update:value\": function($event) {\n                    _vm.testEmailAddress = $event\n                  }\n                },\n                nativeOn: {\n                  keyup: function($event) {\n                    if (\n                      !(\"button\" in $event) &&\n                      _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")\n                    ) {\n                      return null\n                    }\n                    return _vm.sendTestEmail($event)\n                  }\n                }\n              })\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            {\n              staticClass: \"step-one-btns\",\n              attrs: { slot: \"bottom\" },\n              slot: \"bottom\"\n            },\n            [\n              _c(\"span\", [_vm._v(\"邮件限额：\" + _vm._s(_vm.testEmailCount))]),\n              _vm._v(\" \"),\n              _c(\n                \"button\",\n                {\n                  staticClass: \"primary-button\",\n                  on: { click: _vm.sendTestEmail }\n                },\n                [_vm._v(\"立即发送\")]\n              )\n            ]\n          )\n        ]\n      ),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"email-bottom\" }, [\n        _c(\n          \"button\",\n          {\n            staticClass: \"default-button fl\",\n            on: { click: _vm.clickSendTestEmail }\n          },\n          [_vm._v(\"发送测试邮件\")]\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          { staticClass: \"primary-button fr\", on: { click: _vm.nextEmail } },\n          [_vm._v(\"下一步\")]\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          {\n            staticClass: \"default-button margin-fl fr\",\n            on: { click: _vm.saveEmail }\n          },\n          [_vm._v(\"保存草稿\")]\n        )\n      ])\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./edit-step-one.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/_babel-loader@7.1.5@babel-loader/lib/index.js!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/index.js??vue-loader-options!./edit-step-one.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"edit-step-box\">\n    <header class=\"email-header\">\n      <div class=\"back-btn\"\n           @click=\"goBack\">\n        <i class=\"iconfont icon-jiantou\"></i>\n      </div>\n      <span>步骤1 邮件内容</span>\n    </header>\n    <div class=\"border-box\">\n      <div class=\"edit-content clearfix\">\n        <div class=\"edit-content-box fl\">\n          <ve-html5-editer v-model=\"email.content\"></ve-html5-editer>\n        </div>\n        <div class=\"edit-content-temp fr\">\n          <div class=\"temp-title\">\n            <span>选择模板</span>\n            <button class=\"default-button fr\"\n                    @click=\"recoverDefault\">恢复默认</button>\n          </div>\n          <div class=\"temp-boxs\">\n            <div v-for=\"(emailItem,idx) in emailList\"\n                 :class=\"{'temp-item':true,fl:true,active:emailItem.emailTemplateId==email.emailTemplateId}\"\n                 @click.stop=\"changeTemp(idx)\">\n              <div class=\"temp-item-box\"\n                   :style=\"{backgroundColor:emailItem.cover}\"></div>\n              <span class=\"temp-item-title\">{{emailItem.title}}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 发送测试邮件 -->\n    <message-box v-show=\"testEmailShow\"\n                 header=\"邮件测试发送\"\n                 type=\"prompt\"\n                 width=\"450px\"\n                 @handleClick=\"emailHandleClick\">\n      <div class=\"email-box\">\n        <span class=\"test-tip\">每天只允许发送5条测试邮件：</span>\n        <com-input :value.sync=\"testEmailAddress\"\n                   :error-tips=\"emailError\"\n                   :maxLength=\"40\"\n                   @keyup.enter.native=\"sendTestEmail\"\n                   placeholder=\"输入邮件地址\" />\n      </div>\n      <div class=\"step-one-btns\"\n           slot=\"bottom\">\n        <span>邮件限额：{{testEmailCount}}</span>\n        <button class=\"primary-button\"\n                @click=\"sendTestEmail\">立即发送</button>\n      </div>\n    </message-box>\n    <div class=\"email-bottom\">\n      <button class=\"default-button fl\"\n              @click=\"clickSendTestEmail\">发送测试邮件</button>\n      <button class=\"primary-button fr\"\n              @click=\"nextEmail\">下一步</button>\n      <button class=\"default-button margin-fl fr\"\n              @click=\"saveEmail\">保存草稿</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport activityService from 'src/api/activity-service'\nimport VeHtml5Editer from 'src/components/ve-html5-editer'\nimport { mapState, mapMutations } from 'vuex'\nimport * as types from '../../../store/mutation-types'\n\nexport default {\n  name: 'edit-step-one',\n  data () {\n    return {\n      testEmailShow: false,\n      testEmailAddress: '',\n      testEmailCount: 0,\n      emailError: '',\n      emailList: [],\n      isHistory: false,\n      email: {\n        activityId: '',\n        emailInviteId: '',\n        emailTemplateId: 1,\n        title: '',\n        content: '',\n        desc: '',\n        senderName: ''\n      },\n      PC_HOST: location.protocol + process.env.PC_HOST\n    }\n  },\n  components: { VeHtml5Editer },\n  computed: mapState('liveMager', {\n    emailInfo: state => state.emailInfo\n  }),\n  /* 路由守卫，在路由跳转前执行，此时组件实例还没被创建 */\n  beforeRouteEnter (to, from, next) {\n    next(vm => {\n      if (from.name === 'emailEditTwo') {\n        /* 表示第二步进入第一步 */\n        vm.isHistory = true\n      }\n      vm.initPage()\n    })\n  },\n  watch: {\n    emailInfo: {\n      handler (newVal) {\n        this.email = { ...this.email, ...newVal }\n      },\n      immediate: true\n    },\n    testEmailAddress () {\n      this.emailError = ''\n    }\n  },\n  methods: {\n    ...mapMutations('liveMager', {\n      storeEmailInfo: types.EMAIL_INFO\n    }),\n    initPage () {\n      if (this.isHistory) {\n        this.email = this.emailInfo\n        return\n      }\n      const queryId = this.$route.params.id\n      if (!queryId) {\n        this.$router.go(-1)\n        return\n      }\n      const emailId = this.$route.query.email\n      if (emailId) { // 编辑\n        // 如果vuex可以取到值就return\n        if (this.email.emailInviteId) {\n          this.queryEmailTemp()\n          return\n        }\n        this.email.emailInviteId = emailId\n        this.queryEmailInfo()\n      } else { // 新增\n        this.email = {\n          activityId: queryId,\n          emailInviteId: '',\n          emailTemplateId: 1,\n          title: '',\n          content: '',\n          desc: '',\n          senderName: ''\n        }\n        this.storeEmailInfo(this.email)\n      }\n      this.queryEmailTemp()\n    },\n    clickSendTestEmail () {\n      this.testEmailShow = true\n      this.$post(activityService.POST_TEST_EMAIL_INFO, {\n        type: 'email'\n      }).then((res) => {\n        this.testEmailCount = res.data\n      })\n      // LiveHttp.queryTestEmailInfo({\n      //   type: 'email'\n      // }).then((res) => {\n      //   this.testEmailCount = res.data\n      // })\n    },\n    emailHandleClick (e) {\n      if (e.action === 'cancel') {\n        this.testEmailShow = false\n      }\n    },\n    /* 查询邮件详情 */\n    queryEmailInfo () {\n      // 如果不是编辑页面就return\n      if (!this.email.emailInviteId) return\n      this.$get(activityService.GET_EMAIL_INFO, {\n        emailInviteId: this.email.emailInviteId\n      }).then((res) => {\n        this.email = res.data\n        this.storeEmailInfo(this.email)\n      })\n      // LiveHttp.queryEmailInfoById(this.email.emailInviteId).then((res) => {\n      //   this.email = res.data\n      //   this.storeEmailInfo(this.email)\n      // })\n    },\n    queryEmailTemp () {\n      this.$get(activityService.GET_EMAIL_TPL_LIST).then((res) => {\n        if (!res.data.list) return\n        this.emailList = res.data.list\n        if (!this.email.emailInviteId) { // 如果不是编辑\n          this.email.content = this.emailList[0].content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\n        }\n      })\n      // LiveHttp.queryEmailTemplateList().then((res) => {\n      //   if (!res.data.list) return\n      //   this.emailList = res.data.list\n      //   if (!this.email.emailInviteId) { // 如果不是编辑\n      //     this.email.content = this.emailList[0].content\n      //   }\n      // })\n    },\n    sendTestEmail () {\n      if (!this.testEmailAddress) {\n        this.emailError = '邮箱不能为空'\n        return\n      } else {\n        const emailReg = new RegExp('^[a-z0-9]+([._\\\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$')\n        if (!emailReg.test(this.testEmailAddress)) {\n          this.emailError = '邮箱格式不正确'\n          return\n        }\n      }\n      if (!this.email.content) {\n        this.$messageBox({\n          header: '提示',\n          content: '邮件内容不能为空',\n          confirmText: '知道了',\n          autoClose: 10\n        })\n        return\n      }\n      this.testEmailShow = false\n      this.email.content = this.email.content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\n      this.$post(activityService.POST_SEND_TEST_EMAIL_INFO, {\n        content: this.email.content,\n        receiverEmail: this.testEmailAddress\n      }).then((res) => {\n        this.$toast({\n          header: `提示`,\n          content: '发送成功，请稍后查收邮件',\n          autoClose: 2000,\n          position: 'right-top'\n        })\n      })\n      // LiveHttp.sendTestEmailInfo({\n      //   content: this.email.content,\n      //   receiverEmail: this.testEmailAddress\n      // }).then((res) => {\n      //   if (res.code === 200) {\n      //     this.$toast({\n      //       header: `提示`,\n      //       content: '发送成功，请稍后查收邮件',\n      //       autoClose: 2000,\n      //       position: 'right-top'\n      //     })\n      //   }\n      // })\n    },\n    /* 保存草稿 */\n    saveEmail () {\n      this.email.content = this.email.content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\n      this.$post(activityService.POST_SAVE_EMAIL_INFO, this.email).then((res) => {\n        // 回写邮件id\n        if (!this.email.emailInviteId) {\n          this.$router.replace({ query: { email: res.data.emailInviteId } })\n        }\n        this.email.emailInviteId = res.data.emailInviteId\n        this.email.title = res.data.title\n        // 把信息保存到vuex\n        this.storeEmailInfo(this.email)\n        this.$toast({\n          header: `提示`,\n          content: '保存草稿成功',\n          autoClose: 2000,\n          position: 'right-top'\n        })\n      })\n      // LiveHttp.saveEmailInfo(this.email).then((res) => {\n      //   // 回写邮件id\n      //   this.email.emailInviteId = res.data.emailInviteId\n      //   this.email.title = res.data.title\n      //   // 把信息保存到vuex\n      //   this.storeEmailInfo(this.email)\n      //   this.$toast({\n      //     header: `提示`,\n      //     content: '保存草稿成功',\n      //     autoClose: 2000,\n      //     position: 'right-top'\n      //   })\n      // })\n    },\n    goBack () {\n      this.$router.go(-1)\n    },\n    nextEmail () {\n      this.storeEmailInfo(this.email)\n      // 切换到下一步\n      this.$router.push(`/liveMager/emailEditTwo/${this.email.activityId}?email=${this.email.emailInviteId}`)\n    },\n    /* 更换模板 */\n    changeTemp (idx) {\n      this.$messageBox({\n        header: '',\n        content: '更换邮件模板会导致已编辑的内容丢失',\n        cancelText: '取消',\n        confirmText: '确认替换',\n        handleClick: (e) => {\n          if (e.action === 'confirm') {\n            this.email.emailTemplateId = this.emailList[idx].emailTemplateId\n            this.email.content = this.emailList[idx].content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\n          }\n        }\n      })\n    },\n    /* 恢复默认模板 */\n    recoverDefault () {\n      this.$messageBox({\n        header: '',\n        width: '400px',\n        content: '恢复默认模板会导致已编辑的内容丢失',\n        cancelText: '取消',\n        confirmText: '恢复默认',\n        handleClick: (e) => {\n          if (e.action === 'confirm') {\n            for (let i = 0; i < this.emailList.length; i++) {\n              const emailObj = this.emailList[i]\n              if (emailObj.emailTemplateId === this.email.emailTemplateId) {\n                this.email.content = emailObj.content.replace('$$activity$$', `${this.PC_HOST}watch/${this.email.activityId}`)\n                break\n              }\n            }\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped src=\"../css/live.scss\">\n</style>\n<style lang=\"scss\" scoped>\n  @import 'assets/css/mixin.scss';\n\n  .edit-step-box {\n    min-width: 1366px;\n    background-color: #fff;\n    color: #222;\n    .email-header {\n      height: 60px;\n      line-height: 60px;\n      background-color: #ffd021;\n      .icon-jiantou {\n        font-size: 22px;\n        vertical-align: -2px;\n      }\n      .back-btn {\n        display: inline-block;\n        padding: 0 15px;\n        background-color: #ffda51;\n        line-height: 40px;\n        border-radius: 4px;\n        font-size: 18px;\n        text-align: center;\n        margin-left: 20px;\n        margin-right: 10px;\n        &:hover {\n          cursor: pointer;\n          opacity: 0.9;\n          color: #4b5afe;\n        }\n      }\n    }\n    .email-bottom {\n      height: 60px;\n      line-height: 60px;\n      border-top: 1px solid #e2e2e2;\n      box-sizing: border-box;\n      box-shadow: 0 0 4px rgba(0, 0, 0, 0.1);\n      padding: 0 20px;\n      background-color: #fff;\n      button {\n        margin-top: 10px;\n      }\n      .margin-fl {\n        margin-right: 10px;\n      }\n    }\n    .border-box /deep/ {\n      height: calc(100vh - 120px);\n      .html-editer {\n        height: 100%;\n        .vue-html5-editor .content {\n          background-color: #f5f5f5;\n        }\n      }\n    }\n    .step-btns {\n      margin: 30px 30px 100px 30px;\n      .margin-fl {\n        margin: 0 20px;\n      }\n    }\n    .edit-content {\n      height: 100%;\n      margin: 0 0 20px 0;\n      .edit-content-temp {\n        height: calc(100% - 36px);\n        width: 356px;\n        margin-top: 36px;\n        padding: 0 1.8%;\n        box-sizing: border-box;\n        overflow-y: scroll;\n        .temp-title {\n          span {\n            line-height: 44px;\n            color: #555;\n          }\n        }\n        .temp-boxs {\n          margin-top: 20px;\n          .temp-item {\n            width: 124px;\n            margin: 10px 15px;\n            text-align: center;\n            &:nth-child(2n) {\n              margin-right: 0;\n            }\n            &:nth-child(2n + 1) {\n              margin-left: 0;\n            }\n            .temp-item-box {\n              height: 196px;\n              box-sizing: border-box;\n              border: solid 1px #e5e5e5;\n              border-radius: 4px;\n              background-size: cover;\n              &:hover {\n                cursor: pointer;\n                border-color: #4b5afe;\n                transition: border-color 0.2s;\n              }\n            }\n            .temp-item-title {\n              display: block;\n              padding-top: 5px;\n              font-size: 14px;\n              color: #555555;\n            }\n            &:nth-child(1) .temp-item-box {\n              background-image: url('../../../assets/image/email-01.jpg');\n            }\n            &:nth-child(2) .temp-item-box {\n              background-image: url('../../../assets/image/email-02.jpg');\n            }\n            &:nth-child(3) .temp-item-box {\n              background-image: url('../../../assets/image/email-03.jpg');\n            }\n            &:nth-child(4) .temp-item-box {\n              background-image: url('../../../assets/image/email-04.jpg');\n            }\n          }\n          .active {\n            .temp-item-box {\n              border-color: #4b5afe;\n            }\n          }\n        }\n      }\n      .edit-content-box /deep/ {\n        width: calc(100% - 356px);\n        height: 100%;\n        .vue-html5-editor {\n          height: 100%;\n          border: none;\n          border-right: solid 1px #e5e5e5;\n          border-radius: 0;\n          .content {\n            height: calc(100% - 37px);\n            max-height: calc(100% - 37px);\n            padding: 0;\n          }\n        }\n      }\n    }\n    .email-box {\n      width: 100%;\n      margin: 15px 10px;\n      .test-tip {\n        font-size: 14px;\n        color: #4b5afe;\n        line-height: 40px;\n      }\n      .com-input {\n        width: 390px;\n      }\n    }\n    .step-one-btns {\n      margin: 40px 10px -10px 10px;\n      span {\n        float: left;\n        line-height: 45px;\n        font-size: 14px;\n        color: #888;\n      }\n    }\n  }\n</style>\n","import { render, staticRenderFns } from \"./edit-step-one.vue?vue&type=template&id=f4e271ae&scoped=true&\"\nimport script from \"./edit-step-one.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-step-one.vue?vue&type=script&lang=js&\"\nimport style0 from \"../css/live.scss?vue&type=style&index=0&id=f4e271ae&lang=scss&scoped=true&\"\nimport style1 from \"./edit-step-one.vue?vue&type=style&index=1&id=f4e271ae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/_vue-loader@15.4.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f4e271ae\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/x.g/Documents/work/fe_management/node_modules/_vue-hot-reload-api@2.3.1@vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('f4e271ae', component.options)\n    } else {\n      api.reload('f4e271ae', component.options)\n    }\n    module.hot.accept(\"./edit-step-one.vue?vue&type=template&id=f4e271ae&scoped=true&\", function () {\n      api.rerender('f4e271ae', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/pages/live-mager/email/edit-step-one.vue\"\nexport default component.exports"],"sourceRoot":""}