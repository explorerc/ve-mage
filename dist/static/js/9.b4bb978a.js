(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{172:function(a,t,e){"use strict";var s=e(5);const i={queryList:a=>s.a.ajax({method:"post",url:"/manage/base-manage/list-activity",params:a}),deleteById:a=>s.a.ajax({method:"post",url:"/manage/base-manage/del-activity",params:{id:a}}),queryWarmInfoById:a=>s.a.ajax({method:"post",url:"/manage/warm-up-manage/get",params:{activityId:a}}),saveAndEditWarmInfo:a=>s.a.ajax({method:"post",url:"/manage/warm-up-manage/edit",params:a}),queryReminderInfoById:a=>s.a.ajax({method:"post",url:"/",params:{id:a}}),saveReminderInfo:a=>s.a.ajax({method:"post",url:"/",params:a}),roleList:a=>s.a.ajax({method:"GET",url:"/manage/role-manage/list-role",params:{activityId:a}}),delAss:a=>s.a.ajax({method:"POST",url:"/manage/role-manage/del-assistant",params:a}),handleAss:(a,t)=>s.a.ajax({method:"POST",url:a?"/manage/role-manage/update-assistant":"/manage/role-manage/add-assistant",params:t}),getLimit:a=>s.a.ajax({method:"GET",url:"/manage/view-limit/get-limit",params:{activityId:a}}),saveLimit:a=>s.a.ajax({method:"POST",url:"/manage/view-limit/update-limit",params:a}),webinarInfo:a=>s.a.ajax({method:"GET",url:"/manage/base-manage/detail-activity",params:{id:a}}),updateWebinfo:(a,t)=>s.a.ajax({method:"POST",url:a?"/manage/base-manage/add-activity":"/manage/base-manage/update-activity",params:t}),queryEmailList:a=>s.a.ajax({method:"post",url:"/expand/email-invite/list",params:a}),deleteEmailById:a=>s.a.ajax({method:"post",url:"/expand/email-invite/delete",params:{emailInviteId:a}}),queryEmailInfoById:a=>s.a.ajax({method:"post",url:"/expand/email-invite/query",params:{emailInviteId:a}}),queryEmailTemplateList:()=>s.a.ajax({method:"post",url:"/expand/email-invite/templates",params:{}}),sendEmailInfo:a=>s.a.ajax({method:"post",url:"/expand/email-invite/send",params:a}),sendTimerEmailInfo:a=>s.a.ajax({method:"post",url:"/expand/email-invite/save-and-plansend",params:a}),sendTestEmailInfo:a=>s.a.ajax({method:"post",url:"/expand/email-invite/test-send",params:a}),saveAndsendEmail:a=>s.a.ajax({method:"post",url:"/expand/email-invite/save-and-send",params:a}),saveEmailInfo:a=>s.a.ajax({method:"post",url:"/expand/email-invite/save-draft",params:a}),saveWechat:a=>s.a.ajax({method:"post",url:"/expand/wechat-invite/save",params:a}),saveMsg:a=>s.a.ajax({method:"post",url:"/expand/sms-invite/save",params:a}),queryWechat:a=>s.a.ajax({method:"post",url:"/expand/wechat-invite/query",params:{inviteId:a}}),queryMsg:a=>s.a.ajax({method:"post",url:"/expand/sms-invite/query",params:{inviteId:a}}),queryWechatlist:a=>s.a.ajax({method:"post",url:"/expand/wechat-invite/list",params:a}),queryMsglist:a=>s.a.ajax({method:"post",url:"/expand/sms-invite/list",params:a}),deleteWechat:a=>s.a.ajax({method:"post",url:"/expand/wechat-invite/delete",params:{inviteId:a}}),deleteMsg:a=>s.a.ajax({method:"post",url:"/expand/sms-invite/delete",params:{inviteId:a}}),queryPassSdkInfo:()=>s.a.ajax({method:"post",url:"/common/pass-sdk/create-access-token",params:{}})};t.a=i},173:function(a,t,e){},177:function(a,t,e){"use strict";var s=e(173);e.n(s).a},179:function(a,t,e){"use strict";var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("com-upload",{attrs:{accept:a.accept,actionUrl:"/api/upload/do-upload",inputName:"file",fileSize:a.fileSize},on:{error:a.uploadError,progress:a.uploadProgress,load:a.uploadImgSuccess}},[e("div",{staticClass:"upload-file-box",attrs:{title:"点击上传"}},[a.percentImg?e("el-progress",{attrs:{type:"circle",percentage:a.percentImg}}):a._e(),a._v(" "),e("i",{staticClass:"iconfont icon-jiahao"}),a._v(" "),e("span",[a._v(a._s(a.tipTxt))]),a._v(" "),a.fileSrc||a.coverImg?e("div",{staticClass:"upload-file-botton",on:{click:function(t){return t.stopPropagation(),a.deleteImage(t)}}},[a._v("删除")]):a._e(),a._v(" "),e("transition",{attrs:{name:"fade"}},[a.fileSrc?e("div",{staticClass:"temp-img",style:{backgroundImage:"url("+a.imgHost+"/"+a.fileSrc+")"}}):a._e(),a._v(" "),!a.fileSrc&&a.coverImg?e("div",{staticClass:"temp-img",style:{backgroundImage:"url("+a.coverImg+")"}}):a._e()])],1)])};s._withStripped=!0;var i={name:"ve-upload",components:{ComUpload:e(41).a},data:()=>({imgHost:"",fileSrc:"",coverImg:"",tipTxt:"",percentImg:0}),props:{accept:{type:String,default:"png|jpg|jpeg|bmp|gif|doc|mp4"},fileSize:{type:Number,default:1024},defaultImg:{type:String,default:""},title:{type:String,default:"上传文件"}},watch:{defaultImg:{handler(a){this.coverImg=a},immediate:!0},title:{handler(a){this.tipTxt=a},immediate:!0}},methods:{deleteImage(){this.coverImg="",this.fileSrc="",this.$emit("success",{name:"",host:""})},uploadProgress(a){this.percentImg=parseFloat(parseFloat(a.percent.replace("%","")).toFixed(2)),100===this.percentImg&&(this.percentImg=0)},uploadImgSuccess(a){const t=JSON.parse(a.data).data;t.host&&(this.imgHost=t.host),t.name&&(this.fileSrc=t.name),this.$emit("success",t)},uploadError(a){this.fileSrc="",this.$emit("error",a)}}},r=(e(177),e(1)),o=Object(r.a)(i,s,[],!1,null,null,null);o.options.__file="src\\components\\ve-upload.vue";t.a=o.exports},196:function(a,t,e){},267:function(a,t,e){"use strict";var s=e(196);e.n(s).a},364:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"live-mager"},[e("div",{staticClass:"live-title"},[e("span",[a._v("暖场设置")]),a._v(" "),e("el-button",{staticClass:"live-btn fr",attrs:{type:"primary",plain:""},on:{click:a.goBack}},[a._v("返回")])],1),a._v(" "),e("div",{staticClass:"mager-box"},[e("div",{staticClass:"from-box"},[e("div",{staticClass:"from-row"},[e("div",{staticClass:"from-title"},[a._v("暖场开关：")]),a._v(" "),e("div",{staticClass:"from-content"},[e("el-checkbox",{model:{value:a.isSwitch,callback:function(t){a.isSwitch=t},expression:"isSwitch"}},[a._v("开启")]),a._v(" "),e("span",{staticClass:"msg-tip"},[a._v("关闭后，直播观看页将不显示开场内容")])],1)]),a._v(" "),e("div",{staticClass:"from-row"},[a._m(0),a._v(" "),e("div",{staticClass:"from-content"},[e("div",{staticClass:"upload-video"},[e("div",{directives:[{name:"ComLoading",rawName:"v-ComLoading",value:a.loading,expression:"loading"}],staticClass:"upload-file-box",attrs:{title:"点击上传","com-loading-text":"准备中..."},on:{click:a.uploadVideo}},[a.percentVideo?e("el-progress",{attrs:{type:"circle",percentage:a.percentVideo}}):a._e(),a._v(" "),e("i",{staticClass:"iconfont icon-jiahao"}),a._v(" "),e("span",[a._v("上传视频")]),a._v(" "),a._m(1)],1),a._v(" "),e("div",{staticClass:"upload-tips"},[e("span",[a._v("视频仅支持mp4格式，文件大小不超过200M")]),a._v(" "),a.uploadErrorMsg?e("span",{staticClass:"error"},[a._v(a._s(a.uploadErrorMsg))]):a._e()])])])]),a._v(" "),e("div",{staticClass:"from-row"},[a._m(2),a._v(" "),e("div",{staticClass:"from-content"},[e("el-radio",{attrs:{label:"AUTO"},model:{value:a.warm.playMode,callback:function(t){a.$set(a.warm,"playMode",t)},expression:"warm.playMode"}},[a._v("自动循环")]),a._v(" "),e("el-radio",{attrs:{label:"ONCE"},model:{value:a.warm.playMode,callback:function(t){a.$set(a.warm,"playMode",t)},expression:"warm.playMode"}},[a._v("单次播放")])],1)]),a._v(" "),e("div",{staticClass:"from-row"},[e("div",{staticClass:"from-title"},[a._v("视频封面：")]),a._v(" "),e("div",{staticClass:"from-content"},[e("div",{staticClass:"from-content"},[e("ve-upload",{attrs:{title:"上传封面",accept:"png|jpg|jpeg|bmp|gif",defaultImg:a.defaultImg,fileSize:1024},on:{error:a.uploadError,success:a.uploadImgSuccess}}),a._v(" "),e("div",{staticClass:"upload-tips"},[e("span",[a._v("建议尺寸XXXXXX，图片支持jpg、png、jpeg、bmp，图片大小不超过1M")]),a._v(" "),a.uploadImgErrorMsg?e("span",{staticClass:"error"},[a._v(a._s(a.uploadImgErrorMsg))]):a._e()])],1)])]),a._v(" "),e("div",{staticClass:"from-row"},[e("div",{staticClass:"from-title"},[a._v("视频预览：")]),a._v(" "),e("div",{staticClass:"from-content"},[e("div",{staticClass:"play-box"},[!a.warm.recordId||a.playMsg?e("span",[a._v(a._s(a.playMsg||"暂无视频"))]):e("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"myVideo"}})])])]),a._v(" "),e("div",{staticClass:"from-row"},[e("div",{staticClass:"from-title"}),a._v(" "),e("div",{staticClass:"from-content"},[e("el-button",{staticClass:"live-btn",attrs:{type:"primary",plain:""},on:{click:a.saveWarm}},[a._v("保存")])],1)])])])])};s._withStripped=!0;var i=e(179),r=e(172),o={name:"warm-field",components:{VeUpload:i.a},data:()=>({warm:{status:"DISABLE",playMode:"AUTO",playCover:"",recordId:"",activityId:""},vhallParams:{sign:"",appId:"",accountId:"",token:"",signedAt:""},isSwitch:!1,loading:!1,videoSize:"200",percentVideo:0,percentImg:0,uploadErrorMsg:"",uploadImgErrorMsg:"",playMsg:""}),computed:{defaultImg(){return this.warm.playCover?`${this.$imgHost}/${this.warm.playCover}`:""}},created(){this.$route.params.id?this.initPage():this.goBack()},methods:{goBack(){this.$router.go(-1)},deleteImage(){this.warm.playCover=""},initPage(){r.a.queryWarmInfoById(this.$route.params.id).then(a=>{this.warm={activityId:this.$route.params.id,status:a.data.status,playMode:a.data.playType,playCover:a.data.imgUrl,recordId:a.data.recordId},this.vhallParams.recordId=a.data.recordId}).then(()=>{r.a.queryPassSdkInfo().then(a=>{this.vhallParams=a.data,this.$nextTick(()=>{this.initVhallUpload(),this.videosSuccess()})})})},queryWarmInfo(a){r.a.queryWarmInfoById(this.$route.params.id).then(t=>{this.warm={activityId:this.$route.params.id,status:t.data.status,playMode:t.data.playType,playCover:t.data.imgUrl,recordId:t.data.recordId},this.vhallParams.recordId=t.data.recordId,a&&a()})},uploadVideo(){document.getElementById("upload").click()},saveWarm(){r.a.saveAndEditWarmInfo({activityId:this.warm.activityId,recordId:this.warm.recordId,playType:this.warm.playMode,imgUrl:this.warm.playCover,status:this.warm.status}).then(a=>{console.log(a),200===a.code&&this.$toast({header:"提示",content:"保存成功",autoClose:2e3,position:"right-top"})})},uploadImgSuccess(a){this.warm.playCover=a.name},uploadError(a){console.log("上传失败:",a),this.uploadImgErrorMsg="上传图片失败"},initVhallUpload(){this.$nextTick(()=>{window.vhallCloudDemandSDK("#upload",{params:{confirmBtn:"#confirmUpload",name:"#rename",sign:this.vhallParams.sign,signed_at:this.vhallParams.signedAt,app_id:this.vhallParams.appId},beforeUpload:a=>"video/mp4"!==a.type?(this.uploadErrorMsg="不支持该视频格式，请上传mp4格式视频",!1):a.size/1024/1024>this.videoSize?(this.uploadErrorMsg="视频太大，请不要大于200M",!1):(this.uploadErrorMsg="",this.loading=!0,this.percentVideo=0,!0),progress:a=>{this.loading=!1,this.percentVideo=parseFloat(a.replace("%","")),100===this.percentVideo&&(this.percentVideo=0)},uploadSuccess(){document.getElementById("confirmUpload").click()},saveSuccess:a=>{this.warm.recordId=a.record_id,this.videosSuccess()},error:(a,t,e)=>{this.loading=!1,this.uploadErrorMsg=a}})})},videosSuccess(){this.warm.recordId&&(window.Vhall.ready(()=>{window.VhallPlayer.init({recordId:this.warm.recordId,type:"vod",videoNode:"myVideo",complete:function(){window.VhallPlayer.play()},fail:a=>{console.log(a),this.playMsg=`${a}...`}})}),window.Vhall.config({appId:this.vhallParams.appId,accountId:this.vhallParams.accountId,token:this.vhallParams.token}))}}},l=(e(267),e(1)),d=Object(l.a)(o,s,[function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"from-title"},[t("i",{staticClass:"star"},[this._v("*")]),this._v("暖场视频：")])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"hide"},[t("input",{attrs:{type:"file",id:"upload"}}),this._v(" "),t("input",{attrs:{type:"text",id:"rename"}}),this._v(" "),t("button",{staticClass:"saveBtn",attrs:{id:"confirmUpload"}})])},function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"from-title"},[t("i",{staticClass:"star"},[this._v("*")]),this._v("播放模式：")])}],!1,null,"b73c8c64",null);d.options.__file="src\\pages\\live-mager\\warm-field.vue";t.default=d.exports}}]);
//# sourceMappingURL=9.b4bb978a.js.map