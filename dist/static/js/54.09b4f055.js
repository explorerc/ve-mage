(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{643:function(t,e,o){},845:function(t,e,o){"use strict";var a=o(643);o.n(a).a},884:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"goods-info"}},[o("header",[t._v("新建/编辑商品信息")]),t._v(" "),o("el-form",{ref:"goodsData",staticClass:"demo-ruleForm",attrs:{model:t.goodsData,rules:t.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"商品名称",prop:"title"}},[o("el-input",{staticClass:"slot_inp_b",model:{value:t.goodsData.title,callback:function(e){t.$set(t.goodsData,"title",e)},expression:"goodsData.title"}},[o("template",{staticClass:"slot",slot:"append"},[o("span",{staticStyle:{color:"#2878FF"},domProps:{textContent:t._s(t.goodsData.title.gbLength())}}),t._v(" / 20")])],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"原始价格",prop:"ysjg"}},[o("div",{staticClass:"a_unit"},[o("el-input",{attrs:{min:"0",max:"999999"},model:{value:t.goodsData.ysjg,callback:function(e){t.$set(t.goodsData,"ysjg",t._n(e))},expression:"goodsData.ysjg"}}),t._v(" "),o("span",[t._v("元")])],1)]),t._v(" "),o("el-form-item",{attrs:{label:"促销价格",prop:"cxjg"}},[o("div",{staticClass:"a_unit"},[o("el-input",{attrs:{disabled:!t.goodsData.ysjg},model:{value:t.goodsData.cxjg,callback:function(e){t.$set(t.goodsData,"cxjg",t._n(e))},expression:"goodsData.cxjg"}}),t._v(" "),o("span",[t._v("元")])],1)]),t._v(" "),o("el-form-item",{attrs:{label:"商品图片",prop:"upload_list"}},[o("div",{staticClass:"upload_box"},[t._l(t.goodsData.upload_list,function(e,a){return o("ve-upload",{attrs:{title:"图片小于2MB 支持jpg、png、bmp格式 最佳尺寸：600 x 600",accept:"png|jpg|jpeg|bmp",defaultImg:t.defaultImg,nowIndex:a||0,fileSize:2048,errorMsg:t.uploadImgErrorMsg},on:{error:t.uploadError,success:t.uploadImgSuccess}})}),t._v(" "),t.goodsData.upload_list.length<4?o("span",{staticClass:"el-icon-circle-plus-outline",on:{click:t.add_upload}}):t._e()],2)]),t._v(" "),o("el-form-item",{attrs:{label:"商品描述"}},[o("com-input",{staticClass:"inupt_textarea",attrs:{"max-length":140,type:"textarea",placeholder:"请输入群组名称"},model:{value:t.goodsData.name,callback:function(e){t.$set(t.goodsData,"name","string"==typeof e?e.trim():e)},expression:"goodsData.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"商品链接",prop:"url"}},[o("el-input",{staticClass:"inupt_text",attrs:{type:"url"},model:{value:t.goodsData.url,callback:function(e){t.$set(t.goodsData,"url",e)},expression:"goodsData.url"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"淘口令"}},[o("com-input",{staticClass:"inupt_text",attrs:{"max-length":100,type:"text",placeholder:"请输入群组名称"},model:{value:t.goodsData.name,callback:function(e){t.$set(t.goodsData,"name","string"==typeof e?e.trim():e)},expression:"goodsData.name"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.onSubmit("goodsData")}}},[t._v("保存")]),t._v(" "),o("el-button",{attrs:{size:"small"},on:{click:function(e){t.resetForm("goodsData")}}},[t._v("取消")])],1)],1)],1)};a._withStripped=!0;var s={name:"info",created:function(){},components:{VeUpload:o(470).a},computed:{defaultImg:function(){return this.poster?this.$imgHost+"/"+this.poster:""}},data:function(){var t=this;return{errTitle:"",upload_list:[{}],goodsData:{name:"",title:"",ysjg:"",cxjg:"",url:"",upload_list:[{}]},uploadImgErrorMsg:"",rules:{title:[{required:!0,validator:function(e,o,a){var s=void 0;s||(s=setTimeout(function(){if(clearTimeout(s),s=null,!o)return a(new Error("商品名称不能为空"));if(o.gbLength()<e.min)return a(new Error("商品名称过短"));if(o.gbLength()>=e.max){for(var r in t[e.obj])if(r===e.field)return t[e.obj][r]=t[e.obj][r].slice(0,e.max),a()}else a()},500))},min:3,max:20,trigger:"change,blur",obj:"goodsData"}],ysjg:[{required:!0,type:"number",message:"请输入原始价格",trigger:"blur"},{type:"number",min:0,max:999999,message:"原始价格应大于0小于999999",trigger:"blur"}],cxjg:[{validator:function(e,o,a){var s=t[e.obj].ysjg;return o&&o<0?a(new Error("商品促销价格不能小于0")):o&&s&&o>s?a(new Error("商品促销价格不能大于原始价格")):o&&!s?a(new Error("请先填写原始价格")):a()},type:"number",min:0,max:999999,trigger:"blur",obj:"goodsData"}],url:[{required:!0,type:"url",message:"请输入商品链接",trigger:"blur"},{min:0,max:300,type:"url",message:"商品链接应大于0小于300",trigger:"blur"}],upload_list:[{required:!0,validator:function(e,o,a){var s=0;return t[e.obj].upload_list.map(function(t){t.name&&t.host&&(s+=1)}),s>0?a():a(new Error("请上传图片"))},trigger:"blur",obj:"goodsData"}]}}},methods:{add_upload:function(){this.goodsData.upload_list.push({})},onSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;console.log(e.goodsData),alert("submit!")})},resetForm:function(t){this.$refs[t].resetFields()},uploadImgSuccess:function(t){console.log(t),this.goodsData.upload_list[t.nowIndex]={name:t.name,host:t.host},console.log(this.goodsData)},uploadError:function(t){console.log(t)}}},r=(o(845),o(2)),l=Object(r.a)(s,a,[],!1,null,"5ceb96de",null);l.options.__file="src/pages/sales-tools/recommend-goods/info.vue";e.default=l.exports}}]);
//# sourceMappingURL=54.09b4f055.js.map