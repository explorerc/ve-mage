(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{172:function(a,t,e){"use strict";var i=e(5);const s={queryList:a=>i.a.ajax({method:"post",url:"/manage/base-manage/list-activity",params:a}),deleteById:a=>i.a.ajax({method:"post",url:"/manage/base-manage/del-activity",params:{id:a}}),queryWarmInfoById:a=>i.a.ajax({method:"post",url:"/manage/warm-up-manage/get",params:{activityId:a}}),saveAndEditWarmInfo:a=>i.a.ajax({method:"post",url:"/manage/warm-up-manage/edit",params:a}),queryReminderInfoById:a=>i.a.ajax({method:"post",url:"/",params:{id:a}}),saveReminderInfo:a=>i.a.ajax({method:"post",url:"/",params:a}),roleList:a=>i.a.ajax({method:"GET",url:"/manage/role-manage/list-role",params:{activityId:a}}),delAss:a=>i.a.ajax({method:"POST",url:"/manage/role-manage/del-assistant",params:a}),handleAss:(a,t)=>i.a.ajax({method:"POST",url:a?"/manage/role-manage/update-assistant":"/manage/role-manage/add-assistant",params:t}),getLimit:a=>i.a.ajax({method:"GET",url:"/manage/view-limit/get-limit",params:{activityId:a}}),saveLimit:a=>i.a.ajax({method:"POST",url:"/manage/view-limit/update-limit",params:a}),webinarInfo:a=>i.a.ajax({method:"GET",url:"/manage/base-manage/detail-activity",params:{id:a}}),updateWebinfo:(a,t)=>i.a.ajax({method:"POST",url:a?"/manage/base-manage/add-activity":"/manage/base-manage/update-activity",params:t}),queryEmailList:a=>i.a.ajax({method:"post",url:"/expand/email-invite/list",params:a}),deleteEmailById:a=>i.a.ajax({method:"post",url:"/expand/email-invite/delete",params:{emailInviteId:a}}),queryEmailInfoById:a=>i.a.ajax({method:"post",url:"/expand/email-invite/query",params:{emailInviteId:a}}),queryEmailTemplateList:()=>i.a.ajax({method:"post",url:"/expand/email-invite/templates",params:{}}),sendEmailInfo:a=>i.a.ajax({method:"post",url:"/expand/email-invite/send",params:a}),sendTimerEmailInfo:a=>i.a.ajax({method:"post",url:"/expand/email-invite/save-and-plansend",params:a}),sendTestEmailInfo:a=>i.a.ajax({method:"post",url:"/expand/email-invite/test-send",params:a}),saveAndsendEmail:a=>i.a.ajax({method:"post",url:"/expand/email-invite/save-and-send",params:a}),saveEmailInfo:a=>i.a.ajax({method:"post",url:"/expand/email-invite/save-draft",params:a}),saveWechat:a=>i.a.ajax({method:"post",url:"/expand/wechat-invite/save",params:a}),saveMsg:a=>i.a.ajax({method:"post",url:"/expand/sms-invite/save",params:a}),queryWechat:a=>i.a.ajax({method:"post",url:"/expand/wechat-invite/query",params:{inviteId:a}}),queryMsg:a=>i.a.ajax({method:"post",url:"/expand/sms-invite/query",params:{inviteId:a}}),queryWechatlist:a=>i.a.ajax({method:"post",url:"/expand/wechat-invite/list",params:a}),queryMsglist:a=>i.a.ajax({method:"post",url:"/expand/sms-invite/list",params:a}),deleteWechat:a=>i.a.ajax({method:"post",url:"/expand/wechat-invite/delete",params:{inviteId:a}}),deleteMsg:a=>i.a.ajax({method:"post",url:"/expand/sms-invite/delete",params:{inviteId:a}}),queryPassSdkInfo:()=>i.a.ajax({method:"post",url:"/common/pass-sdk/create-access-token",params:{}})};t.a=s},217:function(a,t,e){},317:function(a,t,e){"use strict";var i=e(217);e.n(i).a},379:function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{directives:[{name:"ComLoading",rawName:"v-ComLoading",value:a.loading,expression:"loading"}],attrs:{"com-loading-text":"拼命加载中"}},[e("p",[a._v("角色设置"),e("i",[a._v("？")]),e("span",{on:{click:a.add}},[a._v("添加助理")])]),a._v(" "),e("div",{staticClass:"content"},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:a.tableData,stripe:""}},[e("el-table-column",{attrs:{label:"头像",width:"150"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("img",{staticClass:"protrait",attrs:{src:a.imgHost+t.row.avatar}})]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"nickname",label:"昵称",width:"150"}}),a._v(" "),e("el-table-column",{attrs:{prop:"role",label:"角色",width:"150"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("span",[a._v(a._s("HOST"===t.row.role?"主持人":"助理"))])]}}])}),a._v(" "),e("el-table-column",{attrs:{label:"关联活动账号",width:"150",prop:"activityId"}}),a._v(" "),e("el-table-column",{attrs:{prop:"password",label:"口令",width:"150"}}),a._v(" "),e("el-table-column",{attrs:{label:"状态",width:"150"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("span",[a._v(a._s(!0===t.row.online?"在线":"离线"))])]}}])}),a._v(" "),e("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"text",size:"small"}},[e("a",{attrs:{href:""}},[a._v("进入直播")])]),a._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){a.copyLink(t.$index,t.row)}}},[a._v("复制链接")]),a._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){a.copyInfo(t.$index,t.row)}}},[a._v("复制邀请信息")]),a._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){a.handleEdit(t.$index,t.row)}}},[a._v("编辑")]),a._v(" "),e("el-button",{class:1==t.row.online?"disabled":"",attrs:{type:"text",size:"small"},on:{click:function(e){a.handleKick(t.$index,t.row)}}},[a._v("踢出")]),a._v(" "),"HOST"!=t.row.role?e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){a.handleDelete(t.$index,t.row)}}},[a._v("删除角色")]):a._e()]}}])})],1)],1),a._v(" "),a.msgKick?e("message-box",{attrs:{header:"提示",content:"执行踢出操作后，该角色将从发起端中被强制踢出，是否继续操作？",cancelText:"取消",confirmText:"确定"},on:{handleClick:a.kickConfirm}}):a._e(),a._v(" "),a.msgDelete?e("message-box",{attrs:{header:"提示",content:"是否确认删除该角色？",cancelText:"取消",confirmText:"确定"},on:{handleClick:a.deleteConfirm}}):a._e(),a._v(" "),e("transition",{attrs:{name:"fade"}},[a.modalData.isShow?e("div",{staticClass:"modal-cover",on:{click:a.closeModal}},[e("div",{staticClass:"created-modal"},[e("p",[a._v(a._s(a.modalData.title))]),a._v(" "),e("div",{staticClass:"btm"},[e("div",[e("label",[a._v("头像:")]),a._v(" "),e("com-upload",{attrs:{accept:"png|jpg|jpeg",actionUrl:"/api/upload/do-upload",inputName:"file",fileSize:1024},on:{error:a.uploadError,progress:a.uploadProgress,load:a.uploadImgSuccess}},[e("div",{staticClass:"upload-file-box",attrs:{title:"点击上传"}},[a.percentImg?e("el-progress",{attrs:{type:"circle",percentage:a.percentImg}}):a._e(),a._v(" "),e("i",{staticClass:"iconfont icon-jiahao"}),a._v(" "),e("span",[a._v("上传头像")]),a._v(" "),a.modalData.avatar?e("div",{staticClass:"upload-file-botton"},[a._v("编辑")]):a._e(),a._v(" "),a.modalData.avatar?e("div",{staticClass:"temp-img",style:{backgroundImage:"url("+a.imgHost+"/"+a.modalData.avatar+")"}}):a._e()],1)])],1),a._v(" "),e("div",[e("label",[a._v("昵称:")]),a._v(" "),e("com-input",{attrs:{value:a.modalData.nickname,placeholder:"请输入昵称","max-length":10},on:{"update:value":function(t){a.$set(a.modalData,"nickname",t)}}})],1),a._v(" "),e("div",[e("label",[a._v("口令:")]),a._v(" "),e("com-input",{attrs:{value:a.modalData.password,placeholder:"请输入口令","max-length":6},on:{"update:value":function(t){a.$set(a.modalData,"password",t)}}})],1)]),a._v(" "),e("p",[e("button",{on:{click:function(t){a.saveSetting(a.activityId)}}},[a._v("确定")])])])]):a._e()])],1)};i._withStripped=!0;var s=e(172),o={data:()=>({tableData:[{id:"",activityId:"",avatar:"",nickname:"",role:"",password:"",online:!0},{id:"",activityId:"",avatar:"",nickname:"",role:"",password:"",online:!1}],modalData:{isShow:!1,title:"添加角色",nickname:"",password:"",avatar:"",id:"",idx:""},webinar:{name:"张三",title:"什么什么什么直播",time:"2018-07-15 23:20:00"},activityId:"",msgKick:!1,msgDelete:!1,loading:!1,copyDataval:"www.baidu.com",imgHost:"http://dev-zhike.oss-cn-beijing.aliyuncs.com/",percentImg:0}),created(){this.activityId=this.$route.params.id,this.getRolelist()},methods:{handleClick(a){console.log(a)},handleEdit(a,t){this.modalData={isShow:!0,title:"编辑角色",nickname:t.nickname,password:t.password,avatar:t.avatar,id:t.id,idx:a}},handleKick(a,t){this.msgKick=!0},handleDelete(a,t){console.log(a),this.msgDelete=!0,this.modalData.id=t.id,this.modalData.idx=a},kickConfirm(a){"confirm"===a.action||(this.msgKick=!1)},deleteConfirm(a){if("confirm"===a.action){let a={id:this.modalData.id};s.a.delAss(a).then(a=>{this.msgDelete=!1,200===a.code&&(console.log(a),this.$toast({content:"删除成功",position:"center"}),this.tableData.splice([this.modalData.idx],1))}).catch(a=>{this.$toast({content:a.msg,position:"center"}),this.msgDelete=!1})}else this.msgDelete=!1},uploadError(a){console.log("上传失败:",a)},uploadProgress(a){this.percentImg=parseFloat(parseFloat(a.percent.replace("%","")).toFixed(2)),100===this.percentImg&&(this.percentImg=0)},uploadImgSuccess(a){const t=JSON.parse(a.data);this.modalData.avatar=t.data.name},closeModal(a){"modal-cover"===a.target.className&&(this.modalData.isShow=!1)},add(){this.modalData={isShow:!0,title:"创建角色",nickname:"",password:"",avatar:"",id:""}},saveSetting(){if(0===this.modalData.nickname.length)return this.$toast({content:"请输入角色昵称",position:"center"}),!1;if(0===this.modalData.password.length)return this.$toast({content:"请输入口令",position:"center"}),!1;if(0===this.modalData.avatar.length)return this.$toast({content:"请上传角色头像",position:"center"}),!1;let a={id:this.modalData.id,activityId:this.activityId,password:this.modalData.password,nickname:this.modalData.nickname,avatar:this.modalData.avatar},t=this.modalData.title.search("编辑")>=0;s.a.handleAss(t,a).then(e=>{if(200===e.code)if(this.$toast({content:t?"编辑成功":"创建成功",position:"center"}),t)this.tableData[this.modalData.idx].avatar=a.avatar,this.tableData[this.modalData.idx].nickname=a.nickname,this.tableData[this.modalData.idx].password=a.password;else{let t={id:e.data.id,activityId:a.activityId,avatar:a.avatar,nickname:a.nickname,role:"ASSISTANT",password:a.password,online:!0};this.tableData.push(t)}else this.$toast({content:e.msg,position:"center"});this.modalData.isShow=!1}).catch(a=>{console.log(a)})},getRolelist(){this.loading=!0,s.a.roleList(this.activityId).then(a=>{this.loading=!1,200===a.code&&(console.log(a),this.tableData=a.data.list)}).catch(()=>{this.loading=!1})},copyLink(a,t){this.copyDataval.copyClipboard(a=>{let t;t="success"===a?"复制成功":"复制失败",this.$toast({content:t,position:"center"})})},copyInfo(a,t){`您好，《${this.webinar.name}》的直播，以下为直播的详细信息及参会信息，请准时参加，谢谢\n直播名称：${this.webinar.title}\n直播ID：${this.activityId}\n开始时间：${this.webinar.name}\n嘉宾口令：${this.tableData[a].password}\n加入链接：http://t.e.vhall.com/mywebinar/login/${this.activityId}`.copyClipboard(a=>{let t;t="success"===a?"复制成功":"复制失败",this.$toast({content:t,position:"center"})})}}},n=(e(317),e(1)),l=Object(n.a)(o,i,[],!1,null,null,null);l.options.__file="src\\pages\\live-mager\\prepare\\role.vue";t.default=l.exports}}]);
//# sourceMappingURL=18.36656630.js.map