(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{182:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"sidebar"},[s("div",{staticClass:"card"},[s("header",[s("img",{staticClass:"avatar",attrs:{width:"40",height:"40",alt:e.user.name,src:e.user.img}}),e._v(" "),s("p",{staticClass:"name"},[e._v(e._s(e.user.name))])]),e._v(" "),s("footer",[s("input",{staticClass:"search",attrs:{type:"text",placeholder:"search user..."},on:{keyup:e.onSearchKeyup}})])]),e._v(" "),s("div",{staticClass:"list"},[s("ul",e._l(e.sessions,function(t){return s("li",{class:{active:t.id===e.currentId},on:{click:function(s){e.selectSession(t.id)}}},[s("img",{staticClass:"avatar",attrs:{width:"30",height:"30",alt:t.user.name,src:t.user.img}}),e._v(" "),s("p",{staticClass:"name"},[e._v(e._s(t.user.name))])])}))])]),e._v(" "),s("div",{staticClass:"main"},[s("div",{directives:[{name:"scroll-bottom",rawName:"v-scroll-bottom",value:e.session.messages,expression:"session.messages"}],staticClass:"message"},[e.session?s("ul",e._l(e.session.messages,function(t){return s("li",[s("p",{staticClass:"time"},[s("span",[e._v(e._s(e._f("time")(t.date)))])]),e._v(" "),s("div",{staticClass:"main",class:{self:t.self}},[s("img",{staticClass:"avatar",attrs:{width:"30",height:"30",src:t.self?e.user.img:e.session.user.img}}),e._v(" "),s("div",{staticClass:"text"},[e._v(e._s(t.content))])])])})):e._e()]),e._v(" "),s("div",{staticClass:"text"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{placeholder:"按 Ctrl + Enter 发送"},domProps:{value:e.content},on:{keyup:e.onKeyup,input:function(t){t.target.composing||(e.content=t.target.value)}}})])])])};n._withStripped=!0;var i=s(60),a=s.n(i),r=s(1),c=s.n(r),o=s(38);c.a.use(o.a);var u=new Date,l=new o.a.Store({state:{user:{name:"coffce",img:"src/assets/image/chat/1.jpg"},sessions:[{id:1,user:{name:"示例介绍",img:"src/assets/image/chat/2.png"},messages:[{content:"Hello，这是一个基于Vue + Vuex + Webpack构建的简单chat示例，聊天记录保存在localStorge, 有什么问题可以通过Github Issue问我。",date:u},{content:"项目地址: https://github.com/coffcer/vue-chat",date:u}]},{id:2,user:{name:"webpack",img:"dist/images/3.jpg"},messages:[]}],currentSessionId:1,filterKey:""},mutations:{INIT_DATA:function(e){var t=localStorage.getItem("vue-chat-session");t&&(e.sessions=JSON.parse(t))},SEND_MESSAGE:function(e,t){var s=e.sessions,n=e.currentSessionId;s.find(function(e){return e.id===n}).messages.push({content:t,date:new Date,self:!0})},SELECT_SESSION:function(e,t){e.currentSessionId=t},SET_FILTER_KEY:function(e,t){e.filterKey=t}}});l.watch(function(e){return e.sessions},function(e){console.log("CHANGE: ",e),localStorage.setItem("vue-chat-session",a()(e))},{deep:!0});var d=s(59),f={data:function(){return{content:""}},vuex:{actions:{initData:function(e){return(0,e.dispatch)("INIT_DATA")},sendMessage:function(e,t){return(0,e.dispatch)("SEND_MESSAGE",t)},selectSession:function(e,t){return(0,e.dispatch)("SELECT_SESSION",t)},search:function(e,t){return(0,e.dispatch)("SET_FILTER_KEY",t)}},getters:{user:function(e){return e.user},filterKey:function(e){return e.filterKey}},sessions:function(e){var t=e.sessions,s=e.filterKey;return t.filter(function(e){return e.user.name.includes(s)})},currentId:function(e){return e.currentSessionId},user:function(e){return e.user},session:function(e){var t=e.sessions,s=e.currentSessionId;return t.find(function(e){return e.id===s})}},filters:{time:function(e){return"string"==typeof e&&(e=new Date(e)),e.getHours()+":"+e.getMinutes()}},directives:{"scroll-bottom":function(){var e=this;this.vm.$nextTick(function(){e.el.scrollTop=e.el.scrollHeight-e.el.clientHeight})}},created:function(){d.a.$emit("breads",[{title:"用户管理"},{title:"聊天管理",url:"/goodMager/list/"}])},methods:{onSearchKeyup:function(e){this.search(e.target.value)},onKeyup:function(e){e.ctrlKey&&13===e.keyCode&&this.content.length&&(this.sendMessage(this.content),this.content="")}}},m=(s(221),s(0)),v=Object(m.a)(f,n,[],!1,null,"b2320e96",null);v.options.__file="src/pages/user-mager/chat.vue";t.default=v.exports},196:function(e,t,s){},221:function(e,t,s){"use strict";var n=s(196);s.n(n).a}}]);
//# sourceMappingURL=8.b3b7c35a.js.map