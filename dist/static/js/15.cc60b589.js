(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{181:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"coupon-list"}},[o("header",[o("p",[t._v("优惠券")]),t._v(" "),o("div",{staticClass:"btn-box"},[o("com-button",{staticClass:"add-goods primary-button",attrs:{round:""},on:{click:function(e){t.handleEdit(null)}}},[t._v("\n        新建优惠券\n      ")])],1)]),t._v(" "),o("div",{staticClass:"table-box"},[o("table",{attrs:{border:"1"}},[t._m(0),t._v(" "),o("draggable",{attrs:{element:"tbody"}},t._l(t.tableData,function(e,i){return o("tr",{key:i},[o("td",[t._v(t._s(e.id<10?"0"+e.id:e.id))]),t._v(" "),o("td",[t._v(t._s(e.total))]),t._v(" "),o("td",[t._v(t._s(e.favour))]),t._v(" "),o("td",[t._v(t._s(e.start_time.split(" ")[0])+"至"+t._s(e.end_time.split(" ")[0]))]),t._v(" "),o("td",{staticStyle:{width:"15%","min-width":"140px"}},[o("div",{staticClass:"btn-box"},[o("el-button",{attrs:{type:"text"},on:{click:function(o){t.handleEdit(e)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){t.handleDelete(e)}}},[t._v("删除")])],1)])])}))],1),t._v(" "),t.total>t.searchParams.pageSize?o("div",{staticClass:"page-pagination"},[o("ve-pagination",{attrs:{total:t.total,pageSize:t.searchParams.pageSize,currentPage:t.currentPage},on:{changePage:t.changePage}})],1):t._e()]),t._v(" "),t.isEditShow?o("message-box",{staticClass:"coupon-edit",attrs:{width:"464px",type:"prompt",header:t.editTitle},on:{handleClick:t.editCoupon}},[o("div",{staticClass:"mager-box message-box-content"},[o("div",{staticClass:"from-box"},[t.couponInfo.id?o("div",{staticClass:"from-row"},[o("span",{staticClass:"from-title"},[t._v("分类id:")]),o("span",{staticStyle:{"line-height":"20px"}},[t._v(t._s(t.couponInfo.id))])]):t._e(),t._v(" "),o("div",{staticClass:"from-row"},[o("span",{staticClass:"from-title"},[t._v("总金额:")]),t._v(" "),o("com-input",{attrs:{type:"text",placeholder:"请输入优惠券的总金额",value:t.couponInfo.total,errorTips:t.couponError},on:{"update:value":function(e){t.$set(t.couponInfo,"total",e)}},model:{value:t.couponInfo.total,callback:function(e){t.$set(t.couponInfo,"total",e)},expression:"couponInfo.total"}})],1),t._v(" "),o("div",{staticClass:"from-row"},[o("span",{staticClass:"from-title"},[t._v("优惠:")]),t._v(" "),o("com-input",{attrs:{type:"text",placeholder:"请输入优惠券的总金额",value:t.couponInfo.favour,errorTips:t.couponError},on:{"update:value":function(e){t.$set(t.couponInfo,"favour",e)}},model:{value:t.couponInfo.favour,callback:function(e){t.$set(t.couponInfo,"favour",e)},expression:"couponInfo.favour"}})],1),t._v(" "),o("div",{staticClass:"from-row"},[o("span",{staticClass:"from-title"},[t._v("有效期:")]),t._v(" "),o("el-date-picker",{attrs:{type:"daterange",align:"right","value-forma":"yyyy-MM-dd","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1)])])]):t._e(),t._v(" "),t.isDelShow?o("message-box",{staticClass:"coupon-edit",attrs:{width:"464px",type:"error"},on:{handleClick:t.handleDelShow}},[o("div",{staticClass:"mager-box message-box-content"},[t._v("\n            删除该优惠券后，用户将不能再看到和使用该优惠券，请问要删除吗？\n        ")])]):t._e()],1)};i._withStripped=!0;var n=o(9),a=o.n(n),s=o(176),l=o.n(s),c="/coupon/info",r="/coupon/add",u="/coupon/update",d="/coupon/delete",p=o(59),h=o(190),v={components:{draggable:l.a,VePagination:h.a},data:function(){return{tableData:[{id:1,name:""}],isInit:!1,isNoGoods:!1,isEditShow:!1,isDelShow:!1,editTitle:"",couponInfo:{id:null,total:null,favour:null,start_time:null,end_time:null},couponError:"",searchParams:{type:"",date:"",page:1,pageSize:10},total:null,currentPage:1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,o=new Date;o.setTime(o.getTime()-6048e5),t.$emit("pick",[o,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,o=new Date;o.setTime(o.getTime()-2592e6),t.$emit("pick",[o,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,o=new Date;o.setTime(o.getTime()-7776e6),t.$emit("pick",[o,e])}}]},timeValue:[]}},created:function(){this.queryList(),p.a.$emit("breads",[{title:"销售管理"},{title:"优惠券",url:"/saleMager/coupon/"}])},mounted:function(){},watch:{tableData:{handler:function(t,e){t.length>=1&&this.isInit},deep:!0}},methods:{queryList:function(){var t=this;this.$get(this.$baseUrl+c,{}).then(function(e){200===e.code&&(t.tableData=e.data,t.tableData.length<1?t.isNoGoods=!0:t.isNoGoods=!1)}).catch(function(){t.tableData=[]})},editCoupon:function(t){var e=this;if("confirm"===t.action){var o=void 0,i=a()({},this.couponInfo,{start_time:this.timeValue[0],end_time:this.timeValue[1]});o=this.couponInfo.id?this.$baseUrl+u:this.$baseUrl+r,this.$post(o,i).then(function(t){200===t.code&&(e.queryList(),e.isEditShow=!1,e.couponInfo={id:null,total:null,favour:null,start_time:null,end_time:null},e.timeValue=[])}).catch(function(){e.tableData=[]})}else this.isEditShow=!1,this.couponInfo={id:null,total:null,favour:null,start_time:null,end_time:null},this.timeValue=[]},handleEdit:function(t){t?(this.editTitle="编辑优惠券",this.couponInfo=a()({},t),this.timeValue[0]=this.couponInfo.start_time,this.timeValue[1]=this.couponInfo.end_time):this.editTitle="新建优惠券",this.isEditShow=!0},changeTitle:function(t){this.titleId=t},handleDelete:function(t){this.isDelShow=!0,this.couponInfo=a()({},t)},handleDelShow:function(t){var e=this;"cancel"===t.action?this.isDelShow=!1:this.$get(this.$baseUrl+d,a()({},this.couponInfo)).then(function(t){200===t.code&&(e.queryList(),e.isDelShow=!1)})}}},f=(o(236),o(0)),m=Object(f.a)(v,i,[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",[o("tr",[o("th",[t._v("优惠券id")]),t._v(" "),o("th",[t._v("总金额")]),t._v(" "),o("th",[t._v("优惠金额")]),t._v(" "),o("th",[t._v("有效期")]),t._v(" "),o("th",{staticStyle:{width:"15%","min-width":"140px"}},[t._v("操作")])])])}],!1,null,"de1e8772",null);m.options.__file="src/pages/sale-mager/coupon.vue";e.default=m.exports},211:function(t,e,o){},236:function(t,e,o){"use strict";var i=o(211);o.n(i).a}}]);
//# sourceMappingURL=15.cc60b589.js.map